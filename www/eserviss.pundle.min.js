(function(global,factory){if(typeof define==="function"&&define.amd)define(factory);else if(typeof module==="object")module.exports=factory();else global.augment=factory()})(this,function(){"use strict";var Factory=function(){};var slice=Array.prototype.slice;var augment=function(base,body){var uber=Factory.prototype=typeof base==="function"?base.prototype:base;var prototype=new Factory,properties=body.apply(prototype,slice.call(arguments,2).concat(uber));if(typeof properties==="object")for(var key in properties)prototype[key]=properties[key];if(!prototype.hasOwnProperty("constructor"))return prototype;var constructor=prototype.constructor;constructor.prototype=prototype;return constructor};augment.defclass=function(prototype){var constructor=prototype.constructor;constructor.prototype=prototype;return constructor};augment.extend=function(base,body){return augment(base,function(uber){this.uber=uber;return body})};return augment});(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=[].slice,r=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},n=1e-10,a=i._internals.isSelector,o=i._internals.isArray,h=r.prototype=i.to({},.1,{}),l=[];r.version="1.11.6",h.constructor=r,h.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.ticker=i.ticker,h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(t,e){var s,r=this.ratio;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var n=this._time;this.render(0,!0,!1),this._initted=!1,this.render(n,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var a,o=1/(1-r),h=this._firstPT;h;)a=h.s+h.c,h.c*=o,h.s=a-h.c,h=h._next}return this},h.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,r,a,o,h,_,u,p,c=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,d=this._cycle,g=this._duration;if(t>=c?(this._totalTime=c,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete"),0===g&&(p=this._rawPrevTime,this._startTime===this._timeline._duration&&(t=0),(0===t||0>p||p===n)&&p!==t&&(i=!0,p>n&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||this._rawPrevTime===t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===g&&this._rawPrevTime>0&&this._rawPrevTime!==n)&&(r="onReverseComplete",s=this._reversed),0>t?(this._active=!1,0===g&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=p=!e||t||this._rawPrevTime===t?t:n)):this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(o=g+this._repeatDelay,this._cycle=this._totalTime/o>>0,0!==this._cycle&&this._cycle===this._totalTime/o&&this._cycle--,this._time=this._totalTime-this._cycle*o,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:0>this._time&&(this._time=0)),this._easeType?(h=this._time/g,_=this._easeType,u=this._easePower,(1===_||3===_&&h>=.5)&&(h=1-h),3===_&&(h*=2),1===u?h*=h:2===u?h*=h*h:3===u?h*=h*h*h:4===u&&(h*=h*h*h*h),this.ratio=1===_?1-h:2===_?h:.5>this._time/g?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/g)),f===this._time&&!i&&d===this._cycle)return m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!s?this.ratio=this._ease.getRatio(this._time/g):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)),this._cycle!==d&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||l)),r&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||l),0===g&&this._rawPrevTime===n&&p!==n&&(this._rawPrevTime=0)))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new r(t,e,s)},r.staggerTo=r.allTo=function(t,e,n,h,_,u,p){h=h||0;var c,f,m,d,g=n.delay||0,v=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),_.apply(p||this,u||l)};for(o(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=s.call(t,0))),c=t.length,m=0;c>m;m++){f={};for(d in n)f[d]=n[d];f.delay=g,m===c-1&&_&&(f.onComplete=y),v[m]=new r(t[m],e,f),g+=h}return v},r.staggerFrom=r.allFrom=function(t,e,i,s,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,s,n,a,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,s,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,s,n,a,o,h)},r.delayedCall=function(t,e,i,s,n){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:n,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var _=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),s=s.concat(_(n,e)),r=s.length),n=n._next;return s},u=r.getAllTweens=function(e){return _(t._rootTimeline,e).concat(_(t._rootFramesTimeline,e))};r.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,h=u(0!=r),l=h.length,_=i&&s&&r;for(o=0;l>o;o++)a=h[o],(_||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var n,h,l,_,u,p=i._tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=s.call(t,0)),o(t))for(_=t.length;--_>-1;)r.killChildTweensOf(t[_],e);else{n=[];for(l in p)for(h=p[l].target.parentNode;h;)h===t&&(n=n.concat(p[l].tweens)),h=h.parentNode;for(u=n.length,_=0;u>_;_++)e&&n[_].totalTime(n[_].totalDuration()),n[_]._enabled(!1,!1)}}};var p=function(t,i,s,r){i=i!==!1,s=s!==!1,r=r!==!1;for(var n,a,o=u(r),h=i&&s&&r,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){p(!0,t,e,i)},r.resumeAll=function(t,e,i){p(!1,t,e,i)},r.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||n,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},h.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)i=r[s],a(i)&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));a(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,n=i._internals.isSelector,a=i._internals.isArray,o=[],h=function(t){var e,i={};for(e in t)i[e]=t[e];return i},l=function(t,e,i,s){t._timeline.pause(t._startTime),e&&e.apply(s||t._timeline,i||o)},_=o.slice,u=s.prototype=new e;return s.version="1.11.6",u.constructor=s,u.kill()._gc=!1,u.to=function(t,e,s,r){return e?this.add(new i(t,e,s),r):this.set(t,s,r)},u.from=function(t,e,s,r){return this.add(i.from(t,e,s),r)},u.fromTo=function(t,e,s,r,n){return e?this.add(i.fromTo(t,e,s,r),n):this.set(t,r,n)},u.staggerTo=function(t,e,r,a,o,l,u,p){var c,f=new s({onComplete:l,onCompleteParams:u,onCompleteScope:p,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),n(t)&&(t=_.call(t,0)),a=a||0,c=0;t.length>c;c++)r.startAt&&(r.startAt=h(r.startAt)),f.to(t[c],e,h(r),c*a);return this.add(f,o)},u.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},u.staggerFromTo=function(t,e,i,s,r,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,h)},u.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},u.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},u.add=function(r,n,o,h){var l,_,u,p,c,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&a(r)){for(o=o||"normal",h=h||0,l=n,_=r.length,u=0;_>u;u++)a(p=r[u])&&(p=new s({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?l=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),l+=h;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(c=this,f=c.rawTime()>r._startTime;c._timeline;)f&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},u.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&a(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},u._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},u.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},u.insert=u.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},u.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},u.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},u.addPause=function(t,e,i,s){return this.call(l,["{self}",e,i,s],this,t)},u.removeLabel=function(t){return delete this._labels[t],this},u.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},u._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&a(r)))for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},u.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},u.stop=function(){return this.paused(!0)},u.gotoAndPlay=function(t,e){return this.play(t,e)},u.gotoAndStop=function(t,e){return this.pause(t,e)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,h,l,_=this._dirty?this.totalDuration():this._totalDuration,u=this._time,p=this._startTime,c=this._timeScale,f=this._paused;if(t>=_?(this._totalTime=this._time=_,this._reversed||this._hasPausedChild()||(n=!0,h="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>r&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=_+1e-4):1e-7>t?(this._totalTime=this._time=0,(0!==u||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(h="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(l=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==u&&this._first||i||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==u&&t>0&&(this._active=!0),0===u&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||o)),this._time>=u)for(s=this._first;s&&(a=s._next,!this._paused||f);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||f);)(s._active||u>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o)),h&&(this._gc||(p===this._startTime||c!==this._timeScale)&&(0===this._time||_>=this.totalDuration())&&(n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||o)))}},u._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},u.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)r>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(s!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,s)),o=n.length))),a=a._next;return n},u.getTweensOf=function(t,e){for(var s=i.getTweensOf(t),r=s.length,n=[],a=0;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(n[a++]=s[r]);return n},u._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},u.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},u._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},u.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},u.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},u._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},u.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},u.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,0>r._startTime&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),i=r._startTime+r._totalDuration/r._timeScale,i>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},u.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},u.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,n=[],a=new i(null,null,1,0),o=s.prototype=new t;return o.constructor=s,o.kill()._gc=!1,s.version="1.11.6",o.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},o.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},o.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},o.tweenTo=function(t,i){i=i||{};var s,r,o,h={ease:a,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)h[r]=i[r];return h.time=this._parseTimeOrLabel(t),s=Math.abs(Number(h.time)-this._time)/this._timeScale||.001,o=new e(this,s,h),h.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&s===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||o,i.onStartParams||n)},o},o.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},o.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,a,o,h,l,_,u=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,c=this._time,f=this._totalTime,m=this._startTime,d=this._timeScale,g=this._rawPrevTime,v=this._paused,y=this._cycle;if(t>=u?(this._locked||(this._totalTime=u,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,h="onComplete",0===this._duration&&(0===t||0>g||g===r)&&g!==t&&this._first&&(l=!0,g>r&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==c||0===p&&g!==r&&(g>0||0>t&&g>=0)&&!this._locked)&&(h="onReverseComplete",a=this._reversed),0>t?(this._active=!1,0===p&&g>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:r,t=0,this._initted||(l=!0))):(0===p&&0>g&&(l=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(_=p+this._repeatDelay,this._cycle=this._totalTime/_>>0,0!==this._cycle&&this._cycle===this._totalTime/_&&this._cycle--,this._time=this._totalTime-this._cycle*_,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time))),this._cycle!==y&&!this._locked){var T=this._yoyo&&0!==(1&y),w=T===(this._yoyo&&0!==(1&this._cycle)),x=this._totalTime,b=this._cycle,P=this._rawPrevTime,S=this._time;if(this._totalTime=y*p,y>this._cycle?T=!T:this._totalTime+=p,this._time=c,this._rawPrevTime=0===p?g-1e-4:g,this._cycle=y,this._locked=!0,c=T?0:p,this.render(c,e,0===p),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n),w&&(c=T?p+1e-4:-1e-4,this.render(c,!0,!1)),this._locked=!1,this._paused&&!v)return;this._time=S,this._totalTime=x,this._cycle=b,this._rawPrevTime=P}if(!(this._time!==c&&this._first||i||l))return f!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n)),this._time>=c)for(s=this._first;s&&(o=s._next,!this._paused||v);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=o;else for(s=this._last;s&&(o=s._prev,!this._paused||v);)(s._active||c>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=o;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),h&&(this._locked||this._gc||(m===this._startTime||d!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(a&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||n)))},o.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(s=0;h>s;s++)r=a[s],r.isActive()&&(n[o++]=r);return n},o.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},o.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},o.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},o.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},o.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},o.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},o.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},o.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},o.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],r={},n=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",o=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},h=(t+e)/2,l=(e+i)/2,_=(i+s)/2,u=(h+l)/2,p=(l+_)/2,c=(p-u)/8;return r.b=h+(t-h)/4,n.b=u+c,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+p)/2,a.b=p-c,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},h=function(t,r,n,a,h){var l,_,u,p,c,f,m,d,g,v,y,T,w,x=t.length-1,b=0,P=t[0].a;for(l=0;x>l;l++)c=t[b],_=c.a,u=c.d,p=t[b+1].d,h?(y=e[l],T=i[l],w=.25*(T+y)*r/(a?.5:s[l]||.5),f=u-(u-_)*(a?.5*r:0!==y?w/y:0),m=u+(p-u)*(a?.5*r:0!==T?w/T:0),d=u-(f+((m-f)*(3*y/(y+T)+.5)/4||0))):(f=u-.5*(u-_)*r,m=u+.5*(p-u)*r,d=u-(f+m)/2),f+=d,m+=d,c.c=g=f,c.b=0!==l?P:P=c.a+.6*(c.c-c.a),c.da=u-_,c.ca=g-_,c.ba=P-_,n?(v=o(_,P,g,u),t.splice(b,1,v[0],v[1],v[2],v[3]),b+=4):b++,P=m;c=t[b],c.b=P,c.c=P+.4*(c.d-P),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=P-c.a,n&&(v=o(c.a,P,c.c,c.d),t.splice(b,1,v[0],v[1],v[2],v[3]))},l=function(t,s,r,a){var o,h,l,_,u,p,c=[];if(a)for(t=[a].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][s])&&"="===p.charAt(1)&&(t[h][s]=a[s]+Number(p.charAt(0)+p.substr(2)));if(o=t.length-2,0>o)return c[0]=new n(t[0][s],0,0,t[-1>o?0:1][s]),c;for(h=0;o>h;h++)l=t[h][s],_=t[h+1][s],c[h]=new n(l,0,0,_),r&&(u=t[h+2][s],e[h]=(e[h]||0)+(_-l)*(_-l),i[h]=(i[h]||0)+(u-_)*(u-_));return c[h]=new n(t[h][s],0,0,t[h+1][s]),c},_=function(t,n,o,_,u,p){var c,f,m,d,g,v,y,T,w={},x=[],b=p||t[0];u="string"==typeof u?","+u+",":a,null==n&&(n=1);for(f in t[0])x.push(f);if(t.length>1){for(T=t[t.length-1],y=!0,c=x.length;--c>-1;)if(f=x[c],Math.abs(b[f]-T[f])>.05){y=!1;break}y&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=s.length=0,c=x.length;--c>-1;)f=x[c],r[f]=-1!==u.indexOf(","+f+","),w[f]=l(t,f,r[f],p);for(c=e.length;--c>-1;)e[c]=Math.sqrt(e[c]),i[c]=Math.sqrt(i[c]);if(!_){for(c=x.length;--c>-1;)if(r[f])for(m=w[x[c]],v=m.length-1,d=0;v>d;d++)g=m[d+1].da/i[d]+m[d].da/e[d],s[d]=(s[d]||0)+g*g;for(c=s.length;--c>-1;)s[c]=Math.sqrt(s[c])}for(c=x.length,d=o?4:1;--c>-1;)f=x[c],m=w[f],h(m,n,o,_,r[f]),y&&(m.splice(0,d),m.splice(m.length-d,d));return w},u=function(t,e,i){e=e||"soft";var s,r,a,o,h,l,_,u,p,c,f,m={},d="cubic"===e?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||d+1>t.length)throw"invalid Bezier data";for(p in t[0])v.push(p);for(l=v.length;--l>-1;){for(p=v[l],m[p]=h=[],c=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][p]:"string"==typeof(f=t[_][p])&&"="===f.charAt(1)?i[p]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&_>1&&u-1>_&&(h[c++]=(s+h[c-2])/2),h[c++]=s;for(u=c-d+1,c=0,_=0;u>_;_+=d)s=h[_],r=h[_+1],a=h[_+2],o=2===d?0:h[_+3],h[c++]=f=3===d?new n(s,r,a,o):new n(s,(2*r+s)/3,(2*r+a)/3,a);h.length=c}return m},p=function(t,e,i){for(var s,r,n,a,o,h,l,_,u,p,c,f=1/i,m=t.length;--m>-1;)for(p=t[m],n=p.a,a=p.d-n,o=p.c-n,h=p.b-n,s=r=0,_=1;i>=_;_++)l=f*_,u=1-l,s=r-(r=(l*l*a+3*u*(l*o+u*h))*l),c=m*i+_-1,e[c]=(e[c]||0)+s*s},c=function(t,e){e=e>>0||6;var i,s,r,n,a=[],o=[],h=0,l=0,_=e-1,u=[],c=[];for(i in t)p(t[i],a,e);for(r=a.length,s=0;r>s;s++)h+=Math.sqrt(a[s]),n=s%e,c[n]=h,n===_&&(l+=h,n=s/e>>0,u[n]=c,o[n]=l,h=0,c=[]);return{length:l,lengths:o,segments:u}},f=window._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.1",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,h=e.values||[],l={},p=h[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(s in p)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],l[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||l[s]!==h[0][s]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?_(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):u(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=c(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),n=f.length;--n>-1;){for(a=0;3>a;a++)s=f[n][a],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=f[n][2],this._initialRotations[n]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,r,n,a,o,h,l,_,u,p=this._segCount,c=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&p-1>r){for(l=p-1;l>r&&e>=(this._l2=_[++r]););this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(l=u.length-1;l>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?p-1:p*e>>0,o=(e-i*(1/p))*p;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],a=this._beziers[n][i],h=(o*o*a.da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(h=h+(h>0?.5:-.5)>>0),
c[n]?f[n](h):f[n]=h;if(this._autoRotate){var d,g,v,y,T,w,x,b=this._autoRotate;for(r=b.length;--r>-1;)n=b[r][2],w=b[r][3]||0,x=b[r][4]===!0?1:t,a=this._beziers[b[r][0]],d=this._beziers[b[r][1]],a&&d&&(a=a[i],d=d[i],g=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,g+=(y-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=d.a+(d.b-d.a)*o,T=d.b+(d.c-d.b)*o,v+=(T-v)*o,T+=(d.c+(d.d-d.c)*o-T)*o,h=m?Math.atan2(T-v,y-g)*x+w:this._initialRotations[r],c[n]?f[n](h):f[n]=h)}}}),m=f.prototype;f.bezierThrough=_,f.cubicToQuadratic=o,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new n(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=window._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new f;var l,_,u,p=e.values,c=p.length-1,m=[],d={};if(0>c)return o;for(l=0;c>=l;l++)u=i(t,p[l],a,o,h,c!==l),m[l]=u.end;for(_ in e)d[_]=e[_];return d.values=m,o=new r(t,"bezier",0,0,u.pt,2),o.data=u,o.plugin=h,o.setRatio=s,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(l=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),d.autoRotate&&(a._transform||a._enableTransforms(!1),u.autoRotate=a._target._gsTransform),h._onInitTween(u.proxy,d,a._tween),o}})}},m._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},m._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o={},h=a.prototype=new t("css");h.constructor=a,a.version="1.11.6",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var l,_,u,p,c,f,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,d=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,g=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/[^\d\-\.]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/,w=/opacity:([^;]*)/,x=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,P=/([A-Z])/g,S=/-([a-z])/gi,k=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,R=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,O=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,M=Math.PI/180,I=180/Math.PI,E={},N=document,F=N.createElement("div"),L=N.createElement("img"),X=a._internals={_specialProps:o},z=navigator.userAgent,U=function(){var t,e=z.indexOf("Android"),i=N.createElement("div");return u=-1!==z.indexOf("Safari")&&-1===z.indexOf("Chrome")&&(-1===e||Number(z.substr(e+8,1))>3),c=u&&6>Number(z.substr(z.indexOf("Version/")+8,1)),p=-1!==z.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(z)&&(f=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],t?/^0.55/.test(t.style.opacity):!1}(),Y=function(t){return T.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},j=function(t){window.console&&console.log(t)},B="",q="",V=function(t,e){e=e||F;var i,s,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(q=3===s?"ms":i[s],B="-"+q.toLowerCase()+"-",q+t):null},W=N.defaultView?N.defaultView.getComputedStyle:function(){},G=a.getStyle=function(t,e,i,s,r){var n;return U||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||W(t,null))?(t=i.getPropertyValue(e.replace(P,"-$1").toLowerCase()),n=t||i.length?t:i[e]):t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):Y(t)},$=X.convertToPixels=function(t,e,i,s,r){if("px"===s||!s)return i;if("auto"===s||!i)return 0;var n,a=A.test(e),o=t,h=F.style,l=0>i;return l&&(i=-i),"%"===s&&-1!==e.indexOf("border")?n=i/100*(a?t.clientWidth:t.clientHeight):(h.cssText="border:0 solid red;position:"+G(t,"position")+";line-height:0;","%"!==s&&o.appendChild?h[a?"borderLeftWidth":"borderTopWidth"]=i+s:(o=t.parentNode||N.body,h[a?"width":"height"]=i+s),o.appendChild(F),n=parseFloat(F[a?"offsetWidth":"offsetHeight"]),o.removeChild(F),0!==n||r||(n=$(t,e,i,s,!0))),l?-n:n},Z=X.calculateOffset=function(t,e,i){if("absolute"!==G(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=G(t,"margin"+s,i);return t["offset"+s]-($(t,e,parseFloat(r),r.replace(y,""))||0)},Q=function(t,e){var i,s,r={};if(e=e||W(t,null))if(i=e.length)for(;--i>-1;)r[e[i].replace(S,R)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(S,R)]=e[i]);return U||(r.opacity=Y(t)),s=Pe(t,e,!1),r.rotation=s.rotation,r.skewX=s.skewX,r.scaleX=s.scaleX,r.scaleY=s.scaleY,r.x=s.x,r.y=s.y,xe&&(r.z=s.z,r.rotationX=s.rotationX,r.rotationY=s.rotationY,r.scaleZ=s.scaleZ),r.filters&&delete r.filters,r},H=function(t,e,i,s,r){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(v,"")?n:0:Z(t,a),void 0!==l[a]&&(o=new ue(l,a,l[a],o)));if(s)for(a in s)"className"!==a&&(h[a]=s[a]);return{difs:h,firstMPT:o}},K={width:["Left","Right"],height:["Top","Bottom"]},J=["marginLeft","marginRight","marginTop","marginBottom"],te=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=K[e],n=r.length;for(i=i||W(t,null);--n>-1;)s-=parseFloat(G(t,"padding"+r[n],i,!0))||0,s-=parseFloat(G(t,"border"+r[n]+"Width",i,!0))||0;return s},ee=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(v,"")),e.oy=parseFloat(r.replace(v,""))),s+" "+r+(i.length>2?" "+i[2]:"")},ie=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},se=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},re=function(t,e,i,s){var r,n,a,o,h=1e-6;return null==t?o=e:"number"==typeof t?o=t:(r=360,n=t.split("_"),a=Number(n[0].replace(v,""))*(-1===t.indexOf("rad")?1:I)-("="===t.charAt(1)?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&(a%=r,a!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(0|a/r)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(0|a/r)*r)),o=e+a),h>o&&o>-h&&(o=0),o},ne={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ae=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},oe=function(t){var e,i,s,r,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ne[t]?ne[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(m),r=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ae(r+1/3,e,i),t[1]=ae(r,e,i),t[2]=ae(r-1/3,e,i),t):(t=t.match(m)||ne.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ne.black},he="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in ne)he+="|"+h+"\\b";he=RegExp(he+")","gi");var le=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(he)||[""])[0]:"",a=t.split(n).join("").match(g)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(m,""):"";return _?r=e?function(t){var e,p,c,f;if("number"==typeof t)t+=u;else if(s&&D.test(t)){for(f=t.replace(D,"|").split("|"),c=0;f.length>c;c++)f[c]=r(f[c]);return f.join(",")}if(e=(t.match(he)||[n])[0],p=t.split(e).join("").match(g)||[],c=p.length,_>c--)for(;_>++c;)p[c]=i?p[0|(c-1)/2]:a[c];return o+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,p;if("number"==typeof t)t+=u;else if(s&&D.test(t)){for(n=t.replace(D,"|").split("|"),p=0;n.length>p;p++)n[p]=r(n[p]);return n.join(",")}if(e=t.match(g)||[],p=e.length,_>p--)for(;_>++p;)e[p]=i?e[0|(p-1)/2]:a[p];return o+e.join(l)+h}:function(t){return t}},_e=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,o,n,a)}},ue=(X._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=e>0?0|e+.5:0|e-.5:h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),pe=(X._parseToProxy=function(t,e,i,s,r,n){var a,o,h,l,_,u=s,p={},c={},f=i._transform,m=E;for(i._transform=null,E=e,s=_=i.parse(t,e,s,r),E=m,n&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(o=s.p,c[o]=s.s+s.c,p[o]=s.s,n||(l=new ue(s,"s",o,l,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)h="xn"+a,o=s.p+"_"+h,c[o]=s.data[h],p[o]=s[h],n||(l=new ue(s,h,o,l,s.rxp[h]));s=s._next}return{proxy:p,end:c,firstMPT:l,pt:_}},X.CSSPropTween=function(t,e,s,r,a,o,h,l,_,u,p){this.t=t,this.p=e,this.s=s,this.c=r,this.n=h||e,t instanceof pe||n.push(this.n),this.r=l,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===p?s+r:p,a&&(this._next=a,a._prev=this)}),ce=a.parseComplex=function(t,e,i,s,r,n,a,o,h,_){i=i||n||"",a=new pe(t,e,0,0,a,_?2:1,null,!1,o,i,s),s+="";var u,p,c,f,g,v,y,T,w,x,P,S,k=i.split(", ").join(",").split(" "),R=s.split(", ").join(",").split(" "),A=k.length,C=l!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(k=k.join(" ").replace(D,", ").split(" "),R=R.join(" ").replace(D,", ").split(" "),A=k.length),A!==R.length&&(k=(n||"").split(" "),A=k.length),a.plugin=h,a.setRatio=_,u=0;A>u;u++)if(f=k[u],g=R[u],T=parseFloat(f),T||0===T)a.appendXtra("",T,ie(g,T),g.replace(d,""),C&&-1!==g.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||ne[f]||b.test(f)))S=","===g.charAt(g.length-1)?"),":")",f=oe(f),g=oe(g),w=f.length+g.length>6,w&&!U&&0===g[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(R[u]).join("transparent")):(U||(w=!1),a.appendXtra(w?"rgba(":"rgb(",f[0],g[0]-f[0],",",!0,!0).appendXtra("",f[1],g[1]-f[1],",",!0).appendXtra("",f[2],g[2]-f[2],w?",":S,!0),w&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>g.length?1:g[3])-f,S,!1)));else if(v=f.match(m)){if(y=g.match(d),!y||y.length!==v.length)return a;for(c=0,p=0;v.length>p;p++)P=v[p],x=f.indexOf(P,c),a.appendXtra(f.substr(c,x-c),Number(P),ie(y[p],P),"",C&&"px"===f.substr(x+P.length,2),0===p),c=x+P.length;a["xs"+a.l]+=f.substr(c)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==s.indexOf("=")&&a.data){for(S=a.xs0+a.data.s,u=1;a.l>u;u++)S+=a["xs"+u]+a.data["xn"+u];a.e=S+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},fe=9;for(h=pe.prototype,h.l=h.pr=0;--fe>0;)h["xn"+fe]=0,h["xs"+fe]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new pe(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var me=function(t,e){e=e||{},this.p=e.prefix?V(t)||t:t,o[t]=o[this.p]=this,this.format=e.formatter||le(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},de=X._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r,n=t.split(","),a=e.defaultValue;for(i=i||[a],s=0;n.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||a,r=new me(n[s],e)},ge=function(t){if(!o[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";de(t,{parser:function(t,i,s,r,n,a,h){var l=(window.GreenSockGlobals||window).com.greensock.plugins[e];return l?(l._cssRegister(),o[s].parse(t,i,s,r,n,a,h)):(j("Error: "+e+" js file not loaded."),n)}})}};h=me.prototype,h.parseComplex=function(t,e,i,s,r,n){var a,o,h,l,_,u,p=this.keyword;if(this.multi&&(D.test(i)||D.test(e)?(o=e.replace(D,"|").split("|"),h=i.replace(D,"|").split("|")):p&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,p&&(_=e.indexOf(p),u=i.indexOf(p),_!==u&&(i=-1===u?h:o,i[a]+=" "+p));e=o.join(", "),i=h.join(", ")}return ce(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},h.parse=function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(G(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){de(t,{parser:function(t,s,r,n,a,o){var h=new pe(t,r,0,0,a,2,r,!1,i);return h.plugin=o,h.setRatio=e(t,s,n._tween,r),h},priority:i})};var ve="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),ye=V("transform"),Te=B+"transform",we=V("transformOrigin"),xe=null!==V("perspective"),be=X.Transform=function(){this.skewY=0},Pe=X.getTransform=function(t,e,i,s){if(t._gsTransform&&i&&!s)return t._gsTransform;var r,n,o,h,l,_,u,p,c,f,m,d,g,v=i?t._gsTransform||new be:new be,y=0>v.scaleX,T=2e-5,w=1e5,x=179.99,b=x*M,P=xe?parseFloat(G(t,we,e,!1,"0 0 0").split(" ")[2])||v.zOrigin||0:0;for(ye?r=G(t,Te,e,!0):t.currentStyle&&(r=t.currentStyle.filter.match(C),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),v.x||0,v.y||0].join(","):""),n=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],o=n.length;--o>-1;)h=Number(n[o]),n[o]=(l=h-(h|=0))?(0|l*w+(0>l?-.5:.5))/w+h:h;if(16===n.length){var S=n[8],k=n[9],R=n[10],A=n[12],O=n[13],D=n[14];if(v.zOrigin&&(D=-v.zOrigin,A=S*D-n[12],O=k*D-n[13],D=R*D+v.zOrigin-n[14]),!i||s||null==v.rotationX){var E,N,F,L,X,z,U,Y=n[0],j=n[1],B=n[2],q=n[3],V=n[4],W=n[5],$=n[6],Z=n[7],Q=n[11],H=Math.atan2($,R),K=-b>H||H>b;v.rotationX=H*I,H&&(L=Math.cos(-H),X=Math.sin(-H),E=V*L+S*X,N=W*L+k*X,F=$*L+R*X,S=V*-X+S*L,k=W*-X+k*L,R=$*-X+R*L,Q=Z*-X+Q*L,V=E,W=N,$=F),H=Math.atan2(S,Y),v.rotationY=H*I,H&&(z=-b>H||H>b,L=Math.cos(-H),X=Math.sin(-H),E=Y*L-S*X,N=j*L-k*X,F=B*L-R*X,k=j*X+k*L,R=B*X+R*L,Q=q*X+Q*L,Y=E,j=N,B=F),H=Math.atan2(j,W),v.rotation=H*I,H&&(U=-b>H||H>b,L=Math.cos(-H),X=Math.sin(-H),Y=Y*L+V*X,N=j*L+W*X,W=j*-X+W*L,$=B*-X+$*L,j=N),U&&K?v.rotation=v.rotationX=0:U&&z?v.rotation=v.rotationY=0:z&&K&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(Y*Y+j*j)*w+.5)/w,v.scaleY=(0|Math.sqrt(W*W+k*k)*w+.5)/w,v.scaleZ=(0|Math.sqrt($*$+R*R)*w+.5)/w,v.skewX=0,v.perspective=Q?1/(0>Q?-Q:Q):0,v.x=A,v.y=O,v.z=D}}else if(!(xe&&!s&&n.length&&v.x===n[4]&&v.y===n[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===G(t,"display",e))){var J=n.length>=6,te=J?n[0]:1,ee=n[1]||0,ie=n[2]||0,se=J?n[3]:1;v.x=n[4]||0,v.y=n[5]||0,_=Math.sqrt(te*te+ee*ee),u=Math.sqrt(se*se+ie*ie),p=te||ee?Math.atan2(ee,te)*I:v.rotation||0,c=ie||se?Math.atan2(ie,se)*I+p:v.skewX||0,f=_-Math.abs(v.scaleX||0),m=u-Math.abs(v.scaleY||0),Math.abs(c)>90&&270>Math.abs(c)&&(y?(_*=-1,c+=0>=p?180:-180,p+=0>=p?180:-180):(u*=-1,c+=0>=c?180:-180)),d=(p-v.rotation)%180,g=(c-v.skewX)%180,(void 0===v.skewX||f>T||-T>f||m>T||-T>m||d>-x&&x>d&&false|d*w||g>-x&&x>g&&false|g*w)&&(v.scaleX=_,v.scaleY=u,v.rotation=p,v.skewX=c),xe&&(v.rotationX=v.rotationY=v.z=0,v.perspective=parseFloat(a.defaultTransformPerspective)||0,v.scaleZ=1)}v.zOrigin=P;for(o in v)T>v[o]&&v[o]>-T&&(v[o]=0);return i&&(t._gsTransform=v),v},Se=function(t){var e,i,s=this.data,r=-s.rotation*M,n=r+s.skewX*M,a=1e5,o=(0|Math.cos(r)*s.scaleX*a)/a,h=(0|Math.sin(r)*s.scaleX*a)/a,l=(0|Math.sin(n)*-s.scaleY*a)/a,_=(0|Math.cos(n)*s.scaleY*a)/a,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var c,m,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==p.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+_,x=s.x,b=s.y;if(null!=s.ox&&(c=(s.oxp?.01*d*s.ox:s.ox)-d/2,m=(s.oyp?.01*g*s.oy:s.oy)-g/2,x+=c-(c*o+m*h),b+=m-(c*l+m*_)),v?(c=d/2,m=g/2,w+=", Dx="+(c-(c*o+m*h)+x)+", Dy="+(m-(c*l+m*_)+b)+")"):w+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(O,w):w+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===_&&(v&&-1===w.indexOf("Dx=0, Dy=0")||T.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var P,S,k,R=8>f?1:-1;for(c=s.ieOffsetX||0,m=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>h?-h:h)*g))/2+x),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>l?-l:l)*d))/2+b),fe=0;4>fe;fe++)S=J[fe],P=p[S],i=-1!==P.indexOf("px")?parseFloat(P):$(this.t,S,parseFloat(P),P.replace(y,""))||0,k=i!==s[S]?2>fe?-s.ieOffsetX:-s.ieOffsetY:2>fe?c-s.ieOffsetX:m-s.ieOffsetY,u[S]=(s[S]=Math.round(i-k*(0===fe||2===fe?1:R)))+"px"}}},ke=X.set3DTransformRatio=function(){var t,e,i,s,r,n,a,o,h,l,_,u,c,f,m,d,g,v,y,T,w,x,b,P=this.data,S=this.t.style,k=P.rotation*M,R=P.scaleX,A=P.scaleY,C=P.scaleZ,O=P.perspective;if(p){var D=1e-4;D>R&&R>-D&&(R=C=2e-5),D>A&&A>-D&&(A=C=2e-5),!O||P.z||P.rotationX||P.rotationY||(O=0)}if(k||P.skewX)v=Math.cos(k),y=Math.sin(k),t=v,r=y,P.skewX&&(k-=P.skewX*M,v=Math.cos(k),y=Math.sin(k),"simple"===P.skewType&&(T=Math.tan(P.skewX*M),T=Math.sqrt(1+T*T),v*=T,y*=T)),e=-y,n=v;else{if(!(P.rotationY||P.rotationX||1!==C||O))return S[ye]="translate3d("+P.x+"px,"+P.y+"px,"+P.z+"px)"+(1!==R||1!==A?" scale("+R+","+A+")":""),void 0;t=n=1,e=r=0}_=1,i=s=a=o=h=l=u=c=f=0,m=O?-1/O:0,d=P.zOrigin,g=1e5,k=P.rotationY*M,k&&(v=Math.cos(k),y=Math.sin(k),h=_*-y,c=m*-y,i=t*y,a=r*y,_*=v,m*=v,t*=v,r*=v),k=P.rotationX*M,k&&(v=Math.cos(k),y=Math.sin(k),T=e*v+i*y,w=n*v+a*y,x=l*v+_*y,b=f*v+m*y,i=e*-y+i*v,a=n*-y+a*v,_=l*-y+_*v,m=f*-y+m*v,e=T,n=w,l=x,f=b),1!==C&&(i*=C,a*=C,_*=C,m*=C),1!==A&&(e*=A,n*=A,l*=A,f*=A),1!==R&&(t*=R,r*=R,h*=R,c*=R),d&&(u-=d,s=i*u,o=a*u,u=_*u+d),s=(T=(s+=P.x)-(s|=0))?(0|T*g+(0>T?-.5:.5))/g+s:s,o=(T=(o+=P.y)-(o|=0))?(0|T*g+(0>T?-.5:.5))/g+o:o,u=(T=(u+=P.z)-(u|=0))?(0|T*g+(0>T?-.5:.5))/g+u:u,S[ye]="matrix3d("+[(0|t*g)/g,(0|r*g)/g,(0|h*g)/g,(0|c*g)/g,(0|e*g)/g,(0|n*g)/g,(0|l*g)/g,(0|f*g)/g,(0|i*g)/g,(0|a*g)/g,(0|_*g)/g,(0|m*g)/g,s,o,u,O?1+-u/O:1].join(",")+")"},Re=X.set2DTransformRatio=function(t){var e,i,s,r,n,a=this.data,o=this.t,h=o.style;return a.rotationX||a.rotationY||a.z||a.force3D?(this.setRatio=ke,ke.call(this,t),void 0):(a.rotation||a.skewX?(e=a.rotation*M,i=e-a.skewX*M,s=1e5,r=a.scaleX*s,n=a.scaleY*s,h[ye]="matrix("+(0|Math.cos(e)*r)/s+","+(0|Math.sin(e)*r)/s+","+(0|Math.sin(i)*-n)/s+","+(0|Math.cos(i)*n)/s+","+a.x+","+a.y+")"):h[ye]="matrix("+a.scaleX+",0,0,"+a.scaleY+","+a.x+","+a.y+")",void 0)};de("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType",{parser:function(t,e,i,s,n,o,h){if(s._transform)return n;var l,_,u,p,c,f,m,d=s._transform=Pe(t,r,!0,h.parseTransform),g=t.style,v=1e-6,y=ve.length,T=h,w={};if("string"==typeof T.transform&&ye)u=g.cssText,g[ye]=T.transform,g.display="block",l=Pe(t,null,!1),g.cssText=u;else if("object"==typeof T){if(l={scaleX:se(null!=T.scaleX?T.scaleX:T.scale,d.scaleX),scaleY:se(null!=T.scaleY?T.scaleY:T.scale,d.scaleY),scaleZ:se(T.scaleZ,d.scaleZ),x:se(T.x,d.x),y:se(T.y,d.y),z:se(T.z,d.z),perspective:se(T.transformPerspective,d.perspective)},m=T.directionalRotation,null!=m)if("object"==typeof m)for(u in m)T[u]=m[u];else T.rotation=m;l.rotation=re("rotation"in T?T.rotation:"shortRotation"in T?T.shortRotation+"_short":"rotationZ"in T?T.rotationZ:d.rotation,d.rotation,"rotation",w),xe&&(l.rotationX=re("rotationX"in T?T.rotationX:"shortRotationX"in T?T.shortRotationX+"_short":d.rotationX||0,d.rotationX,"rotationX",w),l.rotationY=re("rotationY"in T?T.rotationY:"shortRotationY"in T?T.shortRotationY+"_short":d.rotationY||0,d.rotationY,"rotationY",w)),l.skewX=null==T.skewX?d.skewX:re(T.skewX,d.skewX),l.skewY=null==T.skewY?d.skewY:re(T.skewY,d.skewY),(_=l.skewY-d.skewY)&&(l.skewX+=_,l.rotation+=_)}for(xe&&null!=T.force3D&&(d.force3D=T.force3D,f=!0),d.skewType=T.skewType||d.skewType||a.defaultSkewType,c=d.force3D||d.z||d.rotationX||d.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,c||null==T.scale||(l.scaleZ=1);--y>-1;)i=ve[y],p=l[i]-d[i],(p>v||-v>p||null!=E[i])&&(f=!0,n=new pe(d,i,d[i],p,n),i in w&&(n.e=w[i]),n.xs0=0,n.plugin=o,s._overwriteProps.push(n.n));return p=T.transformOrigin,(p||xe&&c&&d.zOrigin)&&(ye?(f=!0,i=we,p=(p||G(t,i,r,!1,"50% 50%"))+"",n=new pe(g,i,0,0,n,-1,"transformOrigin"),n.b=g[i],n.plugin=o,xe?(u=d.zOrigin,p=p.split(" "),d.zOrigin=(p.length>2&&(0===u||"0px"!==p[2])?parseFloat(p[2]):u)||0,n.xs0=n.e=g[i]=p[0]+" "+(p[1]||"50%")+" 0px",n=new pe(d,"zOrigin",0,0,n,-1,n.n),n.b=u,n.xs0=n.e=d.zOrigin):n.xs0=n.e=g[i]=p):ee(p+"",d)),f&&(s._transformType=c||3===this._transformType?3:2),n},prefix:!0}),de("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),de("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,_,u,p,c,f,m,d,g,v,y,T,w,x,b=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],P=t.style;for(m=parseFloat(t.offsetWidth),d=parseFloat(t.offsetHeight),o=e.split(" "),h=0;b.length>h;h++)this.p.indexOf("border")&&(b[h]=V(b[h])),u=_=G(t,b[h],r,!1,"0px"),-1!==u.indexOf(" ")&&(_=u.split(" "),u=_[0],_=_[1]),p=l=o[h],c=parseFloat(u),v=u.substr((c+"").length),y="="===p.charAt(1),y?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),g=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),g=p.substr((f+"").length)),""===g&&(g=s[i]||v),g!==v&&(T=$(t,"borderLeft",c,v),w=$(t,"borderTop",c,v),"%"===g?(u=100*(T/m)+"%",_=100*(w/d)+"%"):"em"===g?(x=$(t,"borderLeft",1,"em"),u=T/x+"em",_=w/x+"em"):(u=T+"px",_=w+"px"),y&&(p=parseFloat(u)+f+g,l=parseFloat(_)+f+g)),a=ce(P,b[h],u+" "+_,p+" "+l,!1,"0px",a);return a},prefix:!0,formatter:le("0px 0px 0px 0px",!1,!0)}),de("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,h,l,_,u,p,c="background-position",m=r||W(t,null),d=this.format((m?f?m.getPropertyValue(c+"-x")+" "+m.getPropertyValue(c+"-y"):m.getPropertyValue(c):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&(p=G(t,"backgroundImage").replace(k,""),p&&"none"!==p)){for(o=d.split(" "),h=g.split(" "),L.setAttribute("src",p),l=2;--l>-1;)d=o[l],_=-1!==d.indexOf("%"),_!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-L.width:t.offsetHeight-L.height,o[l]=_?parseFloat(d)/100*u+"px":100*(parseFloat(d)/u)+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:ee}),de("backgroundSize",{defaultValue:"0 0",formatter:ee}),de("perspective",{defaultValue:"0px",prefix:!0}),de("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),de("transformStyle",{prefix:!0}),de("backfaceVisibility",{prefix:!0}),de("userSelect",{prefix:!0}),de("margin",{parser:_e("marginTop,marginRight,marginBottom,marginLeft")}),de("padding",{parser:_e("paddingTop,paddingRight,paddingBottom,paddingLeft")}),de("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,h,l;return 9>f?(h=t.currentStyle,l=8>f?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(G(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),de("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),de("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),de("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(G(t,"borderTopWidth",r,!1,"0px")+" "+G(t,"borderTopStyle",r,!1,"solid")+" "+G(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(he)||["#000"])[0]}}),de("borderWidth",{parser:_e("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),de("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new pe(n,a,0,0,r,-1,i,!1,0,n[a],e)}});var Ae=function(t){var e,i=this.t,s=i.filter||G(this.data,"filter"),r=0|this.s+this.c*t;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!G(this.data,"filter")):(i.filter=s.replace(x,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("opacity")?0===r&&this.xn1||(i.filter=s+" alpha(opacity="+r+")"):i.filter=s.replace(T,"opacity="+r))};de("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat(G(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===G(t,"visibility",r)&&0!==e&&(o=0),U?n=new pe(h,"opacity",o,e-o,n):(n=new pe(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Ae),l&&(n=new pe(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",s._overwriteProps.push(n.n),s._overwriteProps.push(i)),n}});var Ce=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(P,"-$1").toLowerCase()):t.removeAttribute(e))},Oe=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ce(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};de("className",{parser:function(t,e,s,n,a,o,h){var l,_,u,p,c,f=t.className,m=t.style.cssText;if(a=n._classNamePT=new pe(t,s,0,0,a,2),a.setRatio=Oe,a.pr=-11,i=!0,a.b=f,_=Q(t,r),u=t._gsClassPT){for(p={},c=u.data;c;)p[c.p]=1,c=c._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.className=a.e,l=H(t,_,Q(t),h,p),t.className=f,a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)),a}});var De=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,r,n=this.t.style,a=o.transform.parse;if("all"===this.e)n.cssText="",r=!0;else for(e=this.e.split(","),s=e.length;--s>-1;)i=e[s],o[i]&&(o[i].parse===a?r=!0:i="transformOrigin"===i?we:o[i].p),Ce(n,i);r&&(Ce(n,ye),this.t._gsTransform&&delete this.t._gsTransform)}};for(de("clearProps",{parser:function(t,e,s,r,n){return n=new pe(t,s,0,0,n,2),n.setRatio=De,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),h="bezier,throwProps,physicsProps,physics2D".split(","),fe=h.length;fe--;)ge(h[fe]);h=a.prototype,h._firstPT=null,h._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,l=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=W(t,""),n=this._overwriteProps;var h,p,f,m,d,g,v,y,T,x=t.style;if(_&&""===x.zIndex&&(h=G(t,"zIndex",r),("auto"===h||""===h)&&(x.zIndex=0)),"string"==typeof e&&(m=x.cssText,h=Q(t,r),x.cssText=m+";"+e,h=H(t,h,Q(t)).difs,!U&&w.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,x.cssText=m),this._firstPT=p=this.parse(t,e,null),this._transformType){for(T=3===this._transformType,ye?u&&(_=!0,""===x.zIndex&&(v=G(t,"zIndex",r),("auto"===v||""===v)&&(x.zIndex=0)),c&&(x.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):x.zoom=1,f=p;f&&f._next;)f=f._next;y=new pe(t,"transform",0,0,null,2),this._linkCSSP(y,null,f),y.setRatio=T&&xe?ke:ye?Re:Se,y.data=this._transform||Pe(t,r,!0),n.pop()}if(i){for(;p;){for(g=p._next,f=m;f&&f.pr>p.pr;)f=f._next;(p._prev=f?f._prev:d)?p._prev._next=p:m=p,(p._next=f)?f._prev=p:d=p,p=g}this._firstPT=m}return!0},h.parse=function(t,e,i,n){var a,h,_,u,p,c,f,m,d,g,v=t.style;for(a in e)c=e[a],h=o[a],h?i=h.parse(t,c,a,this,i,n,e):(p=G(t,a,r)+"",d="string"==typeof c,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&b.test(c)?(d||(c=oe(c),c=(c.length>3?"rgba(":"rgb(")+c.join(",")+")"),i=ce(v,a,p,c,!0,"transparent",i,0,n)):!d||-1===c.indexOf(" ")&&-1===c.indexOf(",")?(_=parseFloat(p),f=_||0===_?p.substr((_+"").length):"",(""===p||"auto"===p)&&("width"===a||"height"===a?(_=te(t,a,r),f="px"):"left"===a||"top"===a?(_=Z(t,a,r),f="px"):(_="opacity"!==a?0:1,f="")),g=d&&"="===c.charAt(1),g?(u=parseInt(c.charAt(0)+"1",10),c=c.substr(2),u*=parseFloat(c),m=c.replace(y,"")):(u=parseFloat(c),m=d?c.substr((u+"").length)||"":""),""===m&&(m=a in s?s[a]:f),c=u||0===u?(g?u+_:u)+m:e[a],f!==m&&""!==m&&(u||0===u)&&(_||0===_)&&(_=$(t,a,_,f),"%"===m?(_/=$(t,a,100,"%")/100,e.strictUnits!==!0&&(p=_+"%")):"em"===m?_/=$(t,a,1,"em"):(u=$(t,a,u,m),m="px"),g&&(u||0===u)&&(c=u+_+m)),g&&(u+=_),!_&&0!==_||!u&&0!==u?void 0!==v[a]&&(c||"NaN"!=c+""&&null!=c)?(i=new pe(v,a,u||_||0,0,i,-1,a,!1,0,p,c),i.xs0="none"!==c||"display"!==a&&-1===a.indexOf("Style")?c:p):j("invalid "+a+" tween value: "+e[a]):(i=new pe(v,a,_,u-_,i,0,a,l!==!1&&("px"===m||"zIndex"===a),0,p,c),i.xs0=m)):i=ce(v,a,p,c,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},h.setRatio=function(t){var e,i,s,r=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=e>0?0|e+.5:0|e-.5:n>e&&e>-n&&(e=0),r.type)if(1===r.type)if(s=r.l,2===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||Pe(this._target,r,!0)},h._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,
s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){n={};for(s in e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Me=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)Me(t[r],e,i);else for(s=t.childNodes,r=s.length;--r>-1;)n=s[r],a=n.type,n.style&&(e.push(Q(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Me(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o=e.to(t,i,s),h=[o],l=[],_=[],u=[],p=e._internals.reservedProps;for(t=o._targets||o.target,Me(t,l,u),o.render(i,!0),Me(t,_),o.render(0,!0),o._enabled(!0),r=u.length;--r>-1;)if(n=H(u[r],l[r],_[r]),n.firstMPT){n=n.difs;for(a in s)p[a]&&(n[a]=s[a]);h.push(e.to(u[r],i,n))}return h},t.activate([a]),a},!0),function(){var t=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,s=this._tween,r=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),n=r.length,a={},o=s._propLookup.roundProps;--n>-1;)a[r[n]]=1;for(n=r.length;--n>-1;)for(t=r[n],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),window._gsDefine.plugin({propName:"attr",API:2,version:"0.2.0",init:function(t,e){var i;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={};for(i in e)this._addTween(this._proxy,i,parseFloat(t.getAttribute(i)),e[i],i)&&this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length;--s>-1;)e=i[s],this._target.setAttribute(e,this._proxy[e]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,version:"0.2.0",init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,r,n,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),s=o[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?r+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,a=n-r,o.length&&(s=o.join("_"),-1!==s.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==s.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==s.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,r,r+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=window.GreenSockGlobals||window,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var s=h("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s){var r=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(r,t),r},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},c=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},f=u("Back",c("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),c("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),c("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),d=e.prototype=new t,d.constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,r,n,a,o,h=e.taper||"none",l=[],_=0,u=0|(e.points||20),c=u,f=e.randomize!==!1,m=e.clamp===!0,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--c>-1;)i=f?Math.random():1/u*c,s=d?d.getRatio(i):i,"none"===h?r=g:"out"===h?(n=1-i,r=n*n*g):"in"===h?r=i*i*g:.5>i?(n=2*i,r=.5*n*n*g):(n=2*(1-i),r=.5*n*n*g),f?s+=Math.random()*r-.5*r:c%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),l[_++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),o=new p(1,1,null),c=u;--c>-1;)a=l[c],o=new p(a.x,a.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0),d=i.prototype=new t,d.constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var r=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||s,this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*a/this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),f},!0)}),function(t){"use strict";var e=t.GreenSockGlobals||t;if(!e.TweenLite){var i,s,r,n,a,o=function(t){var i,s=t.split("."),r=e;for(i=0;s.length>i;i++)r[s[i]]=r=r[s[i]]||{};return r},h=o("com.greensock"),l=1e-10,_=[].slice,u=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),c={},f=function(i,s,r,n){this.sc=c[i]?c[i].sc:[],c[i]=this,this.gsClass=null,this.func=r;var a=[];this.check=function(h){for(var l,_,u,p,m=s.length,d=m;--m>-1;)(l=c[s[m]]||new f(s[m],[])).gsClass?(a[m]=l.gsClass,d--):h&&l.sc.push(this);if(0===d&&r)for(_=("com.greensock."+i).split("."),u=_.pop(),p=o(_.join("."))[u]=this.gsClass=r.apply(r,a),n&&(e[u]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+i.split(".").join("/"),[],function(){return p}):"undefined"!=typeof module&&module.exports&&(module.exports=p)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=t._gsDefine=function(t,e,i,s){return new f(t,e,i,s)},d=h._class=function(t,e,i){return e=e||function(){},m(t,[],function(){return e},i),e};m.globals=e;var g=[0,0,1,1],v=[],y=d("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?g.concat(e):g},!0),T=y.map={},w=y.register=function(t,e,i,s){for(var r,n,a,o,l=e.split(","),_=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=l[_],r=s?d("easing."+n,null,!0):h.easing[n]||{},a=u.length;--a>-1;)o=u[a],T[n+"."+o]=T[o+n]=r[o]=t.getRatio?t:t[o]||new t};for(r=y.prototype,r._calcEnd=!1,r.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},i=["Linear","Quad","Cubic","Quart","Quint,Strong"],s=i.length;--s>-1;)r=i[s]+",Power"+s,w(new y(null,null,1,s),r,"easeOut",!0),w(new y(null,null,2,s),r,"easeIn"+(0===s?",easeNone":"")),w(new y(null,null,3,s),r,"easeInOut");T.linear=h.easing.Linear.easeIn,T.swing=h.easing.Quad.easeInOut;var x=d("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});r=x.prototype,r.addEventListener=function(t,e,i,s,r){r=r||0;var o,h,l=this._listeners[t],_=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)o=l[h],o.c===e&&o.s===i?l.splice(h,1):0===_&&r>o.pr&&(_=h+1);l.splice(_,0,{c:e,s:i,up:s,pr:r}),this!==n||a||n.wake()},r.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return s.splice(i,1),void 0},r.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)s=r[e],s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i)};var b=t.requestAnimationFrame,P=t.cancelAnimationFrame,S=Date.now||function(){return(new Date).getTime()},k=S();for(i=["ms","moz","webkit","o"],s=i.length;--s>-1&&!b;)b=t[i[s]+"RequestAnimationFrame"],P=t[i[s]+"CancelAnimationFrame"]||t[i[s]+"CancelRequestAnimationFrame"];d("Ticker",function(t,e){var i,s,r,o,h,l=this,_=S(),p=e!==!1&&b,c=function(t){k=S(),l.time=(k-_)/1e3;var e,n=l.time-h;(!i||n>0||t===!0)&&(l.frame++,h+=n+(n>=o?.004:o-n),e=!0),t!==!0&&(r=s(c)),e&&l.dispatchEvent("tick")};x.call(l),l.time=l.frame=0,l.tick=function(){c(!0)},l.sleep=function(){null!=r&&(p&&P?P(r):clearTimeout(r),s=u,r=null,l===n&&(a=!1))},l.wake=function(){null!==r&&l.sleep(),s=0===i?u:p&&b?b:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===n&&(a=!0),c(2)},l.fps=function(t){return arguments.length?(i=t,o=1/(i||60),h=this.time+o,l.wake(),void 0):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,l.fps(i),void 0):p},l.fps(t),setTimeout(function(){p&&(!r||5>l.frame)&&l.useRAF(!1)},1500)}),r=h.Ticker.prototype=new h.events.EventDispatcher,r.constructor=h.Ticker;var R=d("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,U){a||n.wake();var i=this.vars.useFrames?z:U;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});n=R.ticker=new h.Ticker,r=R.prototype,r._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var A=function(){a&&S()-k>2e3&&n.wake(),setTimeout(A,2e3)};A(),r.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},r.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},r.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},r.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},r.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},r.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},r.render=function(){},r.invalidate=function(){return this},r.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},r._enabled=function(t,e){return a||n.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(){return this._enabled(!1,!1)},r.kill=function(t,e){return this._kill(t,e),this},r._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},r._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},r.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},r.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},r.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},r.totalTime=function(t,e,i){if(a||n.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,r=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?s-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&this.render(t,e,!1)}return this},r.progress=r.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},r.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},r.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||l,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},r.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){a||t||n.wake();var e=this._timeline,i=e.rawTime(),s=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=s,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==s&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var C=d("core.SimpleTimeline",function(t){R.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});r=C.prototype=new R,r.constructor=C,r.kill()._gc=!1,r._first=r._last=null,r._sortChildren=!1,r.add=r.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._timeline&&this._uncache(!0),this},r._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t.timeline=null,t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),this._timeline&&this._uncache(!0)),this},r.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},r.rawTime=function(){return a||n.wake(),this._totalTime};var O=d("TweenLite",function(e,i,s){if(R.call(this,i,s),this.render=O.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:O.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?X[O.defaultOverwrite]:"number"==typeof h?h>>0:X[h],(o||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=a=_.call(e,0),this._propLookup=[],this._siblings=[],r=0;a.length>r;r++)n=a[r],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(_.call(n,0))):(this._siblings[r]=Y(n,this,!1),1===h&&this._siblings[r].length>1&&j(n,this,null,1,this._siblings[r])):(n=a[r--]=O.selector(n),"string"==typeof n&&a.splice(r+1,1)):a.splice(r--,1);else this._propLookup={},this._siblings=Y(e,this,!1),1===h&&this._siblings.length>1&&j(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),D=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},M=function(t,e){var i,s={};for(i in t)L[i]||i in e&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!E[i]||E[i]&&E[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};r=O.prototype=new R,r.constructor=O,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=!1,O.version="1.11.6",O.defaultEase=r._ease=new y(null,null,1,1),O.defaultOverwrite="auto",O.ticker=n,O.autoSleep=!0,O.selector=t.$||t.jQuery||function(e){return t.$?(O.selector=t.$,t.$(e)):t.document?t.document.getElementById("#"===e.charAt(0)?e.substr(1):e):e};var I=O._internals={isArray:p,isSelector:D},E=O._plugins={},N=O._tweenLookup={},F=0,L=I.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},z=R._rootFramesTimeline=new C,U=R._rootTimeline=new C;U._startTime=n.time,z._startTime=n.frame,U._active=z._active=!0,R._updateRoot=function(){if(U.render((n.time-U._startTime)*U._timeScale,!1,!1),z.render((n.frame-z._startTime)*z._timeScale,!1,!1),!(n.frame%120)){var t,e,i;for(i in N){for(e=N[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete N[i]}if(i=U._first,(!i||i._paused)&&O.autoSleep&&!z._first&&1===n._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||n.sleep()}}},n.addEventListener("tick",R._updateRoot);var Y=function(t,e,i){var s,r,n=t._gsTweenID;if(N[n||(t._gsTweenID=n="t"+F++)]||(N[n]={target:t,tweens:[]}),e&&(s=N[n].tweens,s[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return N[n].tweens},j=function(t,e,i,s,r){var n,a,o,h;if(1===s||s>=4){for(h=r.length,n=0;h>n;n++)if((o=r[n])!==e)o._gc||o._enabled(!1,!1)&&(a=!0);else if(5===s)break;return a}var _,u=e._startTime+l,p=[],c=0,f=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(_=_||B(e,0,f),0===B(o,_,f)&&(p[c++]=o)):u>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>u&&((f||!o._initted)&&2e-10>=u-o._startTime||(p[c++]=o)));for(n=c;--n>-1;)o=p[n],2===s&&o._kill(i,t)&&(a=!0),(2!==s||!o._firstPT&&o._initted)&&o._enabled(!1,!1)&&(a=!0);return a},B=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return n/=r,n>e?n-e:i&&n===e||!t._initted&&2*l>n-e?l:(n+=t.totalDuration()/t._timeScale/r)>e+l?0:n-e-l};r._init=function(){var t,e,i,s,r=this.vars,n=this._overwrittenProps,a=this._duration,o=r.immediateRender,h=r.ease;if(r.startAt){if(this._startAt&&this._startAt.render(-1,!0),r.startAt.overwrite=0,r.startAt.immediateRender=!0,this._startAt=O.to(this.target,0,r.startAt),o)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(r.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else{i={};for(s in r)L[s]&&"autoCSS"!==s||(i[s]=r[s]);if(i.overwrite=0,i.data="isFromStart",this._startAt=O.to(this.target,0,i),r.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(this._ease=h?h instanceof y?r.easeParams instanceof Array?h.config.apply(h,r.easeParams):h:"function"==typeof h?new y(h,r.easeParams):T[h]||O.defaultEase:O.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],n?n[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,n);if(e&&O._onPluginEvent("_onInitAllProps",this),n&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=r.onUpdate,this._initted=!0},r._initProps=function(e,i,s,r){var n,a,o,h,l,_;if(null==e)return!1;this.vars.css||e.style&&e!==t&&e.nodeType&&E.css&&this.vars.autoCSS!==!1&&M(this.vars,e);for(n in this.vars){if(_=this.vars[n],L[n])_&&(_ instanceof Array||_.push&&p(_))&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(E[n]&&(h=new E[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof _&&"="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*Number(_.substr(2)):Number(_)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&j(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):o},r.render=function(t,e,i){var s,r,n,a,o=this._time,h=this._duration;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete"),0===h&&(a=this._rawPrevTime,this._startTime===this._timeline._duration&&(t=0),(0===t||0>a||a===l)&&a!==t&&(i=!0,a>l&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||this._rawPrevTime===t?t:l);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&this._rawPrevTime>0&&this._rawPrevTime!==l)&&(r="onReverseComplete",s=this._reversed),0>t?(this._active=!1,0===h&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=a=!e||t||this._rawPrevTime===t?t:l)):this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var _=t/h,u=this._easeType,p=this._easePower;(1===u||3===u&&_>=.5)&&(_=1-_),3===u&&(_*=2),1===p?_*=_:2===p?_*=_*_:3===p?_*=_*_*_:4===p&&(_*=_*_*_*_),this.ratio=1===u?1-_:2===u?_:.5>t/h?_/2:1-_/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._time!==o||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),r&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||v),0===h&&this._rawPrevTime===l&&a!==l&&(this._rawPrevTime=0)))}},r._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:O.selector(e)||e;var i,s,r,n,a,o,h,l;if((p(e)||D(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(o=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],s=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,s=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){h=t||a,l=t!==s&&"all"!==s&&t!==a&&("object"!=typeof t||!t._tempKill);for(r in h)(n=a[r])&&(n.pg&&n.t._kill(h)&&(o=!0),n.pg&&0!==n.t._overwriteProps.length||(n._prev?n._prev._next=n._next:n===this._firstPT&&(this._firstPT=n._next),n._next&&(n._next._prev=n._prev),n._next=n._prev=null),delete a[r]),l&&(s[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return o},r.invalidate=function(){return this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},r._enabled=function(t,e){if(a||n.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=Y(s[i],this,!0);else this._siblings=Y(this.target,this,!0)}return R.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?O._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},O.to=function(t,e,i){return new O(t,e,i)},O.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new O(t,e,i)},O.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new O(t,e,s)},O.delayedCall=function(t,e,i,s,r){return new O(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:r,overwrite:0})},O.set=function(t,e){return new O(t,0,e)},O.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:O.selector(t)||t;var i,s,r,n;if((p(t)||D(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(O.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(n=s[i],r=i;--r>-1;)n===s[r]&&s.splice(i,1)}else for(s=Y(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},O.killTweensOf=O.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=O.getTweensOf(t,e),r=s.length;--r>-1;)s[r]._kill(i,t)};var q=d("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=q.prototype},!0);if(r=q.prototype,q.version="1.10.1",q.API=2,r._firstPT=null,r._addTween=function(t,e,i,s,r,n){var a,o;return null!=s&&(a="number"==typeof s||"="!==s.charAt(1)?Number(s)-i:parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:r||e,r:n},o._next&&(o._next._prev=o),o):void 0},r.setRatio=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.c*t+i.s,i.r?e=0|e+(e>0?.5:-.5):s>e&&e>-s&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},r._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},r._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},O._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},q.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===q.API&&(E[(new t[e])._propName]=t[e]);return!0},m.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=d("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){q.call(this,i,s),this._overwriteProps=r||[]},t.global===!0),o=a.prototype=new q(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,q.activate([a]),a},i=t._gsQueue){for(s=0;i.length>s;s++)i[s]();for(r in c)c[r].func||t.console.log("GSAP encountered missing dependency: com.greensock."+r)}a=!1}}(window);"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ngFx"),function(t,a,n){"use strict;";function e(t,a){t.css("position","absolute"),a&&"leave"===a?t.css("z-index","9999px"):t.css("z-index","1000px")}function i(t,a){var n={position:"relative",width:"100%",height:"100%","-webkit-perspective":"500px","-moz-perspective":"500px","-o-perspective":"500px",perspective:"500px"},e={overflow:"hidden","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0),"," -webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d",
"transform-style":"preserve-3d"};t.css(n),a.css(e)}t.module("fx.transitions",["fx.transitions.slides","fx.transitions.scales","fx.transitions.rotations","fx.transitions.specials","fx.transitions.view"]),t.module("ngFx",["fx.animations","fx.transitions"]),t.module("fx.animations",["fx.animations.fades","fx.animations.bounces","fx.animations.zooms","fx.animations.rotations","fx.animations.tada","fx.animations.pulse"]),t.module("fx.animations.assist",[]).factory("Assist",["$filter","$window","$timeout","$rootScope",function(a,n,e,i){return{emit:function(t,a,n){i.$broadcast(a+":"+n)},parseClassList:function(e,i){var r,o=e[0].classList,s={trigger:!1,duration:.3,ease:n.Back};return t.forEach(o,function(t){"fx-easing"===t.slice(0,9)&&(r=t.slice(10),s.ease=n[a("cap")(r)]||n.Elastic),"fx-trigger"===t&&(s.trigger=!0),"fx-speed"===t.slice(0,8)&&(s.duration=parseInt(t.slice(9))/1e3)}),i?{ease:s.ease,speed:s.duration}:s},addTimer:function(t,a,n){var i=this,r=t.stagger?3*t.duration*1e3:1e3*t.duration,o=e(function(){t.trigger&&i.emit(a,t.animation,t.motion),n()},r);a.data(t.timeoutKey,o)},removeTimer:function(t,a,n){e.cancel(n),t.removeData(a)},timeoutKey:"$$fxTimer"}}]).filter("cap",[function(){return function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}]);var r="$$fxtimer";t.module("fx.transitions.assist",[]).factory("TransAssist",["$timeout",function(t){function a(a,n,e){var i=t(function(){e()},1e3*n+50);a.data(r,i)}function n(a){var n=a.data(r);n&&(a.css("z-index","-1"),t.cancel(n),a.removeData(r))}return{addTimer:a,removeTimer:n}}]),t.module("fx.transitions.create",["fx.transitions.assist","fx.animations.assist"]).factory("SlideTransition",["TransAssist","Assist",function(t,a){var i;return function(r){r.from?this.enter=function(o,s){var m;return e(o),m=a.parseClassList(o,!0),r.from.ease=m.ease.easeInOut,r.duration=m.speed,t.addTimer(o,r.duration,s),i=new n,i.from(o,r.duration,r.from),function(a){a&&t.removeTimer(o)}}:!r.from&&r.to&&(this.leave=function(o,s){var m;return e(o),m=a.parseClassList(o,!0),r.to.ease=m.ease.easeInOut,r.duration=m.speed,t.addTimer(o,r.duration,s),i=new n,i.to(o,r.duration,r.to),function(a){a&&t.removeTimer(o)}})}}]).factory("RotationTransition",["TransAssist","Assist","$compile",function(a,r,o){var s;return function(m){this[m.when]=function(f,u){var c,d;return d=o("<div></div>")(f.scope()),e(f),i(d,f),t.element(d).append(f[0].outerHTML),c=r.parseClassList(f,!0),m.from.ease=c.ease.easeOut,m.duration=c.duration,a.addTimer(f,m.duration,u),s=new n,s.from(f,1,m.from).to(f,1,m.to),function(t){t&&a.removeTimer(f)}}}}]),t.module("fx.transitions.view",[]).directive("fxAnimate",["$injector",function(a){return{link:function(n,e){function i(a,n){t.forEach(a,function(t,a){"ease"===a&&(t="fx-easing-"+t),"speed"===a&&(t="fx-speed-"+t),n.addClass(t)})}var r,o;a.has("$state")&&(r=a.get("$state")),a.has("$route")&&(o=a.get("$route"));var s;if(r&&r.current.animation&&o&&o.current&&o.current.$$route&&o.current.$$route.animation)throw new Error("You can only add animations on either $state or $route");r&&(s=r.current.animation),o&&o.current&&(s=o.current.$$route.animation),i(s,e)}}}]),t.module("fx.transitions.rotations",["fx.transitions.create"]).animation(".rotate-out-right",["RotationTransition",function(t){var a={from:{transform:"rotateY(15deg)",opacity:".8"},to:{transform:"scale(0.8) translateZ(-200px)",opacity:"0"},when:"leave",duration:.5};return new t(a)}]),t.module("fx.transitions.scales",["fx.transitions.create"]).animation(".shrink-in",["SlideTransition",function(t){var a={from:{opacity:"0",transform:"translateZ(0) scale(1.2)"},duration:.5};return new t(a)}]).animation(".shrink-out",["SlideTransition",function(t){var a={to:{opacity:"0",transform:"translateZ(0) scale(.8)"},duration:.5};return new t(a)}]).animation(".grow-in",["SlideTransition",function(t){var a={from:{opacity:"0",transform:"translateZ(0) scale(.8)"},duration:.5};return new t(a)}]).animation(".grow-out",["SlideTransition",function(t){var a={to:{opacity:"0",transform:"translateZ(0) scale(1.2)"},duration:.5};return new t(a)}]),t.module("fx.transitions.slides",["fx.transitions.create"]).animation(".slide-in-left",["SlideTransition",function(t){var a={from:{transform:"translateZ(0) translateX(100%)"},duration:2};return new t(a)}]).animation(".slide-out-left",["SlideTransition",function(t){var a={to:{transform:"translateZ(0) translateX(-100%)"},duration:2};return new t(a)}]).animation(".slide-in-right",["SlideTransition",function(t){var a={from:{transform:"translateZ(0) translateX(-100%)"},duration:2};return new t(a)}]).animation(".slide-out-right",["SlideTransition",function(t){var a={to:{transform:"translateZ(0) translateX(100%)"},duration:2};return new t(a)}]).animation(".slide-in-down",["SlideTransition",function(t){var a={from:{transform:"translateZ(0) translateY(-100%)"},duration:2};return new t(a)}]).animation(".slide-out-down",["SlideTransition",function(t){var a={to:{transform:"translateZ(0) translateY(100%)"},duration:2};return new t(a)}]).animation(".slide-in-up",["SlideTransition",function(t){var a={from:{transform:"translateZ(0) translateY(100%)"},duration:2};return new t(a)}]).animation(".slide-out-up",["SlideTransition",function(t){var a={to:{transform:"translateZ(0) translateY(-100%)"},duration:2};return new t(a)}]).animation(".slide-in-left-fade",["SlideTransition",function(t){var a={from:{opacity:"0.3",transform:"translateZ(0) translateX(100%)"},duration:2};return new t(a)}]).animation(".slide-out-left-fade",["SlideTransition",function(t){var a={to:{opacity:"0.3",transform:"translateZ(0) translateX(-100%)"},duration:2};return new t(a)}]).animation(".slide-in-right-fade",["SlideTransition",function(t){var a={from:{opacity:"0.3",transform:"translateZ(0) translateX(-100%)"},duration:2};return new t(a)}]).animation(".slide-out-right-fade",["SlideTransition",function(t){var a={to:{opacity:"0.3",transform:"translateZ(0) translateX(100%)"},duration:2};return new t(a)}]).animation(".slide-in-down-fade",["SlideTransition",function(t){var a={from:{opacity:"0.3",transform:"translateZ(0) translateY(-100%)"},duration:2};return new t(a)}]).animation(".slide-out-down-fade",["SlideTransition",function(t){var a={to:{opacity:"0.3",transform:"translateZ(0) translateY(100%)"},duration:2};return new t(a)}]).animation(".slide-in-up-fade",["SlideTransition",function(t){var a={from:{opacity:"0.3",transform:"translateZ(0) translateY(100%)"},duration:2};return new t(a)}]).animation(".slide-out-up-fade",["SlideTransition",function(t){var a={to:{opacity:"0.3",transform:"translateZ(0) translateY(-100%)"},duration:2};return new t(a)}]),t.module("fx.transitions.specials",[]).animation(".fx-fall-out",function(){return{leave:function(t,a){t.css("z-index","9999");var e=new n({onComplete:a});e.to(t,{transform:"rotateZ(0deg)"}).to(t,.1,{transform:"rotateZ(10deg)"}).to(t,.3,{transform:"rotateZ(17deg)"}).to(t,.5,{transform:"rotateZ(15deg)"}).to(t,.2,{transform:"translateY(100%) rotateZ(17deg)"})}}}),t.module("fx.animations.pulse",["fx.animations.assist"]).animation(".fx-pulse",["Assist",function(a){return{animate:function(e,i,r,o,s){var m=[{effect:{transform:"scale3d(1,1,1)"}},{effect:{transform:"scale3d(1.05, 1.05, 1.05)"}},{effect:{transform:"scale3d(1, 1, 1)"}}],f=a.parseClassList(e);f.motion="addClass",f.animation="pulse";var u=f.duration/m.length;a.addTimer(f,e,s);var c=new n;t.forEach(m,function(t,a){t.easing=f.ease.easeInOut,c=c.to(e,u,t.effect)})}}}]),t.module("fx.animations.tada",["fx.animations.assist"]).animation(".fx-tada",["Assist",function(a){return{animate:function(e,i,r){var o=[{effect:{transform:"scale3d(1,1,1)"}},{effect:{transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)"}},{effect:{transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)"}},{effect:{transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)"}},{effect:{transform:" scale3d(1, 1, 1)"}}],s=a.parseClassList(e);s.motion="addClass",s.animation="tada";var m=s.duration/o.length;a.addTimer(s,e,r);var f=new n;t.forEach(o,function(t,a){t.easing=s.ease.easeInOut,f=f.to(e,m,t.effect)})}}}]),t.module("fx.animations.bounces",["fx.animations.bounces.factory"]).animation(".fx-bounce-normal",["BounceAnimation",function(t){var a={first:{opacity:0,transform:"scale(.3)"},mid:{opacity:1,transform:"scale(1.05)"},third:{transform:"scale(.9)"},end:{opacity:1,transform:"scale(1)"},animation:"bounce-normal"};return new t(a)}]).animation(".fx-bounce-down",["BounceAnimation",function(t){var a={first:{opacity:0,transform:"translateY(-2000px)"},mid:{opacity:1,transform:"translateY(30px)"},third:{transform:"translateY(-10px)"},end:{transform:"translateY(0)"},animation:"bounce-down"};return new t(a)}]).animation(".fx-bounce-left",["BounceAnimation",function(t){var a={first:{opacity:0,transform:"translateX(-2000px)"},mid:{opacity:1,transform:"translateX(30px)"},third:{transform:"translateX(-10px)"},end:{transform:"translateX(0)"},animation:"bounce-left"};return new t(a)}]).animation(".fx-bounce-up",["BounceAnimation",function(t){var a={first:{opacity:0,transform:"translateY(2000px)"},mid:{opacity:1,transform:"translateY(-30px)"},third:{transform:"translateY(10px)"},end:{transform:"translateY(0)"},animation:"bounce-up"};return new t(a)}]).animation(".fx-bounce-right",["BounceAnimation",function(t){var a={first:{opacity:0,transform:"translateX(2000px)"},mid:{opacity:1,transform:"translateX(-30px)"},third:{transform:"translateX(10px)"},end:{transform:"translateX(0)"},animation:"bounce-right"};return new t(a)}]),t.module("fx.animations.bounces.factory",["fx.animations.assist"]).factory("BounceAnimation",["$timeout","$window","Assist",function(t,a,e){return function(t){var a=t.first,i=t.mid,o=t.third,s=t.end,m=t.animation,f=.1;this.enter=function(t,r){var f=e.parseClassList(t);f.motion="enter",f.animation=m,f.timeoutKey=e.timeoutKey,f.stagger=!0,e.addTimer(f,t,r);var u=new n;return u.to(t,.01,a),u.to(t,f.duration,i),u.to(t,f.duration,o),u.to(t,f.duration,s),function(a){if(a){var n=t.data(e.timeoutKey);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.leave=function(t,u){var c=e.parseClassList(t);c.motion="leave",c.animation=m,c.timeoutKey=e.timeoutKey,c.stagger=!0,e.addTimer(c,t,u);var d=new n;return d.to(t,f,s),d.to(t,c.duration,o),d.to(t,c.duration,i),d.to(t,c.duration,a),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.move=this.enter,this.beforeAddClass=function(t,u,c){if(u){var d=e.parseClassList(t);d.motion="enter",d.animation=m,d.timeoutKey=e.timeoutKey,d.stagger=!0,e.addTimer(d,t,c);var l=new n;return l.to(t,f,s),l.to(t,d.duration,o),l.to(t,d.duration,i),l.to(t,d.duration,a),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}c()},this.removeClass=function(t,u,c){if(u){var d=e.parseClassList(t);d.motion="leave",d.animation=m,d.timeoutKey=e.timeoutKey,d.stagger=!0;var l=new n;return l.to(t,f,a),l.to(t,d.duration,i),l.to(t,d.duration,o),l.to(t,d.duration,s),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}c()}}}]),t.module("fx.animations.fades",["fx.animations.fades.factory"]).animation(".fx-fade-normal",["FadeAnimation",function(t){var a={enter:{opacity:1},leave:{opacity:0},animation:"fade-normal"};return new t(a)}]).animation(".fx-fade-down",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateY(0)"},leave:{opacity:0,transform:"translateY(-20px)"},inverse:{opacity:0,transform:"translateY(20px)"},animation:"fade-down"};return new t(a)}]).animation(".fx-fade-down-big",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateY(0)"},leave:{opacity:0,transform:"translateY(-2000px)"},inverse:{opacity:0,transform:"translateY(2000px)"},animation:"fade-down-big"};return new t(a)}]).animation(".fx-fade-left",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:"translateX(-20px)"},inverse:{opacity:0,transform:"translateX(20px)"},animation:"fade-left"};return new t(a)}]).animation(".fx-fade-left-big",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:"translateX(-2000px)"},inverse:{opacity:0,transform:"translateX(2000px)"},animation:"fade-left-big"};return new t(a)}]).animation(".fx-fade-right",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:"translateX(20px)"},inverse:{opacity:0,transform:"translateX(-20px)"},animation:"fade-right"};return new t(a)}]).animation(".fx-fade-right-big",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:"translateX(2000px)"},inverse:{opacity:0,transform:"translateX(-2000px)"},animation:"fade-right-big"};return new t(a)}]).animation(".fx-fade-up",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateY(0)"},leave:{opacity:0,transform:"translateY(20px)"},inverse:{opacity:0,transform:"translateY(-20px)"},animation:"fade-up"};return new t(a)}]).animation(".fx-fade-up-big",["FadeAnimation",function(t){var a={enter:{opacity:1,transform:"translateY(0)"},leave:{opacity:0,transform:"translateY(2000px)"},inverse:{opacity:0,transform:"translateY(-2000px)"},animation:"fade-up-big"};return new t(a)}]).animation(".fx-fade-overlay",["FadeAnimation",function(t){var a={enter:{opacity:.7},leave:{opacity:0},inverse:{opacity:0},animation:"fade-overlay"};return new t(a)}]),t.module("fx.animations.fades.factory",["fx.animations.assist"]).factory("FadeAnimation",["$timeout","$window","Assist",function(t,n,e){return function(t){var n=t.enter,i=t.leave,o=t.inverse||t.leave,s=t.animation;this.enter=function(t,o){var m=e.parseClassList(t);return m.motion="enter",m.animation=s,m.timeoutKey=e.timeoutKey,e.addTimer(m,t,o),n.ease=m.ease.easeOut,a.set(t,i),a.to(t,m.duration,n),function(a){var n=t.data(r);a&&n&&e.removeTimer(t,e.timeoutKey,n)}},this.leave=function(t,i){var r=e.parseClassList(t);return r.motion="leave",r.animation=s,r.timeoutKey=e.timeoutKey,e.addTimer(r,t,i),o.ease=r.ease.easeIn,a.set(t,n),a.to(t,r.duration,o),function(a){var n=t.data(e.timeoutKey);a&&n&&e.removeTimer(t,e.timeoutKey,n)}},this.move=this.enter,this.beforeAddClass=function(t,n,i){if(n){var m=e.parseClassList(t);return m.motion="enter",m.animation=s,m.timeoutKey=e.timeoutKey,e.addTimer(m,t,i),a.to(t,m.duration,o),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}i()},this.removeClass=function(t,o,m){if(o){var f=e.parseClassList(t);return f.motion="leave",f.animation=s,f.timeoutKey=e.timeoutKey,a.set(t,i),a.to(t,f.duration,n),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}m()}}}]),t.module("fx.animations.rotations",["fx.animations.rotations.factory"]).animation(".fx-rotate-counterclock",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"center center",transform:"rotate(-200deg)"},end:{opacity:1,transformOrigin:"center center",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"center center",transform:"rotate(200deg)"},animation:"rotate-counterclock"};return new t(a)}]).animation(".fx-rotate-clock",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"center center",transform:"rotate(200deg)"},end:{opacity:1,transformOrigin:"center center",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"center center",transform:"rotate(-200deg)"},animation:"rotate-clock"};return new t(a)}]).animation(".fx-rotate-clock-left",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"left bottom",transform:"rotate(-90deg)"},end:{opacity:1,transformOrigin:"left bottom",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"left bottom",transform:"rotate(90deg)"},animation:"rotate-clock-left"};return new t(a)}]).animation(".fx-rotate-counterclock-right",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"right bottom",transform:"rotate(90deg)"},end:{opacity:1,transformOrigin:"right bottom",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"right bottom",transform:"rotate(-90deg)"},animation:"rotate-counterclock-right"};return new t(a)}]).animation(".fx-rotate-counterclock-up",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"left bottom",transform:"rotate(90deg)"},end:{opacity:1,transformOrigin:"left bottom",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"left bottom",transform:"rotate(-90deg)"},animation:"rotate-counterclock-up"};return new t(a)}]).animation(".fx-rotate-clock-up",["RotateAnimation",function(t){var a={start:{opacity:0,transformOrigin:"right bottom",transform:"rotate(-90deg)"},end:{opacity:1,transformOrigin:"right bottom",transform:"rotate(0)"},inverse:{opacity:0,transformOrigin:"right bottom",transform:"rotate(90deg)"},animation:"rotate-clock-up"};return new t(a)}]),t.module("fx.animations.rotations.factory",["fx.animations.assist"]).factory("RotateAnimation",["$timeout","$window","Assist",function(t,n,e){return function(t){var n=t.start,i=t.end,o=t.inverse,s=t.animation;this.enter=function(t,r){var o=e.parseClassList(t);return o.motion="enter",o.animation=s,o.timeoutKey=e.timeoutKey,i.ease=o.ease.easeOut,e.addTimer(o,t,r),a.set(t,n),a.to(t,o.duration,i),function(a){if(a){var n=t.data(e.timeoutKey);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.leave=function(t,n){var m=e.parseClassList(t);return m.motion="leave",m.animation=s,m.timeoutKey=e.timeoutKey,o.ease=m.ease.easeIn,e.addTimer(m,t,n),a.set(t,i),a.to(t,m.duration,o),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.move=this.enter,this.beforeAddClass=function(t,o,m){if(o){var f=e.parseClassList(t);return f.motion="enter",f.animation=s,f.timeoutKey=e.timeoutKey,e.addTimer(f,t,m),a.set(t,i),a.to(t,f.duration,n),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}m()},this.removeClass=function(t,o,m){if(o){var f=e.parseClassList(t);return f.motion="enter",f.animation=s,f.timeoutKey=e.timeoutKey,e.addTimer(f,t,m),a.set(t,n),a.to(t,f.duration,i),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}m()}}}]),t.module("fx.animations.zooms",["fx.animations.zooms.factory"]).animation(".fx-zoom-normal",["ZoomAnimation",function(t){var a={start:{opacity:0,transform:"scale(.3)"},end:{opacity:1,transform:"scale(1)"},animation:"zoom-normal"};return new t(a)}]).animation(".fx-zoom-down",["ZoomAnimation",function(t){var a={start:{opacity:0,transform:"scale(.1) translateY(-2000px)"},end:{opacity:1,transform:"scale(1) translateY(0)"},animation:"zoom-down"};return new t(a)}]).animation(".fx-zoom-up",["ZoomAnimation",function(t){var a={start:{opacity:0,transform:"scale(.1) translateY(2000px)"},end:{opacity:1,transform:"scale(1) translateY(0)"},animation:"zoom-up"};return new t(a)}]).animation(".fx-zoom-right",["ZoomAnimation",function(t){var a={start:{opacity:0,transform:"scale(.1) translateX(2000px)"},end:{opacity:1,transform:"scale(1) translateX(0)"},animation:"zoom-right"};return new t(a)}]).animation(".fx-zoom-left",["ZoomAnimation",function(t){var a={start:{opacity:0,transform:"scale(.1) translateX(-2000px)"},end:{opacity:1,transform:"scale(1) translateX(0)"},animation:"zoom-left"};return new t(a)}]),t.module("fx.animations.zooms.factory",["fx.animations.assist"]).factory("ZoomAnimation",["$timeout","$window","Assist",function(t,n,e){return function(t){var n=t.start,i=t.end,o=t.animation;this.enter=function(t,r){var s=e.parseClassList(t);return s.motion="enter",s.animation=o,s.timeoutKey=e.timeoutKey,i.ease=s.ease.easeOut,e.addTimer(s,t,r),a.set(t,n),a.to(t,s.duration,i),function(a){if(a){var n=t.data(e.timeoutKey);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.leave=function(t,s){var m=e.parseClassList(t);return m.motion="leave",m.animation=o,m.timeoutKey=e.timeoutKey,n.ease=m.ease.easeIn,e.addTimer(m,t,s),a.set(t,i),a.to(t,m.duration,n),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}},this.move=this.enter,this.removeClass=function(t,s,m){if("ng-hide"===s){var f=e.parseClassList(t);return f.motion="leave",f.animation=o,f.timeoutKey=e.timeoutKey,e.addTimer(f,t,m),a.set(t,n),a.to(t,f.duration,i),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}m()},this.beforeAddClass=function(t,s,m){if("ng-hide"===s){var f=e.parseClassList(t);return f.motion="enter",f.animation=o,f.timeoutKey=e.timeoutKey,e.addTimer(f,t,m),a.set(t,i),a.to(t,f.duration,n),function(a){if(a){var n=t.data(r);n&&e.removeTimer(t,e.timeoutKey,n)}}}m()}}}])}(angular,TweenMax,TimelineMax);!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else{if(!angular.isFunction(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");a=b[d](a,c)}}),a},i=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||i(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return h(a,b,e)}}}];var f=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=!1,A=".",B=0,C=!0,D="default",E={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},F="2.7.2",G=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};G.displayName="angular-translate/service: getFirstBrowserLanguage";var H=function(){var a=G()||"";return E[D]&&(a=E[D](a)),a};H.displayName="angular-translate/service: getLocale";var I=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},J=function(){return this.toString().replace(/^\s+|\s+$/g,"")},K=function(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(I(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],I(b,angular.lowercase(g))>-1))return g}}if(a){var k=a.split("_");if(k.length>1&&I(b,angular.lowercase(k[0]))>-1)return k[0]}return a},L=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],M(b));return this};this.translations=L,this.cloakClassName=function(a){return a?(x=a,this):x};var M=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?M(h,b.concat(e),c,e):(f=b.length?""+b.join(A)+A+e:e,b.length&&e===d&&(g=""+b.join(A),c[g]="@:"+f),c[f]=h));return c};M.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return N(a),this};var N=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return O(a),this};var O=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&I(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var P=function(a){return a?(v=a,this):l?l+v:v};this.storageKey=P,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.forceAsyncReload=function(a){return z=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},D=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():H();return e=u.length?K(b):b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?B:(B=a,this)},this.statefulFilter=function(a){return void 0===a?C:(C=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,A=b.get(n||"$translateDefaultInterpolation"),D=!1,E={},G={},H=function(a,b,c,h){if(angular.isArray(a)){var j=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return H(a,b,c,h).then(g,g),f.promise},i=0,j=a.length;j>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return j(a)}var m=d.defer();a&&(a=J.apply(a));var n=function(){var a=e?G[e]:G[i];if(l=0,k&&!a){var b=f.get(v);if(a=G[b],g&&g.length){var c=I(g,b);l=0===c?1:0,I(g,e)<0&&g.push(e)}}return a}();if(n){var o=function(){ab(a,b,c,h).then(m.resolve,m.reject)};o.displayName="promiseResolved",n["finally"](o,m.reject)}else ab(a,b,c,h).then(m.resolve,m.reject);return m.promise},Q=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},R=function(a){i=a,c.$emit("$translateChangeSuccess",{language:a}),k&&f.put(H.storageKey(),i),A.setLocale(i);var b=function(a,b){E[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(E,b),c.$emit("$translateChangeEnd",{language:a})},S=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),D=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,M(a))}):angular.extend(d,M(b)),D=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var T=function(a){var c=b.get(a);c.setLocale(e||i),E[c.getInterpolationIdentifier()]=c};T.displayName="interpolationFactoryAdder",angular.forEach(w,T)}var U=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(G[a]){var c=function(a){L(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",G[a].then(c,b.reject)}else b.reject();return b.promise},V=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?V(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",U(a).then(g,f.reject),f.promise},W=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return W(a,e.substr(2),c,d);d.setLocale(i)}return e},X=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},Y=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];V(i,b,c,e).then(h.resolve,function(){Y(a+1,b,c,e,f).then(h.resolve)})}else h.resolve(f?f:X(b,c));return h.promise},Z=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=W(f,b,c,d),e||(e=Z(a+1,b,c,d))}return e},$=function(a,b,c,d){return Y(u>0?u:l,a,b,c,d)},_=function(a,b,c){return Z(u>0?u:l,a,b,c)},ab=function(a,b,c,e){var f=d.defer(),h=i?t[i]:t,j=c?E[c]:A;if(h&&Object.prototype.hasOwnProperty.call(h,a)){var k=h[a];"@:"===k.substr(0,2)?H(k.substr(2),b,c,e).then(f.resolve,f.reject):f.resolve(j.interpolate(k,b))}else{var l;m&&!D&&(l=X(a,b)),i&&g&&g.length?$(a,b,j,e).then(function(a){f.resolve(a)},function(a){f.reject(Q(a))}):m&&!D&&l?f.resolve(e?e:l):e?f.resolve(e):f.reject(Q(a))}return f.promise},bb=function(a,b,c){var d,e=i?t[i]:t,f=A;if(E&&Object.prototype.hasOwnProperty.call(E,c)&&(f=E[c]),e&&Object.prototype.hasOwnProperty.call(e,a)){var h=e[a];d="@:"===h.substr(0,2)?bb(h.substr(2),b,c):f.interpolate(h,b)}else{var j;m&&!D&&(j=X(a,b)),i&&g&&g.length?(l=0,d=_(a,b,f)):d=m&&!D&&j?j:Q(a)}return d},cb=function(a){j===a&&(j=void 0),G[a]=void 0};if(H.preferredLanguage=function(a){return a&&N(a),e},H.cloakClassName=function(){return x},H.fallbackLanguage=function(a){if(void 0!==a&&null!==a){
if(O(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)G[g[b]]||(G[g[b]]=S(g[b]));H.use(H.use())}return h?g[0]:g},H.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=I(g,a);b>-1&&(u=b)}else u=0},H.proposedLanguage=function(){return j},H.storage=function(){return f},H.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=K(a);return e&&(a=e),!z&&t[a]||!o||G[a]?j===a&&G[a]?G[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),R(a)):(j=a,G[a]=S(a).then(function(a){return L(a.key,a.table),b.resolve(a.key),R(a.key),a},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),G[a]["finally"](function(){cb(a)})),b.promise},H.storageKey=function(){return P()},H.isPostCompilingEnabled=function(){return y},H.isForceAsyncReloadEnabled=function(){return z},H.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){L(c.key,c.table),a===i&&R(i),b()};h.displayName="refreshPostProcessor",S(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(S(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(S(i));var n=function(a){t={},angular.forEach(a,function(a){L(a.key,a.table)}),i&&R(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},H.instant=function(a,b,c){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var d={},f=0,h=a.length;h>f;f++)d[a[f]]=H.instant(a[f],b,c);return d}if(angular.isString(a)&&a.length<1)return a;a&&(a=J.apply(a));var j,k=[];e&&k.push(e),i&&k.push(i),g&&g.length&&(k=k.concat(g));for(var l=0,n=k.length;n>l;l++){var o=k[l];if(t[o]&&("undefined"!=typeof t[o][a]?j=bb(a,b,c):(q||r)&&(j=Q(a))),"undefined"!=typeof j)break}return j||""===j||(j=A.interpolate(a,b),m&&!D&&(j=X(a,b))),j},H.versionInfo=function(){return F},H.loaderCache=function(){return s},H.directivePriority=function(){return B},H.statefulFilter=function(){return C},o&&(angular.equals(t,{})&&H.use(H.use()),g&&g.length))for(var db=function(a){return L(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},eb=0,fb=g.length;fb>eb;eb++){var gb=g[eb];(z||!t[gb])&&(G[gb]=S(gb).then(db))}return H}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,f){"use strict";var g=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=b[0].outerHTML.match(/translate-value-+/i),l="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",m="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,n,o){b.interpolateParams={},b.preText="",b.postText="";var p={},q=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),k)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},r=function(a){if(angular.isFunction(r._unwatchOld)&&(r._unwatchOld(),r._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=g.apply(n.text()).match(l);if(angular.isArray(d)){b.preText=d[1],b.postText=d[3],p.translate=c(d[2])(b.$parent);var e=n.text().match(m);angular.isArray(e)&&e[2]&&e[2].length&&(r._unwatchOld=b.$watch(e[2],function(a){p.translate=a,x()}))}else p.translate=n.text().replace(/^\s+|\s+$/g,"")}else p.translate=a;x()},s=function(a){o.$observe(a,function(b){p[a]=b,x()})};q(b.interpolateParams,o,h);var t=!0;o.$observe("translate",function(a){"undefined"==typeof a?r(""):""===a&&t||(p.translate=a,x()),t=!1});for(var u in o)o.hasOwnProperty(u)&&"translateAttr"===u.substr(0,13)&&s(u);if(o.$observe("translateDefault",function(a){b.defaultText=a}),i&&o.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var v=function(a){o.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var w in o)Object.prototype.hasOwnProperty.call(o,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&v(w)}var x=function(){for(var a in p)p.hasOwnProperty(a)&&void 0!==p[a]&&y(a,p[a],b,b.interpolateParams,b.defaultText)},y=function(b,c,d,e,f){c?a(c,e,j,f).then(function(a){z(a,d,!0,b)},function(a){z(a,d,!1,b)}):z(c,d,!1,b)},z=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),n.html(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),i="undefined"!=typeof h.translateCompile,j=i&&"false"!==h.translateCompile;(g&&!i||j)&&d(n.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=o.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),n.attr(k,b)}};(i||k||o.translateDefault)&&b.$watch("interpolateParams",x,!0);var A=f.$on("$translateChangeSuccess",x);n.text().length?r(o.translate?o.translate:""):o.translate&&r(o.translate),x(),b.$on("$destroy",A)}}}}function f(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}function g(a,b){"use strict";var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return b.statefulFilter()&&(c.$stateful=!0),c}function h(a){"use strict";return a("translations")}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",f),f.$inject=["$rootScope","$translate"],f.displayName="translateCloakDirective",angular.module("pascalprecht.translate").filter("translate",g),g.$inject=["$parse","$translate"],g.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",h),h.$inject=["$cacheFactory"],h.displayName="$translationCache","pascalprecht.translate"});"use strict";(function(root,factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(["jquery","googlemaps!"],factory)}else{root.GMaps=factory()}})(this,function(){if(!(typeof window.google==="object"&&window.google.maps)){throw"Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true."}var extend_object=function(obj,new_obj){var name;if(obj===new_obj){return obj}for(name in new_obj){obj[name]=new_obj[name]}return obj};var replace_object=function(obj,replace){var name;if(obj===replace){return obj}for(name in replace){if(obj[name]!=undefined){obj[name]=replace[name]}}return obj};var array_map=function(array,callback){var original_callback_params=Array.prototype.slice.call(arguments,2),array_return=[],array_length=array.length,i;if(Array.prototype.map&&array.map===Array.prototype.map){array_return=Array.prototype.map.call(array,function(item){var callback_params=original_callback_params.slice(0);callback_params.splice(0,0,item);return callback.apply(this,callback_params)})}else{for(i=0;i<array_length;i++){callback_params=original_callback_params;callback_params.splice(0,0,array[i]);array_return.push(callback.apply(this,callback_params))}}return array_return};var array_flat=function(array){var new_array=[],i;for(i=0;i<array.length;i++){new_array=new_array.concat(array[i])}return new_array};var coordsToLatLngs=function(coords,useGeoJSON){var first_coord=coords[0],second_coord=coords[1];if(useGeoJSON){first_coord=coords[1];second_coord=coords[0]}return new google.maps.LatLng(first_coord,second_coord)};var arrayToLatLng=function(coords,useGeoJSON){var i;for(i=0;i<coords.length;i++){if(!(coords[i]instanceof google.maps.LatLng)){if(coords[i].length>0&&typeof coords[i][0]==="object"){coords[i]=arrayToLatLng(coords[i],useGeoJSON)}else{coords[i]=coordsToLatLngs(coords[i],useGeoJSON)}}}return coords};var getElementsByClassName=function(class_name,context){var element,_class=class_name.replace(".","");if("jQuery"in this&&context){element=$("."+_class,context)[0]}else{element=document.getElementsByClassName(_class)[0]}return element};var getElementById=function(id,context){var element,id=id.replace("#","");if("jQuery"in window&&context){element=$("#"+id,context)[0]}else{element=document.getElementById(id)}return element};var findAbsolutePosition=function(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent)}return[curleft,curtop]};var GMaps=function(global){"use strict";var doc=document;var GMaps=function(options){if(!this)return new GMaps(options);options.zoom=options.zoom||15;options.mapType=options.mapType||"roadmap";var self=this,i,events_that_hide_context_menu=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],events_that_doesnt_hide_context_menu=["mousemove","mouseout","mouseover"],options_to_be_deleted=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],identifier=options.el||options.div,markerClustererFunction=options.markerClusterer,mapType=google.maps.MapTypeId[options.mapType.toUpperCase()],map_center=new google.maps.LatLng(options.lat,options.lng),zoomControl=options.zoomControl||true,zoomControlOpt=options.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},zoomControlStyle=zoomControlOpt.style||"DEFAULT",zoomControlPosition=zoomControlOpt.position||"TOP_LEFT",panControl=options.panControl||true,mapTypeControl=options.mapTypeControl||true,scaleControl=options.scaleControl||true,streetViewControl=options.streetViewControl||true,overviewMapControl=overviewMapControl||true,map_options={},map_base_options={zoom:this.zoom,center:map_center,mapTypeId:mapType},map_controls_options={panControl:panControl,zoomControl:zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[zoomControlStyle],position:google.maps.ControlPosition[zoomControlPosition]},mapTypeControl:mapTypeControl,scaleControl:scaleControl,streetViewControl:streetViewControl,overviewMapControl:overviewMapControl};if(typeof options.el==="string"||typeof options.div==="string"){if(identifier.indexOf("#")>-1){this.el=getElementById(identifier,options.context)}else{this.el=getElementsByClassName.apply(this,[identifier,options.context])}}else{this.el=identifier}if(typeof this.el==="undefined"||this.el===null){throw"No element defined."}window.context_menu=window.context_menu||{};window.context_menu[self.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=options.zoom;this.registered_events={};this.el.style.width=options.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=options.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=options.enableNewStyle;for(i=0;i<options_to_be_deleted.length;i++){delete options[options_to_be_deleted[i]]}if(options.disableDefaultUI!=true){map_base_options=extend_object(map_base_options,map_controls_options)}map_options=extend_object(map_base_options,options);for(i=0;i<events_that_hide_context_menu.length;i++){delete map_options[events_that_hide_context_menu[i]]}for(i=0;i<events_that_doesnt_hide_context_menu.length;i++){delete map_options[events_that_doesnt_hide_context_menu[i]]}this.map=new google.maps.Map(this.el,map_options);if(markerClustererFunction){this.markerClusterer=markerClustererFunction.apply(this,[this.map])}var buildContextMenuHTML=function(control,e){var html="",options=window.context_menu[self.el.id][control];for(var i in options){if(options.hasOwnProperty(i)){var option=options[i];html+='<li><a id="'+control+"_"+i+'" href="#">'+option.title+"</a></li>"}}if(!getElementById("gmaps_context_menu"))return;var context_menu_element=getElementById("gmaps_context_menu");context_menu_element.innerHTML=html;var context_menu_items=context_menu_element.getElementsByTagName("a"),context_menu_items_count=context_menu_items.length,i;for(i=0;i<context_menu_items_count;i++){var context_menu_item=context_menu_items[i];var assign_menu_item_action=function(ev){ev.preventDefault();options[this.id.replace(control+"_","")].action.apply(self,[e]);self.hideContextMenu()};google.maps.event.clearListeners(context_menu_item,"click");google.maps.event.addDomListenerOnce(context_menu_item,"click",assign_menu_item_action,false)}var position=findAbsolutePosition.apply(this,[self.el]),left=position[0]+e.pixel.x-15,top=position[1]+e.pixel.y-15;context_menu_element.style.left=left+"px";context_menu_element.style.top=top+"px";context_menu_element.style.display="block"};this.buildContextMenu=function(control,e){if(control==="marker"){e.pixel={};var overlay=new google.maps.OverlayView;overlay.setMap(self.map);overlay.draw=function(){var projection=overlay.getProjection(),position=e.marker.getPosition();e.pixel=projection.fromLatLngToContainerPixel(position);buildContextMenuHTML(control,e)}}else{buildContextMenuHTML(control,e)}};this.setContextMenu=function(options){window.context_menu[self.el.id][options.control]={};var i,ul=doc.createElement("ul");for(i in options.options){if(options.options.hasOwnProperty(i)){var option=options.options[i];window.context_menu[self.el.id][options.control][option.name]={title:option.title,action:option.action}}}ul.id="gmaps_context_menu";ul.style.display="none";ul.style.position="absolute";ul.style.minWidth="100px";ul.style.background="white";ul.style.listStyle="none";ul.style.padding="8px";ul.style.boxShadow="2px 2px 6px #ccc";doc.body.appendChild(ul);var context_menu_element=getElementById("gmaps_context_menu");google.maps.event.addDomListener(context_menu_element,"mouseout",function(ev){if(!ev.relatedTarget||!this.contains(ev.relatedTarget)){window.setTimeout(function(){context_menu_element.style.display="none"},400)}},false)};this.hideContextMenu=function(){var context_menu_element=getElementById("gmaps_context_menu");if(context_menu_element){context_menu_element.style.display="none"}};var setupListener=function(object,name){google.maps.event.addListener(object,name,function(e){if(e==undefined){e=this}options[name].apply(this,[e]);self.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var ev=0;ev<events_that_hide_context_menu.length;ev++){var name=events_that_hide_context_menu[ev];if(name in options){setupListener(this.map,name)}}for(var ev=0;ev<events_that_doesnt_hide_context_menu.length;ev++){var name=events_that_doesnt_hide_context_menu[ev];if(name in options){setupListener(this.map,name)}}google.maps.event.addListener(this.map,"rightclick",function(e){if(options.rightclick){options.rightclick.apply(this,[e])}if(window.context_menu[self.el.id]["map"]!=undefined){self.buildContextMenu("map",e)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var latLngs=[],markers_length=this.markers.length,i;for(i=0;i<markers_length;i++){if(typeof this.markers[i].visible==="boolean"&&this.markers[i].visible){latLngs.push(this.markers[i].getPosition())}}this.fitLatLngBounds(latLngs)};this.fitLatLngBounds=function(latLngs){var total=latLngs.length,bounds=new google.maps.LatLngBounds,i;for(i=0;i<total;i++){bounds.extend(latLngs[i])}this.map.fitBounds(bounds)};this.setCenter=function(lat,lng,callback){this.map.panTo(new google.maps.LatLng(lat,lng));if(callback){callback()}};this.getElement=function(){return this.el};this.zoomIn=function(value){value=value||1;this.zoom=this.map.getZoom()+value;this.map.setZoom(this.zoom)};this.zoomOut=function(value){value=value||1;this.zoom=this.map.getZoom()-value;this.map.setZoom(this.zoom)};var native_methods=[],method;for(method in this.map){if(typeof this.map[method]=="function"&&!this[method]){native_methods.push(method)}}for(i=0;i<native_methods.length;i++){(function(gmaps,scope,method_name){gmaps[method_name]=function(){return scope[method_name].apply(scope,arguments)}})(this,this.map,native_methods[i])}};return GMaps}(this);GMaps.prototype.createControl=function(options){var control=document.createElement("div");control.style.cursor="pointer";if(options.disableDefaultStyles!==true){control.style.fontFamily="Roboto, Arial, sans-serif";control.style.fontSize="11px";control.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"}for(var option in options.style){control.style[option]=options.style[option]}if(options.id){control.id=options.id}if(options.classes){control.className=options.classes}if(options.content){if(typeof options.content==="string"){control.innerHTML=options.content}else if(options.content instanceof HTMLElement){control.appendChild(options.content)}}if(options.position){control.position=google.maps.ControlPosition[options.position.toUpperCase()]}for(var ev in options.events){(function(object,name){google.maps.event.addDomListener(object,name,function(){options.events[name].apply(this,[this])})})(control,ev)}control.index=1;return control};GMaps.prototype.addControl=function(options){var control=this.createControl(options);this.controls.push(control);this.map.controls[control.position].push(control);return control};GMaps.prototype.removeControl=function(control){var position=null,i;for(i=0;i<this.controls.length;i++){if(this.controls[i]==control){position=this.controls[i].position;this.controls.splice(i,1)}}if(position){for(i=0;i<this.map.controls.length;i++){var controlsForPosition=this.map.controls[control.position];if(controlsForPosition.getAt(i)==control){controlsForPosition.removeAt(i);break}}}return control};GMaps.prototype.createMarker=function(options){if(options.lat==undefined&&options.lng==undefined&&options.position==undefined){throw"No latitude or longitude defined."}var self=this,details=options.details,fences=options.fences,outside=options.outside,base_options={position:new google.maps.LatLng(options.lat,options.lng),map:null},marker_options=extend_object(base_options,options);delete marker_options.lat;delete marker_options.lng;delete marker_options.fences;delete marker_options.outside;var marker=new google.maps.Marker(marker_options);marker.fences=fences;if(options.infoWindow){marker.infoWindow=new google.maps.InfoWindow(options.infoWindow);var info_window_events=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var ev=0;ev<info_window_events.length;ev++){(function(object,name){if(options.infoWindow[name]){google.maps.event.addListener(object,name,function(e){options.infoWindow[name].apply(this,[e])})}})(marker.infoWindow,info_window_events[ev])}}var marker_events=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var marker_events_with_mouse=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var ev=0;ev<marker_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(){options[name].apply(this,[this])})}})(marker,marker_events[ev])}for(var ev=0;ev<marker_events_with_mouse.length;ev++){(function(map,object,name){if(options[name]){google.maps.event.addListener(object,name,function(me){if(!me.pixel){me.pixel=map.getProjection().fromLatLngToPoint(me.latLng)}options[name].apply(this,[me])})}})(this.map,marker,marker_events_with_mouse[ev])}google.maps.event.addListener(marker,"click",function(){this.details=details;if(options.click){options.click.apply(this,[this])}if(marker.infoWindow){self.hideInfoWindows();marker.infoWindow.open(self.map,marker)}});google.maps.event.addListener(marker,"rightclick",function(e){e.marker=this;if(options.rightclick){options.rightclick.apply(this,[e])}if(window.context_menu[self.el.id]["marker"]!=undefined){self.buildContextMenu("marker",e)}});if(marker.fences){google.maps.event.addListener(marker,"dragend",function(){self.checkMarkerGeofence(marker,function(m,f){outside(m,f)})})}return marker};GMaps.prototype.addMarker=function(options){var marker;if(options.hasOwnProperty("gm_accessors_")){marker=options}else{if(options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")||options.position){marker=this.createMarker(options)}else{throw"No latitude or longitude defined."}}marker.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(marker)}this.markers.push(marker);GMaps.fire("marker_added",marker,this);return marker};GMaps.prototype.addMarkers=function(array){for(var i=0,marker;marker=array[i];i++){this.addMarker(marker)}return this.markers};GMaps.prototype.hideInfoWindows=function(){for(var i=0,marker;marker=this.markers[i];i++){if(marker.infoWindow){marker.infoWindow.close()}}};GMaps.prototype.removeMarker=function(marker){for(var i=0;i<this.markers.length;i++){if(this.markers[i]===marker){this.markers[i].setMap(null);this.markers.splice(i,1);if(this.markerClusterer){this.markerClusterer.removeMarker(marker)}GMaps.fire("marker_removed",marker,this);break}}return marker};GMaps.prototype.removeMarkers=function(collection){var new_markers=[];if(typeof collection=="undefined"){for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];marker.setMap(null);if(this.markerClusterer){this.markerClusterer.removeMarker(marker)}GMaps.fire("marker_removed",marker,this)}this.markers=new_markers}else{for(var i=0;i<collection.length;i++){var index=this.markers.indexOf(collection[i]);if(index>-1){var marker=this.markers[index];marker.setMap(null);if(this.markerClusterer){this.markerClusterer.removeMarker(marker)}GMaps.fire("marker_removed",marker,this)}}for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];if(marker.getMap()!=null){new_markers.push(marker)}}this.markers=new_markers}};GMaps.prototype.drawOverlay=function(options){var overlay=new google.maps.OverlayView,auto_show=true;overlay.setMap(this.map);if(options.auto_show!=null){auto_show=options.auto_show}overlay.onAdd=function(){var el=document.createElement("div");el.style.borderStyle="none";el.style.borderWidth="0px";el.style.position="absolute";el.style.zIndex=100;el.innerHTML=options.content;overlay.el=el;if(!options.layer){options.layer="overlayLayer"}var panes=this.getPanes(),overlayLayer=panes[options.layer],stop_overlay_events=["contextmenu","DOMMouseScroll","dblclick","mousedown"];overlayLayer.appendChild(el);for(var ev=0;ev<stop_overlay_events.length;ev++){(function(object,name){google.maps.event.addDomListener(object,name,function(e){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){e.cancelBubble=true;e.returnValue=false}else{e.stopPropagation()}})})(el,stop_overlay_events[ev])}if(options.click){panes.overlayMouseTarget.appendChild(overlay.el);google.maps.event.addDomListener(overlay.el,"click",function(){options.click.apply(overlay,[overlay])})}google.maps.event.trigger(this,"ready")};overlay.draw=function(){var projection=this.getProjection(),pixel=projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat,options.lng));options.horizontalOffset=options.horizontalOffset||0;options.verticalOffset=options.verticalOffset||0;var el=overlay.el,content=el.children[0],content_height=content.clientHeight,content_width=content.clientWidth;switch(options.verticalAlign){case"top":el.style.top=pixel.y-content_height+options.verticalOffset+"px";break;default:case"middle":el.style.top=pixel.y-content_height/2+options.verticalOffset+"px";break;case"bottom":el.style.top=pixel.y+options.verticalOffset+"px";break}switch(options.horizontalAlign){case"left":el.style.left=pixel.x-content_width+options.horizontalOffset+"px";break;default:case"center":el.style.left=pixel.x-content_width/2+options.horizontalOffset+"px";break;case"right":el.style.left=pixel.x+options.horizontalOffset+"px";break}el.style.display=auto_show?"block":"none";if(!auto_show){options.show.apply(this,[el])}};overlay.onRemove=function(){var el=overlay.el;if(options.remove){options.remove.apply(this,[el])}else{overlay.el.parentNode.removeChild(overlay.el);overlay.el=null}};this.overlays.push(overlay);return overlay};GMaps.prototype.removeOverlay=function(overlay){for(var i=0;i<this.overlays.length;i++){if(this.overlays[i]===overlay){this.overlays[i].setMap(null);this.overlays.splice(i,1);break}}};GMaps.prototype.removeOverlays=function(){for(var i=0,item;item=this.overlays[i];i++){item.setMap(null)}this.overlays=[]};GMaps.prototype.drawPolyline=function(options){var path=[],points=options.path;if(points.length){if(points[0][0]===undefined){path=points}else{for(var i=0,latlng;latlng=points[i];i++){path.push(new google.maps.LatLng(latlng[0],latlng[1]))}}}var polyline_options={map:this.map,path:path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight,geodesic:options.geodesic,clickable:true,editable:false,visible:true};if(options.hasOwnProperty("clickable")){polyline_options.clickable=options.clickable}if(options.hasOwnProperty("editable")){polyline_options.editable=options.editable}if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons}if(options.hasOwnProperty("zIndex")){polyline_options.zIndex=options.zIndex}var polyline=new google.maps.Polyline(polyline_options);var polyline_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var ev=0;ev<polyline_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}})(polyline,polyline_events[ev])}this.polylines.push(polyline);GMaps.fire("polyline_added",polyline,this);return polyline};GMaps.prototype.removePolyline=function(polyline){for(var i=0;i<this.polylines.length;i++){if(this.polylines[i]===polyline){this.polylines[i].setMap(null);this.polylines.splice(i,1);GMaps.fire("polyline_removed",polyline,this);break}}};GMaps.prototype.removePolylines=function(){for(var i=0,item;item=this.polylines[i];i++){item.setMap(null)}this.polylines=[]};GMaps.prototype.drawCircle=function(options){options=extend_object({map:this.map,center:new google.maps.LatLng(options.lat,options.lng)},options);delete options.lat;delete options.lng;var polygon=new google.maps.Circle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}})(polygon,polygon_events[ev])}this.polygons.push(polygon);return polygon};GMaps.prototype.drawRectangle=function(options){options=extend_object({map:this.map},options);var latLngBounds=new google.maps.LatLngBounds(new google.maps.LatLng(options.bounds[0][0],options.bounds[0][1]),new google.maps.LatLng(options.bounds[1][0],options.bounds[1][1]));options.bounds=latLngBounds;var polygon=new google.maps.Rectangle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}})(polygon,polygon_events[ev])}this.polygons.push(polygon);return polygon};GMaps.prototype.drawPolygon=function(options){var useGeoJSON=false;if(options.hasOwnProperty("useGeoJSON")){useGeoJSON=options.useGeoJSON}delete options.useGeoJSON;options=extend_object({map:this.map},options);if(useGeoJSON==false){options.paths=[options.paths.slice(0)]}if(options.paths.length>0){if(options.paths[0].length>0){options.paths=array_flat(array_map(options.paths,arrayToLatLng,useGeoJSON))}}var polygon=new google.maps.Polygon(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var ev=0;ev<polygon_events.length;ev++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}})(polygon,polygon_events[ev])}this.polygons.push(polygon);GMaps.fire("polygon_added",polygon,this);return polygon};GMaps.prototype.removePolygon=function(polygon){for(var i=0;i<this.polygons.length;i++){if(this.polygons[i]===polygon){this.polygons[i].setMap(null);this.polygons.splice(i,1);GMaps.fire("polygon_removed",polygon,this);break}}};GMaps.prototype.removePolygons=function(){for(var i=0,item;item=this.polygons[i];i++){item.setMap(null)}this.polygons=[]};GMaps.prototype.getFromFusionTables=function(options){var events=options.events;delete options.events;var fusion_tables_options=options,layer=new google.maps.FusionTablesLayer(fusion_tables_options);for(var ev in events){(function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})})(layer,ev)}this.layers.push(layer);return layer};GMaps.prototype.loadFromFusionTables=function(options){var layer=this.getFromFusionTables(options);layer.setMap(this.map);return layer};GMaps.prototype.getFromKML=function(options){var url=options.url,events=options.events;delete options.url;delete options.events;var kml_options=options,layer=new google.maps.KmlLayer(url,kml_options);for(var ev in events){(function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})})(layer,ev)}this.layers.push(layer);return layer};GMaps.prototype.loadFromKML=function(options){var layer=this.getFromKML(options);layer.setMap(this.map);return layer};GMaps.prototype.addLayer=function(layerName,options){options=options||{};var layer;switch(layerName){case"weather":this.singleLayers.weather=layer=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=layer=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=layer=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=layer=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=layer=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=layer=new google.maps.panoramio.PanoramioLayer;layer.setTag(options.filter);delete options.filter;if(options.click){google.maps.event.addListener(layer,"click",function(event){options.click(event);delete options.click})}break;case"places":this.singleLayers.places=layer=new google.maps.places.PlacesService(this.map);
if(options.search||options.nearbySearch||options.radarSearch){var placeSearchRequest={bounds:options.bounds||null,keyword:options.keyword||null,location:options.location||null,name:options.name||null,radius:options.radius||null,rankBy:options.rankBy||null,types:options.types||null};if(options.radarSearch){layer.radarSearch(placeSearchRequest,options.radarSearch)}if(options.search){layer.search(placeSearchRequest,options.search)}if(options.nearbySearch){layer.nearbySearch(placeSearchRequest,options.nearbySearch)}}if(options.textSearch){var textSearchRequest={bounds:options.bounds||null,location:options.location||null,query:options.query||null,radius:options.radius||null};layer.textSearch(textSearchRequest,options.textSearch)}break}if(layer!==undefined){if(typeof layer.setOptions=="function"){layer.setOptions(options)}if(typeof layer.setMap=="function"){layer.setMap(this.map)}return layer}};GMaps.prototype.removeLayer=function(layer){if(typeof layer=="string"&&this.singleLayers[layer]!==undefined){this.singleLayers[layer].setMap(null);delete this.singleLayers[layer]}else{for(var i=0;i<this.layers.length;i++){if(this.layers[i]===layer){this.layers[i].setMap(null);this.layers.splice(i,1);break}}}};var travelMode,unitSystem;GMaps.prototype.getRoutes=function(options){switch(options.travelMode){case"bicycling":travelMode=google.maps.TravelMode.BICYCLING;break;case"transit":travelMode=google.maps.TravelMode.TRANSIT;break;case"driving":travelMode=google.maps.TravelMode.DRIVING;break;default:travelMode=google.maps.TravelMode.WALKING;break}if(options.unitSystem==="imperial"){unitSystem=google.maps.UnitSystem.IMPERIAL}else{unitSystem=google.maps.UnitSystem.METRIC}var base_options={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]},request_options=extend_object(base_options,options);request_options.origin=/string/.test(typeof options.origin)?options.origin:new google.maps.LatLng(options.origin[0],options.origin[1]);request_options.destination=/string/.test(typeof options.destination)?options.destination:new google.maps.LatLng(options.destination[0],options.destination[1]);request_options.travelMode=travelMode;request_options.unitSystem=unitSystem;delete request_options.callback;delete request_options.error;var self=this,service=new google.maps.DirectionsService;service.route(request_options,function(result,status){if(status===google.maps.DirectionsStatus.OK){for(var r in result.routes){if(result.routes.hasOwnProperty(r)){self.routes.push(result.routes[r])}}if(options.callback){options.callback(self.routes)}}else{if(options.error){options.error(result,status)}}})};GMaps.prototype.removeRoutes=function(){this.routes=[]};GMaps.prototype.getElevations=function(options){options=extend_object({locations:[],path:false,samples:256},options);if(options.locations.length>0){if(options.locations[0].length>0){options.locations=array_flat(array_map([options.locations],arrayToLatLng,false))}}var callback=options.callback;delete options.callback;var service=new google.maps.ElevationService;if(!options.path){delete options.path;delete options.samples;service.getElevationForLocations(options,function(result,status){if(callback&&typeof callback==="function"){callback(result,status)}})}else{var pathRequest={path:options.locations,samples:options.samples};service.getElevationAlongPath(pathRequest,function(result,status){if(callback&&typeof callback==="function"){callback(result,status)}})}};GMaps.prototype.cleanRoute=GMaps.prototype.removePolylines;GMaps.prototype.drawRoute=function(options){var self=this;this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,callback:function(e){if(e.length>0){var polyline_options={path:e[e.length-1].overview_path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons}self.drawPolyline(polyline_options);if(options.callback){options.callback(e[e.length-1])}}}})};GMaps.prototype.travelRoute=function(options){if(options.origin&&options.destination){this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,callback:function(e){if(e.length>0&&options.start){options.start(e[e.length-1])}if(e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0){var steps=route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;options.step(step,route.legs[0].steps.length-1)}}}if(e.length>0&&options.end){options.end(e[e.length-1])}}})}else if(options.route){if(options.route.legs.length>0){var steps=options.route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;options.step(step)}}}};GMaps.prototype.drawSteppedRoute=function(options){var self=this;if(options.origin&&options.destination){this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,error:options.error,callback:function(e){if(e.length>0&&options.start){options.start(e[e.length-1])}if(e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0){var steps=route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons}self.drawPolyline(polyline_options);options.step(step,route.legs[0].steps.length-1)}}}if(e.length>0&&options.end){options.end(e[e.length-1])}}})}else if(options.route){if(options.route.legs.length>0){var steps=options.route.legs[0].steps;for(var i=0,step;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons}self.drawPolyline(polyline_options);options.step(step)}}}};GMaps.Route=function(options){this.origin=options.origin;this.destination=options.destination;this.waypoints=options.waypoints;this.map=options.map;this.route=options.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var polyline_options={path:new google.maps.MVCArray,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};if(options.hasOwnProperty("icons")){polyline_options.icons=options.icons}this.polyline=this.map.drawPolyline(polyline_options).getPath()};GMaps.Route.prototype.getRoute=function(options){var self=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:options.travelMode,waypoints:this.waypoints||[],error:options.error,callback:function(){self.route=e[0];if(options.callback){options.callback.call(self)}}})};GMaps.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var path=this.route.legs[0].steps[this.step_count].path;for(var p in path){if(path.hasOwnProperty(p)){this.polyline.pop()}}}};GMaps.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var path=this.route.legs[0].steps[this.step_count].path;for(var p in path){if(path.hasOwnProperty(p)){this.polyline.push(path[p])}}this.step_count++}};GMaps.prototype.checkGeofence=function(lat,lng,fence){return fence.containsLatLng(new google.maps.LatLng(lat,lng))};GMaps.prototype.checkMarkerGeofence=function(marker,outside_callback){if(marker.fences){for(var i=0,fence;fence=marker.fences[i];i++){var pos=marker.getPosition();if(!this.checkGeofence(pos.lat(),pos.lng(),fence)){outside_callback(marker,fence)}}}};GMaps.prototype.toImage=function(options){var options=options||{},static_map_options={};static_map_options["size"]=options["size"]||[this.el.clientWidth,this.el.clientHeight];static_map_options["lat"]=this.getCenter().lat();static_map_options["lng"]=this.getCenter().lng();if(this.markers.length>0){static_map_options["markers"]=[];for(var i=0;i<this.markers.length;i++){static_map_options["markers"].push({lat:this.markers[i].getPosition().lat(),lng:this.markers[i].getPosition().lng()})}}if(this.polylines.length>0){var polyline=this.polylines[0];static_map_options["polyline"]={};static_map_options["polyline"]["path"]=google.maps.geometry.encoding.encodePath(polyline.getPath());static_map_options["polyline"]["strokeColor"]=polyline.strokeColor;static_map_options["polyline"]["strokeOpacity"]=polyline.strokeOpacity;static_map_options["polyline"]["strokeWeight"]=polyline.strokeWeight}return GMaps.staticMapURL(static_map_options)};GMaps.staticMapURL=function(options){var parameters=[],data,static_root=(location.protocol==="file:"?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";if(options.url){static_root=options.url;delete options.url}static_root+="?";var markers=options.markers;delete options.markers;if(!markers&&options.marker){markers=[options.marker];delete options.marker}var styles=options.styles;delete options.styles;var polyline=options.polyline;delete options.polyline;if(options.center){parameters.push("center="+options.center);delete options.center}else if(options.address){parameters.push("center="+options.address);delete options.address}else if(options.lat){parameters.push(["center=",options.lat,",",options.lng].join(""));delete options.lat;delete options.lng}else if(options.visible){var visible=encodeURI(options.visible.join("|"));parameters.push("visible="+visible)}var size=options.size;if(size){if(size.join){size=size.join("x")}delete options.size}else{size="630x300"}parameters.push("size="+size);if(!options.zoom&&options.zoom!==false){options.zoom=15}var sensor=options.hasOwnProperty("sensor")?!!options.sensor:true;delete options.sensor;parameters.push("sensor="+sensor);for(var param in options){if(options.hasOwnProperty(param)){parameters.push(param+"="+options[param])}}if(markers){var marker,loc;for(var i=0;data=markers[i];i++){marker=[];if(data.size&&data.size!=="normal"){marker.push("size:"+data.size);delete data.size}else if(data.icon){marker.push("icon:"+encodeURI(data.icon));delete data.icon}if(data.color){marker.push("color:"+data.color.replace("#","0x"));delete data.color}if(data.label){marker.push("label:"+data.label[0].toUpperCase());delete data.label}loc=data.address?data.address:data.lat+","+data.lng;delete data.address;delete data.lat;delete data.lng;for(var param in data){if(data.hasOwnProperty(param)){marker.push(param+":"+data[param])}}if(marker.length||i===0){marker.push(loc);marker=marker.join("|");parameters.push("markers="+encodeURI(marker))}else{marker=parameters.pop()+encodeURI("|"+loc);parameters.push(marker)}}}if(styles){for(var i=0;i<styles.length;i++){var styleRule=[];if(styles[i].featureType){styleRule.push("feature:"+styles[i].featureType.toLowerCase())}if(styles[i].elementType){styleRule.push("element:"+styles[i].elementType.toLowerCase())}for(var j=0;j<styles[i].stylers.length;j++){for(var p in styles[i].stylers[j]){var ruleArg=styles[i].stylers[j][p];if(p=="hue"||p=="color"){ruleArg="0x"+ruleArg.substring(1)}styleRule.push(p+":"+ruleArg)}}var rule=styleRule.join("|");if(rule!=""){parameters.push("style="+rule)}}}function parseColor(color,opacity){if(color[0]==="#"){color=color.replace("#","0x");if(opacity){opacity=parseFloat(opacity);opacity=Math.min(1,Math.max(opacity,0));if(opacity===0){return"0x00000000"}opacity=(opacity*255).toString(16);if(opacity.length===1){opacity+=opacity}color=color.slice(0,8)+opacity}}return color}if(polyline){data=polyline;polyline=[];if(data.strokeWeight){polyline.push("weight:"+parseInt(data.strokeWeight,10))}if(data.strokeColor){var color=parseColor(data.strokeColor,data.strokeOpacity);polyline.push("color:"+color)}if(data.fillColor){var fillcolor=parseColor(data.fillColor,data.fillOpacity);polyline.push("fillcolor:"+fillcolor)}var path=data.path;if(path.join){for(var j=0,pos;pos=path[j];j++){polyline.push(pos.join(","))}}else{polyline.push("enc:"+path)}polyline=polyline.join("|");parameters.push("path="+encodeURI(polyline))}var dpi=window.devicePixelRatio||1;parameters.push("scale="+dpi);parameters=parameters.join("&");return static_root+parameters};GMaps.prototype.addMapType=function(mapTypeId,options){if(options.hasOwnProperty("getTileUrl")&&typeof options["getTileUrl"]=="function"){options.tileSize=options.tileSize||new google.maps.Size(256,256);var mapType=new google.maps.ImageMapType(options);this.map.mapTypes.set(mapTypeId,mapType)}else{throw"'getTileUrl' function required."}};GMaps.prototype.addOverlayMapType=function(options){if(options.hasOwnProperty("getTile")&&typeof options["getTile"]=="function"){var overlayMapTypeIndex=options.index;delete options.index;this.map.overlayMapTypes.insertAt(overlayMapTypeIndex,options)}else{throw"'getTile' function required."}};GMaps.prototype.removeOverlayMapType=function(overlayMapTypeIndex){this.map.overlayMapTypes.removeAt(overlayMapTypeIndex)};GMaps.prototype.addStyle=function(options){var styledMapType=new google.maps.StyledMapType(options.styles,{name:options.styledMapName});this.map.mapTypes.set(options.mapTypeId,styledMapType)};GMaps.prototype.setStyle=function(mapTypeId){this.map.setMapTypeId(mapTypeId)};GMaps.prototype.createPanorama=function(streetview_options){if(!streetview_options.hasOwnProperty("lat")||!streetview_options.hasOwnProperty("lng")){streetview_options.lat=this.getCenter().lat();streetview_options.lng=this.getCenter().lng()}this.panorama=GMaps.createPanorama(streetview_options);this.map.setStreetView(this.panorama);return this.panorama};GMaps.createPanorama=function(options){var el=getElementById(options.el,options.context);options.position=new google.maps.LatLng(options.lat,options.lng);delete options.el;delete options.context;delete options.lat;delete options.lng;var streetview_events=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],streetview_options=extend_object({visible:true},options);for(var i=0;i<streetview_events.length;i++){delete streetview_options[streetview_events[i]]}var panorama=new google.maps.StreetViewPanorama(el,streetview_options);for(var i=0;i<streetview_events.length;i++){(function(object,name){if(options[name]){google.maps.event.addListener(object,name,function(){options[name].apply(this)})}})(panorama,streetview_events[i])}return panorama};GMaps.prototype.on=function(event_name,handler){return GMaps.on(event_name,this,handler)};GMaps.prototype.off=function(event_name){GMaps.off(event_name,this)};GMaps.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];GMaps.on=function(event_name,object,handler){if(GMaps.custom_events.indexOf(event_name)==-1){if(object instanceof GMaps)object=object.map;return google.maps.event.addListener(object,event_name,handler)}else{var registered_event={handler:handler,eventName:event_name};object.registered_events[event_name]=object.registered_events[event_name]||[];object.registered_events[event_name].push(registered_event);return registered_event}};GMaps.off=function(event_name,object){if(GMaps.custom_events.indexOf(event_name)==-1){if(object instanceof GMaps)object=object.map;google.maps.event.clearListeners(object,event_name)}else{object.registered_events[event_name]=[]}};GMaps.fire=function(event_name,object,scope){if(GMaps.custom_events.indexOf(event_name)==-1){google.maps.event.trigger(object,event_name,Array.prototype.slice.apply(arguments).slice(2))}else{if(event_name in scope.registered_events){var firing_events=scope.registered_events[event_name];for(var i=0;i<firing_events.length;i++){(function(handler,scope,object){handler.apply(scope,[object])})(firing_events[i]["handler"],scope,object)}}}};GMaps.geolocate=function(options){var complete_callback=options.always||options.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){options.success(position);if(complete_callback){complete_callback()}},function(error){options.error(error);if(complete_callback){complete_callback()}},options.options)}else{options.not_supported();if(complete_callback){complete_callback()}}};GMaps.geocode=function(options){this.geocoder=new google.maps.Geocoder;var callback=options.callback;if(options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")){options.latLng=new google.maps.LatLng(options.lat,options.lng)}delete options.lat;delete options.lng;delete options.callback;this.geocoder.geocode(options,function(results,status){callback(results,status)})};if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(latLng){var bounds=new google.maps.LatLngBounds;var paths=this.getPaths();var path;for(var p=0;p<paths.getLength();p++){path=paths.getAt(p);for(var i=0;i<path.getLength();i++){bounds.extend(path.getAt(i))}}return bounds}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(latLng){var bounds=this.getBounds();if(bounds!==null&&!bounds.contains(latLng)){return false}var inPoly=false;var numPaths=this.getPaths().getLength();for(var p=0;p<numPaths;p++){var path=this.getPaths().getAt(p);var numPoints=path.getLength();var j=numPoints-1;for(var i=0;i<numPoints;i++){var vertex1=path.getAt(i);var vertex2=path.getAt(j);if(vertex1.lng()<latLng.lng()&&vertex2.lng()>=latLng.lng()||vertex2.lng()<latLng.lng()&&vertex1.lng()>=latLng.lng()){if(vertex1.lat()+(latLng.lng()-vertex1.lng())/(vertex2.lng()-vertex1.lng())*(vertex2.lat()-vertex1.lat())<latLng.lat()){inPoly=!inPoly}}j=i}}return inPoly}}if(!google.maps.Circle.prototype.containsLatLng){google.maps.Circle.prototype.containsLatLng=function(latLng){if(google.maps.geometry){return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),latLng)<=this.getRadius()}else{return true}}}google.maps.LatLngBounds.prototype.containsLatLng=function(latLng){return this.contains(latLng)};google.maps.Marker.prototype.setFences=function(fences){this.fences=fences};google.maps.Marker.prototype.addFence=function(fence){this.fences.push(fence)};google.maps.Marker.prototype.getId=function(){return this["__gm_id"]};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this==null){throw new TypeError}var t=Object(this);var len=t.length>>>0;if(len===0){return-1}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=len){return-1}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}return-1}}return GMaps});(function(root,factory){if(typeof define==="function"&&define.amd){define(factory)}else{root.Dragdealer=factory()}})(this,function(){var Dragdealer=function(wrapper,options){this.options=this.applyDefaults(options||{});this.bindMethods();this.wrapper=this.getWrapperElement(wrapper);if(!this.wrapper){return}this.handle=this.getHandleElement(this.wrapper,this.options.handleClass);if(!this.handle){return}this.init();this.bindEventListeners()};Dragdealer.prototype={defaults:{disabled:false,horizontal:true,vertical:false,slide:true,steps:0,snap:false,loose:false,speed:.1,xPrecision:0,yPrecision:0,handleClass:"handle",css3:true,activeClass:"active",tapping:true},init:function(){if(this.options.css3){triggerWebkitHardwareAcceleration(this.handle)}this.value={prev:[-1,-1],current:[this.options.x||0,this.options.y||0],target:[this.options.x||0,this.options.y||0]};this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]};this.dragStartPosition={x:0,y:0};this.change=[0,0];this.stepRatios=this.calculateStepRatios();this.activity=false;this.dragging=false;this.tapping=false;this.reflow();if(this.options.disabled){this.disable()}},applyDefaults:function(options){for(var k in this.defaults){if(!options.hasOwnProperty(k)){options[k]=this.defaults[k]}}return options},getWrapperElement:function(wrapper){if(typeof wrapper=="string"){return document.getElementById(wrapper)}else{return wrapper}},getHandleElement:function(wrapper,handleClass){var childElements,handleClassMatcher,i;if(wrapper.getElementsByClassName){childElements=wrapper.getElementsByClassName(handleClass);if(childElements.length>0){return childElements[0]}}else{handleClassMatcher=new RegExp("(^|\\s)"+handleClass+"(\\s|$)");childElements=wrapper.getElementsByTagName("*");for(i=0;i<childElements.length;i++){if(handleClassMatcher.test(childElements[i].className)){return childElements[i]}}}},calculateStepRatios:function(){var stepRatios=[];if(this.options.steps>=1){for(var i=0;i<=this.options.steps-1;i++){if(this.options.steps>1){stepRatios[i]=i/(this.options.steps-1)}else{stepRatios[i]=0}}}return stepRatios},setWrapperOffset:function(){this.offset.wrapper=Position.get(this.wrapper)},calculateBounds:function(){var bounds={top:this.options.top||0,bottom:-(this.options.bottom||0)+this.wrapper.offsetHeight,left:this.options.left||0,right:-(this.options.right||0)+this.wrapper.offsetWidth};bounds.availWidth=bounds.right-bounds.left-this.handle.offsetWidth;bounds.availHeight=bounds.bottom-bounds.top-this.handle.offsetHeight;return bounds},calculateValuePrecision:function(){var xPrecision=this.options.xPrecision||Math.abs(this.bounds.availWidth),yPrecision=this.options.yPrecision||Math.abs(this.bounds.availHeight);return[xPrecision?1/xPrecision:0,yPrecision?1/yPrecision:0]},bindMethods:function(){if(typeof this.options.customRequestAnimationFrame==="function"){this.requestAnimationFrame=bind(this.options.customRequestAnimationFrame,window)}else{this.requestAnimationFrame=bind(requestAnimationFrame,window)}if(typeof this.options.customCancelAnimationFrame==="function"){this.cancelAnimationFrame=bind(this.options.customCancelAnimationFrame,window)}else{this.cancelAnimationFrame=bind(cancelAnimationFrame,window)}this.animateWithRequestAnimationFrame=bind(this.animateWithRequestAnimationFrame,this);this.animate=bind(this.animate,this);this.onHandleMouseDown=bind(this.onHandleMouseDown,this);this.onHandleTouchStart=bind(this.onHandleTouchStart,this);this.onDocumentMouseMove=bind(this.onDocumentMouseMove,this);this.onWrapperTouchMove=bind(this.onWrapperTouchMove,this);this.onWrapperMouseDown=bind(this.onWrapperMouseDown,this);this.onWrapperTouchStart=bind(this.onWrapperTouchStart,this);this.onDocumentMouseUp=bind(this.onDocumentMouseUp,this);this.onDocumentTouchEnd=bind(this.onDocumentTouchEnd,this);this.onHandleClick=bind(this.onHandleClick,this);this.onWindowResize=bind(this.onWindowResize,this)},bindEventListeners:function(){addEventListener(this.handle,"mousedown",this.onHandleMouseDown);addEventListener(this.handle,"touchstart",this.onHandleTouchStart);addEventListener(document,"mousemove",this.onDocumentMouseMove);addEventListener(this.wrapper,"touchmove",this.onWrapperTouchMove);addEventListener(this.wrapper,"mousedown",this.onWrapperMouseDown);addEventListener(this.wrapper,"touchstart",this.onWrapperTouchStart);addEventListener(document,"mouseup",this.onDocumentMouseUp);addEventListener(document,"touchend",this.onDocumentTouchEnd);addEventListener(this.handle,"click",this.onHandleClick);addEventListener(window,"resize",this.onWindowResize);this.animate(false,true);this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},unbindEventListeners:function(){removeEventListener(this.handle,"mousedown",this.onHandleMouseDown);removeEventListener(this.handle,"touchstart",this.onHandleTouchStart);removeEventListener(document,"mousemove",this.onDocumentMouseMove);removeEventListener(this.wrapper,"touchmove",this.onWrapperTouchMove);removeEventListener(this.wrapper,"mousedown",this.onWrapperMouseDown);removeEventListener(this.wrapper,"touchstart",this.onWrapperTouchStart);removeEventListener(document,"mouseup",this.onDocumentMouseUp);removeEventListener(document,"touchend",this.onDocumentTouchEnd);removeEventListener(this.handle,"click",this.onHandleClick);removeEventListener(window,"resize",this.onWindowResize);this.cancelAnimationFrame(this.interval)},onHandleMouseDown:function(e){Cursor.refresh(e);preventEventDefaults(e);this.activity=false;this.startDrag()},onHandleTouchStart:function(e){Cursor.refresh(e);this.activity=false;this.startDrag()},onDocumentMouseMove:function(e){Cursor.refresh(e);if(this.dragging){this.activity=true;preventEventDefaults(e)}},onWrapperTouchMove:function(e){Cursor.refresh(e);if(!this.activity&&this.draggingOnDisabledAxis()){if(this.dragging){this.stopDrag(e)}return}preventEventDefaults(e);this.activity=true},onWrapperMouseDown:function(e){Cursor.refresh(e);preventEventDefaults(e);this.startTap()},onWrapperTouchStart:function(e){Cursor.refresh(e);preventEventDefaults(e);this.startTap()},onDocumentMouseUp:function(e){this.stopDrag(e);this.stopTap()},onDocumentTouchEnd:function(e){this.stopDrag(e);this.stopTap()},onHandleClick:function(e){if(this.activity){preventEventDefaults(e);stopEventPropagation(e)}},onWindowResize:function(e){this.reflow()},enable:function(){this.disabled=false;this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=true;this.handle.className+=" disabled"},reflow:function(){this.setWrapperOffset();this.bounds=this.calculateBounds();this.valuePrecision=this.calculateValuePrecision();this.updateOffsetFromValue()},getStep:function(){return[this.getStepNumber(this.value.target[0]),this.getStepNumber(this.value.target[1])]},getStepWidth:function(){return Math.abs(this.bounds.availWidth/this.options.steps)},getValue:function(){return this.value.target},setStep:function(x,y,snap){this.setValue(this.options.steps&&x>1?(x-1)/(this.options.steps-1):0,this.options.steps&&y>1?(y-1)/(this.options.steps-1):0,snap)},setValue:function(x,y,snap){this.setTargetValue([x,y||0]);if(snap){this.groupCopy(this.value.current,this.value.target);this.updateOffsetFromValue();this.callAnimationCallback()}},startTap:function(){if(this.disabled||!this.options.tapping){return}this.tapping=true;this.setWrapperOffset();this.setTargetValueByOffset([Cursor.x-this.offset.wrapper[0]-this.handle.offsetWidth/2,Cursor.y-this.offset.wrapper[1]-this.handle.offsetHeight/2])},stopTap:function(){if(this.disabled||!this.tapping){return}this.tapping=false;this.setTargetValue(this.value.current)},startDrag:function(){if(this.disabled){return}this.dragging=true;this.setWrapperOffset();this.dragStartPosition={x:Cursor.x,y:Cursor.y};this.offset.mouse=[Cursor.x-Position.get(this.handle)[0],Cursor.y-Position.get(this.handle)[1]];if(!this.wrapper.className.match(this.options.activeClass)){this.wrapper.className+=" "+this.options.activeClass}this.callDragStartCallback()},stopDrag:function(e){if(this.disabled||!this.dragging){return}this.dragging=false;var deltaX=this.bounds.availWidth===0?0:(Cursor.x-this.dragStartPosition.x)/this.bounds.availWidth,deltaY=this.bounds.availHeight===0?0:(Cursor.y-this.dragStartPosition.y)/this.bounds.availHeight,delta=[deltaX,deltaY];var target=this.groupClone(this.value.current);if(this.options.slide){var ratioChange=this.change;target[0]+=ratioChange[0]*4;target[1]+=ratioChange[1]*4}this.setTargetValue(target);this.wrapper.className=this.wrapper.className.replace(" "+this.options.activeClass,"");this.callDragStopCallback(delta)},callAnimationCallback:function(){var value=this.value.current;if(this.options.snap&&this.options.steps>1){value=this.getClosestSteps(value)}if(!this.groupCompare(value,this.value.prev)){if(typeof this.options.animationCallback=="function"){this.options.animationCallback.call(this,value[0],value[1])}this.groupCopy(this.value.prev,value)}},callTargetCallback:function(){if(typeof this.options.callback=="function"){this.options.callback.call(this,this.value.target[0],this.value.target[1])}},callDragStartCallback:function(){if(typeof this.options.dragStartCallback=="function"){this.options.dragStartCallback.call(this,this.value.target[0],this.value.target[1])}},callDragStopCallback:function(delta){if(typeof this.options.dragStopCallback=="function"){this.options.dragStopCallback.call(this,this.value.target[0],this.value.target[1],delta)}},animateWithRequestAnimationFrame:function(time){if(time){this.timeOffset=this.timeStamp?time-this.timeStamp:0;this.timeStamp=time}else{this.timeOffset=25}this.animate();this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},animate:function(direct,first){if(direct&&!this.dragging){return}if(this.dragging){var prevTarget=this.groupClone(this.value.target);var offset=[Cursor.x-this.offset.wrapper[0]-this.offset.mouse[0],Cursor.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetValueByOffset(offset,this.options.loose);this.change=[this.value.target[0]-prevTarget[0],this.value.target[1]-prevTarget[1]]}if(this.dragging||first){this.groupCopy(this.value.current,this.value.target)}if(this.dragging||this.glide()||first){this.updateOffsetFromValue();this.callAnimationCallback()}},glide:function(){var diff=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];if(!diff[0]&&!diff[1]){return false}if(Math.abs(diff[0])>this.valuePrecision[0]||Math.abs(diff[1])>this.valuePrecision[1]){this.value.current[0]+=diff[0]*Math.min(this.options.speed*this.timeOffset/25,1);this.value.current[1]+=diff[1]*Math.min(this.options.speed*this.timeOffset/25,1)}else{this.groupCopy(this.value.current,this.value.target)}return true},updateOffsetFromValue:function(){if(!this.options.snap){this.offset.current=this.getOffsetsByRatios(this.value.current)}else{this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current))}if(!this.groupCompare(this.offset.current,this.offset.prev)){this.renderHandlePosition();this.groupCopy(this.offset.prev,this.offset.current)}},renderHandlePosition:function(){var transform="";if(this.options.css3&&StylePrefix.transform){if(this.options.horizontal){transform+="translateX("+this.offset.current[0]+"px)"}if(this.options.vertical){transform+=" translateY("+this.offset.current[1]+"px)"}this.handle.style[StylePrefix.transform]=transform;return}if(this.options.horizontal){this.handle.style.left=this.offset.current[0]+"px"}if(this.options.vertical){this.handle.style.top=this.offset.current[1]+"px"}},setTargetValue:function(value,loose){var target=loose?this.getLooseValue(value):this.getProperValue(value);this.groupCopy(this.value.target,target);this.offset.target=this.getOffsetsByRatios(target);this.callTargetCallback()},setTargetValueByOffset:function(offset,loose){var value=this.getRatiosByOffsets(offset);var target=loose?this.getLooseValue(value):this.getProperValue(value);this.groupCopy(this.value.target,target);this.offset.target=this.getOffsetsByRatios(target)},getLooseValue:function(value){var proper=this.getProperValue(value);return[proper[0]+(value[0]-proper[0])/4,proper[1]+(value[1]-proper[1])/4]},getProperValue:function(value){var proper=this.groupClone(value);proper[0]=Math.max(proper[0],0);proper[1]=Math.max(proper[1],0);proper[0]=Math.min(proper[0],1);proper[1]=Math.min(proper[1],1);if(!this.dragging&&!this.tapping||this.options.snap){if(this.options.steps>1){proper=this.getClosestSteps(proper)}}return proper},getRatiosByOffsets:function(group){return[this.getRatioByOffset(group[0],this.bounds.availWidth,this.bounds.left),this.getRatioByOffset(group[1],this.bounds.availHeight,this.bounds.top)]},getRatioByOffset:function(offset,range,padding){return range?(offset-padding)/range:0},getOffsetsByRatios:function(group){return[this.getOffsetByRatio(group[0],this.bounds.availWidth,this.bounds.left),this.getOffsetByRatio(group[1],this.bounds.availHeight,this.bounds.top)]},getOffsetByRatio:function(ratio,range,padding){return Math.round(ratio*range)+padding},getStepNumber:function(value){return this.getClosestStep(value)*(this.options.steps-1)+1;
},getClosestSteps:function(group){return[this.getClosestStep(group[0]),this.getClosestStep(group[1])]},getClosestStep:function(value){var k=0;var min=1;for(var i=0;i<=this.options.steps-1;i++){if(Math.abs(this.stepRatios[i]-value)<min){min=Math.abs(this.stepRatios[i]-value);k=i}}return this.stepRatios[k]},groupCompare:function(a,b){return a[0]==b[0]&&a[1]==b[1]},groupCopy:function(a,b){a[0]=b[0];a[1]=b[1]},groupClone:function(a){return[a[0],a[1]]},draggingOnDisabledAxis:function(){return!this.options.horizontal&&Cursor.xDiff>Cursor.yDiff||!this.options.vertical&&Cursor.yDiff>Cursor.xDiff}};var bind=function(fn,context){return function(){return fn.apply(context,arguments)}};var addEventListener=function(element,type,callback){if(element.addEventListener){element.addEventListener(type,callback,false)}else if(element.attachEvent){element.attachEvent("on"+type,callback)}};var removeEventListener=function(element,type,callback){if(element.removeEventListener){element.removeEventListener(type,callback,false)}else if(element.detachEvent){element.detachEvent("on"+type,callback)}};var preventEventDefaults=function(e){if(!e){e=window.event}if(e.preventDefault){e.preventDefault()}e.returnValue=false};var stopEventPropagation=function(e){if(!e){e=window.event}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true};var Cursor={x:0,y:0,xDiff:0,yDiff:0,refresh:function(e){if(!e){e=window.event}if(e.type=="mousemove"){this.set(e)}else if(e.touches){this.set(e.touches[0])}},set:function(e){var lastX=this.x,lastY=this.y;if(e.clientX||e.clientY){this.x=e.clientX;this.y=e.clientY}else if(e.pageX||e.pageY){this.x=e.pageX-document.body.scrollLeft-document.documentElement.scrollLeft;this.y=e.pageY-document.body.scrollTop-document.documentElement.scrollTop}this.xDiff=Math.abs(this.x-lastX);this.yDiff=Math.abs(this.y-lastY)}};var Position={get:function(obj){var rect={left:0,top:0};if(obj.getBoundingClientRect!==undefined){rect=obj.getBoundingClientRect()}return[rect.left,rect.top]}};var StylePrefix={transform:getPrefixedStylePropName("transform"),perspective:getPrefixedStylePropName("perspective"),backfaceVisibility:getPrefixedStylePropName("backfaceVisibility")};function getPrefixedStylePropName(propName){var domPrefixes="Webkit Moz ms O".split(" "),elStyle=document.documentElement.style;if(elStyle[propName]!==undefined)return propName;propName=propName.charAt(0).toUpperCase()+propName.substr(1);for(var i=0;i<domPrefixes.length;i++){if(elStyle[domPrefixes[i]+propName]!==undefined){return domPrefixes[i]+propName}}}function triggerWebkitHardwareAcceleration(element){if(StylePrefix.backfaceVisibility&&StylePrefix.perspective){element.style[StylePrefix.perspective]="1000px";element.style[StylePrefix.backfaceVisibility]="hidden"}}var vendors=["webkit","moz"];var requestAnimationFrame=window.requestAnimationFrame;var cancelAnimationFrame=window.cancelAnimationFrame;for(var x=0;x<vendors.length&&!requestAnimationFrame;++x){requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!requestAnimationFrame){requestAnimationFrame=function(callback){return setTimeout(callback,25)};cancelAnimationFrame=clearTimeout}return Dragdealer});!function(a,b,c){"use strict";var d=b.isDefined,e=b.isUndefined,f=b.isNumber,g=b.isObject,h=b.isArray,i=b.extend,j=b.toJson,k=b.module("LocalStorageModule",[]);k.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){return this.prefix=a,this},this.setStorageType=function(a){return this.storageType=a,this},this.setStorageCookie=function(a,b){return this.cookie.expiry=a,this.cookie.path=b,this},this.setStorageCookieDomain=function(a){return this.cookie.domain=a,this},this.setNotify=function(a,b){return this.notify={setItem:a,removeItem:b},this},this.$get=["$rootScope","$window","$document","$parse",function(a,b,c,k){var l,m=this,n=m.prefix,o=m.cookie,p=m.notify,q=m.storageType;c?c[0]&&(c=c[0]):c=document,"."!==n.substr(-1)&&(n=n?n+".":"");var r=function(a){return n+a},s=function(){try{var c=q in b&&null!==b[q],d=r("__"+Math.round(1e7*Math.random()));return c&&(l=b[q],l.setItem(d,""),l.removeItem(d)),c}catch(e){return q="cookie",a.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),t=function(b,c){if(c=e(c)?null:j(c),!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),z(b,c);try{l&&l.setItem(r(b),c),p.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:m.storageType})}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),z(b,c)}return!0},u=function(b){if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),A(b);var c=l?l.getItem(r(b)):null;if(!c||"null"===c)return null;try{return JSON.parse(c)}catch(d){return c}},v=function(){var b,c;for(b=0;b<arguments.length;b++)if(c=arguments[b],s&&"cookie"!==m.storageType)try{l.removeItem(r(c)),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:m.storageType})}catch(d){a.$broadcast("LocalStorageModule.notification.error",d.message),B(c)}else s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),p.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:"cookie"}),B(c)},w=function(){if(!s)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var b=n.length,c=[];for(var d in l)if(d.substr(0,b)===n)try{c.push(d.substr(b))}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return c},x=function(b){var c=n?new RegExp("^"+n):new RegExp,d=b?new RegExp(b):new RegExp;if(!s||"cookie"===m.storageType)return s||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C();var e=n.length;for(var f in l)if(c.test(f)&&d.test(f.substr(e)))try{v(f.substr(e))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.message),C()}return!0},y=function(){try{return b.navigator.cookieEnabled||"cookie"in c&&(c.cookie.length>0||(c.cookie="test").indexOf.call(c.cookie,"test")>-1)}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),!1}}(),z=function(b,d,i){if(e(d))return!1;if((h(d)||g(d))&&(d=j(d)),!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var k="",l=new Date,m="";if(null===d?(l.setTime(l.getTime()+-864e5),k="; expires="+l.toGMTString(),d=""):f(i)&&0!==i?(l.setTime(l.getTime()+24*i*60*60*1e3),k="; expires="+l.toGMTString()):0!==o.expiry&&(l.setTime(l.getTime()+24*o.expiry*60*60*1e3),k="; expires="+l.toGMTString()),b){var n="; path="+o.path;o.domain&&(m="; domain="+o.domain),c.cookie=r(b)+"="+encodeURIComponent(d)+k+n+m}}catch(p){return a.$broadcast("LocalStorageModule.notification.error",p.message),!1}return!0},A=function(b){if(!y)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var d=c.cookie&&c.cookie.split(";")||[],e=0;e<d.length;e++){for(var f=d[e];" "===f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(r(b)+"=")){var g=decodeURIComponent(f.substring(n.length+b.length+1,f.length));try{return JSON.parse(g)}catch(h){return g}}}return null},B=function(a){z(a,null)},C=function(){for(var a=null,b=n.length,d=c.cookie.split(";"),e=0;e<d.length;e++){for(a=d[e];" "===a.charAt(0);)a=a.substring(1,a.length);var f=a.substring(b,a.indexOf("="));B(f)}},D=function(){return q},E=function(a,b,c,e){e=e||b;var f=u(e);return null===f&&d(c)?f=c:g(f)&&g(c)&&(f=i(c,f)),k(b).assign(a,f),a.$watch(b,function(a){t(e,a)},g(a[b]))},F=function(){for(var a=0,c=b[q],d=0;d<c.length;d++)0===c.key(d).indexOf(n)&&a++;return a};return{isSupported:s,getStorageType:D,set:t,add:t,get:u,keys:w,remove:v,clearAll:x,bind:E,deriveKey:r,length:F,cookie:{isSupported:y,set:z,add:z,get:A,remove:B,clearAll:C}}}]})}(window,window.angular);(function(){angular.module("ionic.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",function($scope,$attrs,ratingConfig){var ngModelCtrl;ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){var max,ratingStates;ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn;this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max;ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(max);return $scope.range=this.buildTemplateObjects(ratingStates)};this.buildTemplateObjects=function(states){var i,j,len,ref;ref=states.length;for(j=0,len=ref.length;j<len;j++){i=ref[j];states[i]=angular.extend({index:1},{stateOn:this.stateOn,stateOff:this.stateOff},states[i])}return states};$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){ngModelCtrl.$setViewValue(value);return ngModelCtrl.$render()}};$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue;return $scope.onLeave()};$scope.enter=function(value){if(!$scope.readonly){$scope.value=value}return $scope.onHover({value:value})};$scope.onKeydown=function(evt){if(/(37|38|39|40)/.test(evt.which)){evt.preventDefault();evt.stopPropagation();return $scope.rate($scope.value+(evt.which===38||evt.which===39?{1:-1}:void 0))}};this.render=function(){return $scope.value=ngModelCtrl.$viewValue};return this}).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",template:'<ul class="rating" ng-mouseleave="reset()" ng-keydown="onKeydown($event)">'+'<li ng-repeat="r in range track by $index" ng-click="rate($index + 1)"><i class="icon" ng-class="$index < value && (r.stateOn || \'ion-ios-star\') || (r.stateOff || \'ion-ios-star-outline\')"></i></li>'+"</ul>",replace:true,link:function(scope,element,attrs,ctrls){var ngModelCtrl,ratingCtrl;ratingCtrl=ctrls[0];ngModelCtrl=ctrls[1];if(ngModelCtrl){return ratingCtrl.init(ngModelCtrl)}}}})}).call(this);function InfoBubble(opt_options){this.extend(InfoBubble,google.maps.OverlayView);this.tabs_=[];this.activeTab_=null;this.baseZIndex_=100;this.isOpen_=false;var options=opt_options||{};if(options["backgroundColor"]==undefined){options["backgroundColor"]=this.BACKGROUND_COLOR_}if(options["borderColor"]==undefined){options["borderColor"]=this.BORDER_COLOR_}if(options["borderRadius"]==undefined){options["borderRadius"]=this.BORDER_RADIUS_}if(options["borderWidth"]==undefined){options["borderWidth"]=this.BORDER_WIDTH_}if(options["padding"]==undefined){options["padding"]=this.PADDING_}if(options["arrowPosition"]==undefined){options["arrowPosition"]=this.ARROW_POSITION_}if(options["disableAutoPan"]==undefined){options["disableAutoPan"]=false}if(options["disableAnimation"]==undefined){options["disableAnimation"]=false}if(options["minWidth"]==undefined){options["minWidth"]=this.MIN_WIDTH_}if(options["shadowStyle"]==undefined){options["shadowStyle"]=this.SHADOW_STYLE_}if(options["arrowSize"]==undefined){options["arrowSize"]=this.ARROW_SIZE_}if(options["arrowStyle"]==undefined){options["arrowStyle"]=this.ARROW_STYLE_}if(options["closeSrc"]==undefined){options["closeSrc"]=this.CLOSE_SRC_}this.buildDom_();this.setValues(options)}window["InfoBubble"]=InfoBubble;InfoBubble.prototype.ARROW_SIZE_=15;InfoBubble.prototype.ARROW_STYLE_=0;InfoBubble.prototype.SHADOW_STYLE_=1;InfoBubble.prototype.MIN_WIDTH_=50;InfoBubble.prototype.ARROW_POSITION_=50;InfoBubble.prototype.PADDING_=10;InfoBubble.prototype.BORDER_WIDTH_=1;InfoBubble.prototype.BORDER_COLOR_="#ccc";InfoBubble.prototype.BORDER_RADIUS_=10;InfoBubble.prototype.BACKGROUND_COLOR_="#fff";InfoBubble.prototype.CLOSE_SRC_="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif";InfoBubble.prototype.extend=function(obj1,obj2){return function(object){for(var property in object.prototype){this.prototype[property]=object.prototype[property]}return this}.apply(obj1,[obj2])};InfoBubble.prototype.buildDom_=function(){var bubble=this.bubble_=document.createElement("DIV");bubble.style["position"]="absolute";bubble.style["zIndex"]=this.baseZIndex_;var tabsContainer=this.tabsContainer_=document.createElement("DIV");tabsContainer.style["position"]="relative";var close=this.close_=document.createElement("IMG");close.style["position"]="absolute";close.style["border"]=0;close.style["zIndex"]=this.baseZIndex_+1;close.style["cursor"]="pointer";close.src=this.get("closeSrc");var that=this;google.maps.event.addDomListener(close,"click",function(){that.close();google.maps.event.trigger(that,"closeclick")});var contentContainer=this.contentContainer_=document.createElement("DIV");contentContainer.className="ib-content-ctr";contentContainer.style["overflowX"]="auto";contentContainer.style["overflowY"]="auto";contentContainer.style["cursor"]="default";contentContainer.style["clear"]="both";contentContainer.style["position"]="relative";var content=this.content_=document.createElement("DIV");contentContainer.appendChild(content);var arrow=this.arrow_=document.createElement("DIV");arrow.style["position"]="relative";var arrowOuter=this.arrowOuter_=document.createElement("DIV");var arrowInner=this.arrowInner_=document.createElement("DIV");var arrowSize=this.getArrowSize_();arrowOuter.style["position"]=arrowInner.style["position"]="absolute";arrowOuter.style["left"]=arrowInner.style["left"]="50%";arrowOuter.style["height"]=arrowInner.style["height"]="0";arrowOuter.style["width"]=arrowInner.style["width"]="0";arrowOuter.style["marginLeft"]=this.px(-arrowSize);arrowOuter.style["borderWidth"]=this.px(arrowSize);arrowOuter.style["borderBottomWidth"]=0;var bubbleShadow=this.bubbleShadow_=document.createElement("DIV");bubbleShadow.style["position"]="absolute";bubble.style["display"]=bubbleShadow.style["display"]="none";bubble.appendChild(this.tabsContainer_);bubble.appendChild(close);bubble.appendChild(contentContainer);arrow.appendChild(arrowOuter);arrow.appendChild(arrowInner);bubble.appendChild(arrow);var stylesheet=document.createElement("style");stylesheet.setAttribute("type","text/css");this.animationName_="_ibani_"+Math.round(Math.random()*1e4);var css="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;"+"-webkit-animation-iteration-count:1;}"+"@-webkit-keyframes "+this.animationName_+" {from {"+"-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% "+"{-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";stylesheet.textContent=css;document.getElementsByTagName("head")[0].appendChild(stylesheet)};InfoBubble.prototype.setBackgroundClassName=function(className){this.set("backgroundClassName",className)};InfoBubble.prototype["setBackgroundClassName"]=InfoBubble.prototype.setBackgroundClassName;InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")};InfoBubble.prototype["backgroundClassName_changed"]=InfoBubble.prototype.backgroundClassName_changed;InfoBubble.prototype.setTabClassName=function(className){this.set("tabClassName",className)};InfoBubble.prototype["setTabClassName"]=InfoBubble.prototype.setTabClassName;InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()};InfoBubble.prototype["tabClassName_changed"]=InfoBubble.prototype.tabClassName_changed;InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0};InfoBubble.prototype.setArrowStyle=function(style){this.set("arrowStyle",style)};InfoBubble.prototype["setArrowStyle"]=InfoBubble.prototype.setArrowStyle;InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()};InfoBubble.prototype["arrowStyle_changed"]=InfoBubble.prototype.arrowStyle_changed;InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0};InfoBubble.prototype.setArrowSize=function(size){this.set("arrowSize",size)};InfoBubble.prototype["setArrowSize"]=InfoBubble.prototype.setArrowSize;InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()};InfoBubble.prototype["arrowSize_changed"]=InfoBubble.prototype.arrowSize_changed;InfoBubble.prototype.setArrowPosition=function(pos){this.set("arrowPosition",pos)};InfoBubble.prototype["setArrowPosition"]=InfoBubble.prototype.setArrowPosition;InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0};InfoBubble.prototype.arrowPosition_changed=function(){var pos=this.getArrowPosition_();this.arrowOuter_.style["left"]=this.arrowInner_.style["left"]=pos+"%";this.redraw_()};InfoBubble.prototype["arrowPosition_changed"]=InfoBubble.prototype.arrowPosition_changed;InfoBubble.prototype.setZIndex=function(zIndex){this.set("zIndex",zIndex)};InfoBubble.prototype["setZIndex"]=InfoBubble.prototype.setZIndex;InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_};InfoBubble.prototype.zIndex_changed=function(){var zIndex=this.getZIndex();this.bubble_.style["zIndex"]=this.baseZIndex_=zIndex;this.close_.style["zIndex"]=zIndex+1};InfoBubble.prototype["zIndex_changed"]=InfoBubble.prototype.zIndex_changed;InfoBubble.prototype.setShadowStyle=function(shadowStyle){this.set("shadowStyle",shadowStyle)};InfoBubble.prototype["setShadowStyle"]=InfoBubble.prototype.setShadowStyle;InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0};InfoBubble.prototype.shadowStyle_changed=function(){var shadowStyle=this.getShadowStyle_();var display="";var shadow="";var backgroundColor="";switch(shadowStyle){case 0:display="none";break;case 1:shadow="40px 15px 10px rgba(33,33,33,0.3)";backgroundColor="transparent";break;case 2:shadow="0 0 2px rgba(33,33,33,0.3)";backgroundColor="rgba(33,33,33,0.35)";break}this.bubbleShadow_.style["boxShadow"]=this.bubbleShadow_.style["webkitBoxShadow"]=this.bubbleShadow_.style["MozBoxShadow"]=shadow;this.bubbleShadow_.style["backgroundColor"]=backgroundColor;if(this.isOpen_){this.bubbleShadow_.style["display"]=display;this.draw()}};InfoBubble.prototype["shadowStyle_changed"]=InfoBubble.prototype.shadowStyle_changed;InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",false)};InfoBubble.prototype["showCloseButton"]=InfoBubble.prototype.showCloseButton;InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",true)};InfoBubble.prototype["hideCloseButton"]=InfoBubble.prototype.hideCloseButton;InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style["display"]=this.get("hideCloseButton")?"none":""};InfoBubble.prototype["hideCloseButton_changed"]=InfoBubble.prototype.hideCloseButton_changed;InfoBubble.prototype.setBackgroundColor=function(color){if(color){this.set("backgroundColor",color)}};InfoBubble.prototype["setBackgroundColor"]=InfoBubble.prototype.setBackgroundColor;InfoBubble.prototype.backgroundColor_changed=function(){var backgroundColor=this.get("backgroundColor");this.contentContainer_.style["backgroundColor"]=backgroundColor;this.arrowInner_.style["borderColor"]=backgroundColor+" transparent transparent";this.updateTabStyles_()};InfoBubble.prototype["backgroundColor_changed"]=InfoBubble.prototype.backgroundColor_changed;InfoBubble.prototype.setBorderColor=function(color){if(color){this.set("borderColor",color)}};InfoBubble.prototype["setBorderColor"]=InfoBubble.prototype.setBorderColor;InfoBubble.prototype.borderColor_changed=function(){var borderColor=this.get("borderColor");var contentContainer=this.contentContainer_;var arrowOuter=this.arrowOuter_;contentContainer.style["borderColor"]=borderColor;arrowOuter.style["borderColor"]=borderColor+" transparent transparent";contentContainer.style["borderStyle"]=arrowOuter.style["borderStyle"]=this.arrowInner_.style["borderStyle"]="solid";this.updateTabStyles_()};InfoBubble.prototype["borderColor_changed"]=InfoBubble.prototype.borderColor_changed;InfoBubble.prototype.setBorderRadius=function(radius){this.set("borderRadius",radius)};InfoBubble.prototype["setBorderRadius"]=InfoBubble.prototype.setBorderRadius;InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0};InfoBubble.prototype.borderRadius_changed=function(){var borderRadius=this.getBorderRadius_();var borderWidth=this.getBorderWidth_();this.contentContainer_.style["borderRadius"]=this.contentContainer_.style["MozBorderRadius"]=this.contentContainer_.style["webkitBorderRadius"]=this.bubbleShadow_.style["borderRadius"]=this.bubbleShadow_.style["MozBorderRadius"]=this.bubbleShadow_.style["webkitBorderRadius"]=this.px(borderRadius);this.tabsContainer_.style["paddingLeft"]=this.tabsContainer_.style["paddingRight"]=this.px(borderRadius+borderWidth);this.redraw_()};InfoBubble.prototype["borderRadius_changed"]=InfoBubble.prototype.borderRadius_changed;InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0};InfoBubble.prototype.setBorderWidth=function(width){this.set("borderWidth",width)};InfoBubble.prototype["setBorderWidth"]=InfoBubble.prototype.setBorderWidth;InfoBubble.prototype.borderWidth_changed=function(){var borderWidth=this.getBorderWidth_();this.contentContainer_.style["borderWidth"]=this.px(borderWidth);this.tabsContainer_.style["top"]=this.px(borderWidth);this.updateArrowStyle_();this.updateTabStyles_();this.borderRadius_changed();this.redraw_()};InfoBubble.prototype["borderWidth_changed"]=InfoBubble.prototype.borderWidth_changed;InfoBubble.prototype.updateArrowStyle_=function(){var borderWidth=this.getBorderWidth_();var arrowSize=this.getArrowSize_();var arrowStyle=this.getArrowStyle_();var arrowOuterSizePx=this.px(arrowSize);var arrowInnerSizePx=this.px(Math.max(0,arrowSize-borderWidth));var outer=this.arrowOuter_;var inner=this.arrowInner_;this.arrow_.style["marginTop"]=this.px(-borderWidth);outer.style["borderTopWidth"]=arrowOuterSizePx;inner.style["borderTopWidth"]=arrowInnerSizePx;if(arrowStyle==0||arrowStyle==1){outer.style["borderLeftWidth"]=arrowOuterSizePx;inner.style["borderLeftWidth"]=arrowInnerSizePx}else{outer.style["borderLeftWidth"]=inner.style["borderLeftWidth"]=0}if(arrowStyle==0||arrowStyle==2){outer.style["borderRightWidth"]=arrowOuterSizePx;inner.style["borderRightWidth"]=arrowInnerSizePx}else{outer.style["borderRightWidth"]=inner.style["borderRightWidth"]=0}if(arrowStyle<2){outer.style["marginLeft"]=this.px(-arrowSize);inner.style["marginLeft"]=this.px(-(arrowSize-borderWidth))}else{outer.style["marginLeft"]=inner.style["marginLeft"]=0}if(borderWidth==0){outer.style["display"]="none"}else{outer.style["display"]=""}};InfoBubble.prototype.setPadding=function(padding){this.set("padding",padding)};InfoBubble.prototype["setPadding"]=InfoBubble.prototype.setPadding;InfoBubble.prototype.setCloseSrc=function(src){if(src&&this.close_){this.close_.src=src}};InfoBubble.prototype["setCloseSrc"]=InfoBubble.prototype.setCloseSrc;InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0};InfoBubble.prototype.padding_changed=function(){var padding=this.getPadding_();this.contentContainer_.style["padding"]=this.px(padding);this.updateTabStyles_();this.redraw_()};InfoBubble.prototype["padding_changed"]=InfoBubble.prototype.padding_changed;InfoBubble.prototype.px=function(num){if(num){return num+"px"}return num};InfoBubble.prototype.addEvents_=function(){var events=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"];var bubble=this.bubble_;this.listeners_=[];for(var i=0,event;event=events[i];i++){this.listeners_.push(google.maps.event.addDomListener(bubble,event,function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}}))}};InfoBubble.prototype.onAdd=function(){if(!this.bubble_){this.buildDom_()}this.addEvents_();var panes=this.getPanes();if(panes){panes.floatPane.appendChild(this.bubble_);panes.floatShadow.appendChild(this.bubbleShadow_)}};InfoBubble.prototype["onAdd"]=InfoBubble.prototype.onAdd;InfoBubble.prototype.draw=function(){var projection=this.getProjection();if(!projection){return}var latLng=this.get("position");if(!latLng){this.close();return}var tabHeight=0;if(this.activeTab_){tabHeight=this.activeTab_.offsetHeight}var anchorHeight=this.getAnchorHeight_();var arrowSize=this.getArrowSize_();var arrowPosition=this.getArrowPosition_();arrowPosition=arrowPosition/100;var pos=projection.fromLatLngToDivPixel(latLng);var width=this.contentContainer_.offsetWidth;var height=this.bubble_.offsetHeight;if(!width){return}var top=pos.y-(height+arrowSize);if(anchorHeight){top-=anchorHeight}var left=pos.x-width*arrowPosition;this.bubble_.style["top"]=this.px(top);this.bubble_.style["left"]=this.px(left);var shadowStyle=parseInt(this.get("shadowStyle"),10);switch(shadowStyle){case 1:this.bubbleShadow_.style["top"]=this.px(top+tabHeight-1);this.bubbleShadow_.style["left"]=this.px(left);this.bubbleShadow_.style["width"]=this.px(width);this.bubbleShadow_.style["height"]=this.px(this.contentContainer_.offsetHeight-arrowSize);break;case 2:width=width*.8;if(anchorHeight){this.bubbleShadow_.style["top"]=this.px(pos.y)}else{this.bubbleShadow_.style["top"]=this.px(pos.y+arrowSize)}this.bubbleShadow_.style["left"]=this.px(pos.x-width*arrowPosition);this.bubbleShadow_.style["width"]=this.px(width);this.bubbleShadow_.style["height"]=this.px(2);break}};InfoBubble.prototype["draw"]=InfoBubble.prototype.draw;InfoBubble.prototype.onRemove=function(){if(this.bubble_&&this.bubble_.parentNode){this.bubble_.parentNode.removeChild(this.bubble_)}if(this.bubbleShadow_&&this.bubbleShadow_.parentNode){this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_)}for(var i=0,listener;listener=this.listeners_[i];i++){google.maps.event.removeListener(listener)}};InfoBubble.prototype["onRemove"]=InfoBubble.prototype.onRemove;InfoBubble.prototype.isOpen=function(){return this.isOpen_};InfoBubble.prototype["isOpen"]=InfoBubble.prototype.isOpen;InfoBubble.prototype.close=function(){if(this.bubble_){this.bubble_.style["display"]="none";this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")}if(this.bubbleShadow_){this.bubbleShadow_.style["display"]="none";this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")}this.isOpen_=false};InfoBubble.prototype["close"]=InfoBubble.prototype.close;InfoBubble.prototype.open=function(opt_map,opt_anchor){var that=this;window.setTimeout(function(){that.open_(opt_map,opt_anchor)},0)};InfoBubble.prototype.open_=function(opt_map,opt_anchor){this.updateContent_();if(opt_map){this.setMap(opt_map)}if(opt_anchor){this.set("anchor",opt_anchor);this.bindTo("anchorPoint",opt_anchor);this.bindTo("position",opt_anchor)}this.bubble_.style["display"]=this.bubbleShadow_.style["display"]="";var animation=!this.get("disableAnimation");if(animation){this.bubble_.className+=" "+this.animationName_;this.bubbleShadow_.className+=" "+this.animationName_}this.redraw_();this.isOpen_=true;var pan=!this.get("disableAutoPan");if(pan){var that=this;window.setTimeout(function(){that.panToView()},200)}};InfoBubble.prototype["open"]=InfoBubble.prototype.open;InfoBubble.prototype.setPosition=function(position){if(position){this.set("position",position)}};InfoBubble.prototype["setPosition"]=InfoBubble.prototype.setPosition;InfoBubble.prototype.getPosition=function(){return this.get("position")};InfoBubble.prototype["getPosition"]=InfoBubble.prototype.getPosition;InfoBubble.prototype.position_changed=function(){this.draw()};InfoBubble.prototype["position_changed"]=InfoBubble.prototype.position_changed;InfoBubble.prototype.panToView=function(){var projection=this.getProjection();if(!projection){return}if(!this.bubble_){return}var anchorHeight=this.getAnchorHeight_();var height=this.bubble_.offsetHeight+anchorHeight;var map=this.get("map");var mapDiv=map.getDiv();var mapHeight=mapDiv.offsetHeight;var latLng=this.getPosition();var centerPos=projection.fromLatLngToContainerPixel(map.getCenter());var pos=projection.fromLatLngToContainerPixel(latLng);var spaceTop=centerPos.y-height;var spaceBottom=mapHeight-centerPos.y;var needsTop=spaceTop<0;var deltaY=0;if(needsTop){spaceTop*=-1;deltaY=(spaceTop+spaceBottom)/2}pos.y-=deltaY;latLng=projection.fromContainerPixelToLatLng(pos);if(map.getCenter()!=latLng){map.panTo(latLng)}};InfoBubble.prototype["panToView"]=InfoBubble.prototype.panToView;InfoBubble.prototype.htmlToDocumentFragment_=function(htmlString){htmlString=htmlString.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var tempDiv=document.createElement("DIV");tempDiv.innerHTML=htmlString;if(tempDiv.childNodes.length==1){return tempDiv.removeChild(tempDiv.firstChild)}else{var fragment=document.createDocumentFragment();while(tempDiv.firstChild){fragment.appendChild(tempDiv.firstChild)}return fragment}};InfoBubble.prototype.removeChildren_=function(node){if(!node){return}var child;while(child=node.firstChild){node.removeChild(child)}};InfoBubble.prototype.setContent=function(content){this.set("content",content)};InfoBubble.prototype["setContent"]=InfoBubble.prototype.setContent;InfoBubble.prototype.getContent=function(){return this.get("content")};InfoBubble.prototype["getContent"]=InfoBubble.prototype.getContent;InfoBubble.prototype.updateContent_=function(){if(!this.content_){return}this.removeChildren_(this.content_);var content=this.getContent();if(content){if(typeof content=="string"){content=this.htmlToDocumentFragment_(content)}this.content_.appendChild(content);var that=this;var images=this.content_.getElementsByTagName("IMG");for(var i=0,image;image=images[i];i++){google.maps.event.addDomListener(image,"load",function(){that.imageLoaded_()})}google.maps.event.trigger(this,"domready")}this.redraw_()};InfoBubble.prototype.imageLoaded_=function(){var pan=!this.get("disableAutoPan");this.redraw_();if(pan&&(this.tabs_.length==0||this.activeTab_.index==0)){this.panToView()}};InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var i=0,tab;tab=this.tabs_[i];i++){this.setTabStyle_(tab.tab)}this.activeTab_.style["zIndex"]=this.baseZIndex_;var borderWidth=this.getBorderWidth_();var padding=this.getPadding_()/2;this.activeTab_.style["borderBottomWidth"]=0;this.activeTab_.style["paddingBottom"]=this.px(padding+borderWidth)}};InfoBubble.prototype.setTabStyle_=function(tab){var backgroundColor=this.get("backgroundColor");var borderColor=this.get("borderColor");var borderRadius=this.getBorderRadius_();var borderWidth=this.getBorderWidth_();var padding=this.getPadding_();var marginRight=this.px(-Math.max(padding,borderRadius));var borderRadiusPx=this.px(borderRadius);var index=this.baseZIndex_;if(tab.index){index-=tab.index}var styles={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:backgroundColor,border:this.px(borderWidth)+" solid "+borderColor,padding:this.px(padding/2)+" "+this.px(padding),marginRight:marginRight,whiteSpace:"nowrap",borderRadiusTopLeft:borderRadiusPx,MozBorderRadiusTopleft:borderRadiusPx,webkitBorderTopLeftRadius:borderRadiusPx,borderRadiusTopRight:borderRadiusPx,MozBorderRadiusTopright:borderRadiusPx,webkitBorderTopRightRadius:borderRadiusPx,zIndex:index,display:"inline"};for(var style in styles){tab.style[style]=styles[style]}var className=this.get("tabClassName");if(className!=undefined){tab.className+=" "+className}};InfoBubble.prototype.addTabActions_=function(tab){var that=this;tab.listener_=google.maps.event.addDomListener(tab,"click",function(){
that.setTabActive_(this)})};InfoBubble.prototype.setTabActive=function(index){var tab=this.tabs_[index-1];if(tab){this.setTabActive_(tab.tab)}};InfoBubble.prototype["setTabActive"]=InfoBubble.prototype.setTabActive;InfoBubble.prototype.setTabActive_=function(tab){if(!tab){this.setContent("");this.updateContent_();return}var padding=this.getPadding_()/2;var borderWidth=this.getBorderWidth_();if(this.activeTab_){var activeTab=this.activeTab_;activeTab.style["zIndex"]=this.baseZIndex_-activeTab.index;activeTab.style["paddingBottom"]=this.px(padding);activeTab.style["borderBottomWidth"]=this.px(borderWidth)}tab.style["zIndex"]=this.baseZIndex_;tab.style["borderBottomWidth"]=0;tab.style["marginBottomWidth"]="-10px";tab.style["paddingBottom"]=this.px(padding+borderWidth);this.setContent(this.tabs_[tab.index].content);this.updateContent_();this.activeTab_=tab;this.redraw_()};InfoBubble.prototype.setMaxWidth=function(width){this.set("maxWidth",width)};InfoBubble.prototype["setMaxWidth"]=InfoBubble.prototype.setMaxWidth;InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()};InfoBubble.prototype["maxWidth_changed"]=InfoBubble.prototype.maxWidth_changed;InfoBubble.prototype.setMaxHeight=function(height){this.set("maxHeight",height)};InfoBubble.prototype["setMaxHeight"]=InfoBubble.prototype.setMaxHeight;InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()};InfoBubble.prototype["maxHeight_changed"]=InfoBubble.prototype.maxHeight_changed;InfoBubble.prototype.setMinWidth=function(width){this.set("minWidth",width)};InfoBubble.prototype["setMinWidth"]=InfoBubble.prototype.setMinWidth;InfoBubble.prototype.minWidth_changed=function(){this.redraw_()};InfoBubble.prototype["minWidth_changed"]=InfoBubble.prototype.minWidth_changed;InfoBubble.prototype.setMinHeight=function(height){this.set("minHeight",height)};InfoBubble.prototype["setMinHeight"]=InfoBubble.prototype.setMinHeight;InfoBubble.prototype.minHeight_changed=function(){this.redraw_()};InfoBubble.prototype["minHeight_changed"]=InfoBubble.prototype.minHeight_changed;InfoBubble.prototype.addTab=function(label,content){var tab=document.createElement("DIV");tab.innerHTML=label;this.setTabStyle_(tab);this.addTabActions_(tab);this.tabsContainer_.appendChild(tab);this.tabs_.push({label:label,content:content,tab:tab});tab.index=this.tabs_.length-1;tab.style["zIndex"]=this.baseZIndex_-tab.index;if(!this.activeTab_){this.setTabActive_(tab)}tab.className=tab.className+" "+this.animationName_;this.redraw_()};InfoBubble.prototype["addTab"]=InfoBubble.prototype.addTab;InfoBubble.prototype.updateTab=function(index,opt_label,opt_content){if(!this.tabs_.length||index<0||index>=this.tabs_.length){return}var tab=this.tabs_[index];if(opt_label!=undefined){tab.tab.innerHTML=tab.label=opt_label}if(opt_content!=undefined){tab.content=opt_content}if(this.activeTab_==tab.tab){this.setContent(tab.content);this.updateContent_()}this.redraw_()};InfoBubble.prototype["updateTab"]=InfoBubble.prototype.updateTab;InfoBubble.prototype.removeTab=function(index){if(!this.tabs_.length||index<0||index>=this.tabs_.length){return}var tab=this.tabs_[index];tab.tab.parentNode.removeChild(tab.tab);google.maps.event.removeListener(tab.tab.listener_);this.tabs_.splice(index,1);delete tab;for(var i=0,t;t=this.tabs_[i];i++){t.tab.index=i}if(tab.tab==this.activeTab_){if(this.tabs_[index]){this.activeTab_=this.tabs_[index].tab}else if(this.tabs_[index-1]){this.activeTab_=this.tabs_[index-1].tab}else{this.activeTab_=undefined}this.setTabActive_(this.activeTab_)}this.redraw_()};InfoBubble.prototype["removeTab"]=InfoBubble.prototype.removeTab;InfoBubble.prototype.getElementSize_=function(element,opt_maxWidth,opt_maxHeight){var sizer=document.createElement("DIV");sizer.style["display"]="inline";sizer.style["position"]="absolute";sizer.style["visibility"]="hidden";if(typeof element=="string"){sizer.innerHTML=element}else{sizer.appendChild(element.cloneNode(true))}document.body.appendChild(sizer);var size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight);if(opt_maxWidth&&size.width>opt_maxWidth){sizer.style["width"]=this.px(opt_maxWidth);size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight)}if(opt_maxHeight&&size.height>opt_maxHeight){sizer.style["height"]=this.px(opt_maxHeight);size=new google.maps.Size(sizer.offsetWidth,sizer.offsetHeight)}document.body.removeChild(sizer);delete sizer;return size};InfoBubble.prototype.redraw_=function(){this.figureOutSize_();this.positionCloseButton_();this.draw()};InfoBubble.prototype.figureOutSize_=function(){var map=this.get("map");if(!map){return}var padding=this.getPadding_();var borderWidth=this.getBorderWidth_();var borderRadius=this.getBorderRadius_();var arrowSize=this.getArrowSize_();var mapDiv=map.getDiv();var gutter=arrowSize*2;var mapWidth=mapDiv.offsetWidth-gutter;var mapHeight=mapDiv.offsetHeight-gutter-this.getAnchorHeight_();var tabHeight=0;var width=this.get("minWidth")||0;var height=this.get("minHeight")||0;var maxWidth=this.get("maxWidth")||0;var maxHeight=this.get("maxHeight")||0;maxWidth=Math.min(mapWidth,maxWidth);maxHeight=Math.min(mapHeight,maxHeight);var tabWidth=0;if(this.tabs_.length){for(var i=0,tab;tab=this.tabs_[i];i++){var tabSize=this.getElementSize_(tab.tab,maxWidth,maxHeight);var contentSize=this.getElementSize_(tab.content,maxWidth,maxHeight);if(width<tabSize.width){width=tabSize.width}tabWidth+=tabSize.width;if(height<tabSize.height){height=tabSize.height}if(tabSize.height>tabHeight){tabHeight=tabSize.height}if(width<contentSize.width){width=contentSize.width}if(height<contentSize.height){height=contentSize.height}}}else{var content=this.get("content");if(typeof content=="string"){content=this.htmlToDocumentFragment_(content)}if(content){var contentSize=this.getElementSize_(content,maxWidth,maxHeight);if(width<contentSize.width){width=contentSize.width}if(height<contentSize.height){height=contentSize.height}}}if(maxWidth){width=Math.min(width,maxWidth)}if(maxHeight){height=Math.min(height,maxHeight)}width=Math.max(width,tabWidth);if(width==tabWidth){width=width+2*padding}arrowSize=arrowSize*2;width=Math.max(width,arrowSize);if(width>mapWidth){width=mapWidth}if(height>mapHeight){height=mapHeight-tabHeight}if(this.tabsContainer_){this.tabHeight_=tabHeight;this.tabsContainer_.style["width"]=this.px(tabWidth)}this.contentContainer_.style["width"]=this.px(width);this.contentContainer_.style["height"]=this.px(height)};InfoBubble.prototype.getAnchorHeight_=function(){var anchor=this.get("anchor");if(anchor){var anchorPoint=this.get("anchorPoint");if(anchorPoint){return-1*anchorPoint.y}}return 0};InfoBubble.prototype.anchorPoint_changed=function(){this.draw()};InfoBubble.prototype["anchorPoint_changed"]=InfoBubble.prototype.anchorPoint_changed;InfoBubble.prototype.positionCloseButton_=function(){var br=this.getBorderRadius_();var bw=this.getBorderWidth_();var right=2;var top=2;if(this.tabs_.length&&this.tabHeight_){top+=this.tabHeight_}top+=bw;right+=bw;var c=this.contentContainer_;if(c&&c.clientHeight<c.scrollHeight){right+=15}this.close_.style["right"]=this.px(right);this.close_.style["top"]=this.px(top)};angular.module("ion-google-place",[]).directive("ionGooglePlace",["$ionicTemplateLoader","$ionicBackdrop","$q","$timeout","$rootScope","$document","mapEngine",function($ionicTemplateLoader,$ionicBackdrop,$q,$timeout,$rootScope,$document,mapEngine){return{require:"?ngModel",restrict:"E",scope:{onSelected:"&"},template:'<input type="text" readonly="readonly" class="ion-google-place" autocomplete="off">',replace:true,link:function(scope,element,attrs,ngModel){var mapPlaces=null;if(mapEngine.getMap())mapPlaces=new google.maps.places.PlacesService(mapEngine.getMap());else{scope.$on("map@ready",function(){mapPlaces=new google.maps.places.PlacesService(mapEngine.getMap())})}scope.locations=[];var geocoder=new google.maps.Geocoder;var searchEventTimeout=undefined;var POPUP_TPL=['<div class="ion-google-place-container">','<div class="bar bar-header item-input-inset">','<label class="item-input-wrapper">','<i class="icon ion-ios7-search placeholder-icon"></i>','<input class="google-place-search" type="search" ng-model="searchQuery" placeholder="Enter an address, place or ZIP code">',"</label>",'<button class="button button-clear">',"Cancel","</button>","</div>",'<ion-content class="has-header has-header">',"<ion-list>",'<ion-item ng-repeat="location in locations" type="item-text-wrap" ng-click="selectLocation(location)">',"{{location.formatted_address}}","</ion-item>","</ion-list>","</ion-content>","</div>"].join("");var popupPromise=$ionicTemplateLoader.compile({template:POPUP_TPL,scope:scope,appendTo:$document[0].body});popupPromise.then(function(el){var searchInputElement=angular.element(el.element.find("input"));scope.selectLocation=function(location){scope.onSelected({location:location});ngModel.$setViewValue(location.formatted_address);ngModel.$render();el.element.css("display","none");$ionicBackdrop.release()};scope.$watch("searchQuery",function(query){if(searchEventTimeout)$timeout.cancel(searchEventTimeout);searchEventTimeout=$timeout(function(){if(!query)return;if(query.length<3);geocoder.geocode({address:query,componentRestrictions:{country:attrs.country||null}},function(results,status){if(status==google.maps.GeocoderStatus.OK){scope.$apply(function(){scope.locations=results});if(mapPlaces){mapPlaces.textSearch({location:mapEngine.getCenter(),query:query,radius:5e4},function(r,s){if(s==google.maps.GeocoderStatus.OK){for(var i=0;i<r.length;i++){r[i].formatted_address=r[i].name;scope.locations.push(r[i])}scope.$apply()}})}}else{}})},350)});var onClick=function(e){e.preventDefault();e.stopPropagation();$ionicBackdrop.retain();el.element.css("display","block");searchInputElement[0].focus();setTimeout(function(){searchInputElement[0].focus()},0)};var onCancel=function(e){scope.searchQuery="";$ionicBackdrop.release();el.element.css("display","none")};element.bind("click",onClick);element.bind("touchend",onClick);el.element.find("button").bind("click",onCancel)});if(attrs.placeholder){element.attr("placeholder",attrs.placeholder)}ngModel.$formatters.unshift(function(modelValue){if(!modelValue)return"";return modelValue});ngModel.$parsers.unshift(function(viewValue){return viewValue});ngModel.$render=function(){console.log(ngModel.$viewValue);if(!ngModel.$viewValue){element.val("")}else if(typeof ngModel.$viewValue==="string"){element.val(ngModel.$viewValue)}else{element.val(ngModel.$viewValue.formatted_address||"")}}}}}]);(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.angularCreditCards=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){exports=module.exports=ap;function ap(args,fn){return function(){var rest=[].slice.call(arguments),first=args.slice();first.push.apply(first,rest);return fn.apply(this,first)}}exports.pa=pa;function pa(args,fn){return function(){var rest=[].slice.call(arguments);rest.push.apply(rest,args);return fn.apply(this,rest)}}exports.apa=apa;function apa(left,right,fn){return function(){return fn.apply(this,left.concat.apply(left,arguments).concat(right))}}exports.partial=partial;function partial(fn){var args=[].slice.call(arguments,1);return ap(args,fn)}exports.partialRight=partialRight;function partialRight(fn){var args=[].slice.call(arguments,1);return pa(args,fn)}exports.curry=curry;function curry(fn){return partial(partial,fn)}exports.curryRight=function curryRight(fn){return partial(partialRight,fn)}},{}],2:[function(_dereq_,module,exports){var sentence=_dereq_("sentence-case");module.exports=function(string){return sentence(string).replace(/\./g,"_").replace(/ (\w)/g,function(_,$1){return $1.toUpperCase()})}},{"sentence-case":3}],3:[function(_dereq_,module,exports){module.exports=function(string){return String(string).replace(/([a-z])([A-Z0-9])/g,"$1 $2").replace(/[^a-zA-Z0-9]+/g,".").replace(/(?!\d\.\d)(^|.)\./g,"$1 ").replace(/^ | $/g,"").toLowerCase()}},{}],4:[function(_dereq_,module,exports){module.exports=extend;function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}}return target}},{}],5:[function(_dereq_,module,exports){"use strict";exports.types=_dereq_("./types")},{"./types":7}],6:[function(_dereq_,module,exports){"use strict";var extend=_dereq_("xtend/mutable");function CardType(name,config){extend(this,{name:name},config)}CardType.prototype.cvcLength=3;CardType.prototype.luhn=true;CardType.prototype.groupPattern=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?/;CardType.prototype.group=function(number){return(number.match(this.groupPattern)||[]).slice(1).filter(identity)};CardType.prototype.test=function(number,eager){return this[eager?"eagerPattern":"pattern"].test(number)};module.exports=CardType;function identity(value){return value}},{"xtend/mutable":4}],7:[function(_dereq_,module,exports){"use strict";var Type=_dereq_("./type");var group19=/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/;exports.visa=new Type("Visa",{pattern:/^4\d{12}(\d{3})?$/,eagerPattern:/^4/});exports.maestro=new Type("Maestro",{pattern:/^(?:5[0678]\d\d|6304|6390|67\d\d)\d{8,15}$/,eagerPattern:/^(5(018|0[23]|[68])|6[37])/,groupPattern:group19});exports.forbrugsforeningen=new Type("Forbrugsforeningen",{pattern:/^600722\d{10}$/,eagerPattern:/^600/});exports.dankort=new Type("Dankort",{pattern:/^5019\d{12}$/,eagerPattern:/^5019/});exports.masterCard=new Type("MasterCard",{pattern:/^5[1-5]\d{14}$/,eagerPattern:/^5[1-5]/});exports.americanExpress=new Type("American Express",{pattern:/^3[47]\d{13}$/,eagerPattern:/^3[47]/,groupPattern:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,cvcLength:4});exports.dinersClub=new Type("Diners Club",{pattern:/^3(0[0-5]|[68]\d)\d{11}$/,eagerPattern:/^3(0|[68])/,groupPattern:/(\d{1,4})?(\d{1,6})?(\d{1,4})?/});exports.discover=new Type("Discover",{pattern:/^6(011|[45]\d{2})\d{12}$/,eagerPattern:/^6([45]|01)/});exports.jcb=new Type("JCB",{pattern:/^35\d{14}$/,eagerPattern:/^35/});exports.unionPay=new Type("UnionPay",{pattern:/^62[0-5]\d{13,16}$/,eagerPattern:/^62/,groupPattern:group19,luhn:false})},{"./type":6}],8:[function(_dereq_,module,exports){"use strict";module.exports=function(array){return function luhn(number){if(!number)return false;var length=number.length;var bit=1;var sum=0;var value;while(length){value=parseInt(number.charAt(--length),10);sum+=(bit^=1)?array[value]:value}return!!sum&&sum%10===0}}([0,2,4,6,8,1,3,5,7,9])},{}],9:[function(_dereq_,module,exports){"use strict";var camel=_dereq_("camel-case");var luhn=_dereq_("fast-luhn");exports.types=_dereq_("creditcards-types").types;exports.parse=function(number){if(typeof number!=="string")return"";return number.replace(/[^\d]/g,"")};exports.format=function(number,separator){var type=getType(number,true);if(!type)return number;return type.group(number).join(separator||" ")};exports.type=function(number,eager){var type=getType(number,eager);return type?type.name:undefined};exports.luhn=luhn;exports.isValid=function(number,type){if(!type)type=exports.type(number);type=exports.types[camel(type)];if(!type)return false;return(!type.luhn||luhn(number))&&type.test(number)};function getType(number,eager){for(var typeName in exports.types){var type=exports.types[typeName];if(type.test(number,eager))return exports.types[typeName]}}},{"camel-case":2,"creditcards-types":5,"fast-luhn":8}],10:[function(_dereq_,module,exports){"use strict";var camel=_dereq_("camel-case");var card=_dereq_("./card");var cvcRegex=/^\d{3,4}$/;exports.isValid=function(cvc,type){if(typeof cvc!=="string")return false;if(!cvcRegex.test(cvc))return false;if(!type)return true;return card.types[camel(type)].cvcLength===cvc.length}},{"./card":9,"camel-case":2}],11:[function(_dereq_,module,exports){"use strict";exports.isPast=function(month,year){return Date.now()>=new Date(year,month)};exports.month={parse:function(month){return~~month||void 0},isValid:function(month){if(typeof month!=="number")return false;return month>=1&&month<=12}};var base=(new Date).getFullYear().toString().substr(0,2);function twoDigit(number){return number>=10?number:"0"+number}exports.year={parse:function(year,pad){year=~~year;if(!pad)return year||void 0;return~~(base+twoDigit(year))},format:function(year,strip){year=year.toString();return strip?year.substr(2,4):year},isValid:function(year){if(typeof year!=="number")return false;return year>0},isPast:function(year){return(new Date).getFullYear()>year}}},{}],12:[function(_dereq_,module,exports){"use strict";var card=exports.card=_dereq_("./card");var cvc=exports.cvc=_dereq_("./cvc");var expiration=exports.expiration=_dereq_("./expiration");exports.validate=function(cardObj){return{card:{type:card.type(cardObj.number),number:cardObj.number,expirationMonth:cardObj.expirationMonth,expirationYear:cardObj.expirationYear,cvc:cardObj.cvc},validCardNumber:card.luhn(cardObj.number),validExpirationMonth:expiration.month.isValid(cardObj.expirationMonth),validExpirationYear:expiration.year.isValid(cardObj.expirationYear),validCvc:cvc.isValid(cardObj.cvc),expired:expiration.isPast(cardObj.expirationMonth,cardObj.expirationYear)}}},{"./card":9,"./cvc":10,"./expiration":11}],13:[function(_dereq_,module,exports){var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";module.exports=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice.call(arguments,1);var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}var bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}},{}],14:[function(_dereq_,module,exports){"use strict";var cvc=_dereq_("creditcards").cvc;var bind=_dereq_("function-bind");module.exports=factory;factory.$inject=["$parse"];function factory($parse){return{restrict:"A",require:"ngModel",compile:function(element,attributes){attributes.$set("maxlength",4);attributes.$set("pattern","[0-9]*");attributes.$set("xAutocompletetype","cc-csc");return function(scope,element,attributes,ngModel){ngModel.$validators.ccCvc=function(value){return cvc.isValid(value,$parse(attributes.ccType)(scope))};if(attributes.ccType){scope.$watch(attributes.ccType,bind.call(ngModel.$validate,ngModel))}}}}}},{creditcards:12,"function-bind":13}],15:[function(_dereq_,module,exports){"use strict";var expiration=_dereq_("creditcards").expiration;var month=expiration.month;var year=expiration.year;var ap=_dereq_("ap");exports=module.exports=function ccExp(){return{restrict:"AE",require:"ccExp",controller:CcExpController,link:function(scope,element,attributes,ccExp){ccExp.$watch()}}};CcExpController.$inject=["$scope","$element"];function CcExpController($scope,$element){var nullFormCtrl={$setValidity:noop};var parentForm=$element.inheritedData("$formController")||nullFormCtrl;var ngModel={year:{},month:{}};this.setMonth=function(monthCtrl){ngModel.month=monthCtrl};this.setYear=function(yearCtrl){ngModel.year=yearCtrl};function setValidity(exp){var expMonth=exp.month;var expYear=exp.year;var valid=!!expMonth&&!!expYear&&!expiration.isPast(expMonth,expYear);parentForm.$setValidity("ccExp",valid,$element)}this.$watch=function $watchExp(){$scope.$watch(function watchExp(){return{month:ngModel.month.$modelValue,year:ngModel.year.$modelValue}},setValidity,true)}}var nullCcExp={setMonth:noop,setYear:noop};exports.month=function ccExpMonth(){return{restrict:"A",require:["ngModel","^?ccExp"],compile:function(element,attributes){attributes.$set("maxlength",2);attributes.$set("pattern","[0-9]*");attributes.$set("xAutocompletetype","cc-exp-month");return function(scope,element,attributes,controllers){var ngModel=controllers[0];var ccExp=controllers[1]||nullCcExp;ccExp.setMonth(ngModel);ngModel.$parsers.unshift(month.parse);ngModel.$validators.ccExpMonth=month.isValid}}}};exports.year=function ccExpYear(){return{restrict:"A",require:["ngModel","^?ccExp"],compile:function(element,attributes){var fullYear=attributes.fullYear!==undefined;attributes.$set("maxlength",fullYear?4:2);attributes.$set("pattern","[0-9]*");attributes.$set("xAutocompletetype","cc-exp-year");return function(scope,element,attributes,controllers){var ngModel=controllers[0];var ccExp=controllers[1]||nullCcExp;ccExp.setYear(ngModel);ngModel.$parsers.unshift(ap.partialRight(year.parse,!fullYear));ngModel.$formatters.unshift(function formatExpYear(value){return value?year.format(value,!fullYear):""});ngModel.$validators.ccExpYear=function validateExpYear(value){return year.isValid(value)&&!year.isPast(value)}}}}};function noop(){}},{ap:1,creditcards:12}],16:[function(_dereq_,module,exports){"use strict";var card=_dereq_("creditcards").card;module.exports=factory;factory.$inject=["$parse"];function factory($parse){return{restrict:"A",require:["ngModel","ccNumber"],controller:function(){this.type=null;this.eagerType=null},compile:function($element,$attributes){$attributes.$set("pattern","[0-9]*");$attributes.$set("xAutocompletetype","cc-number");return function($scope,$element,$attributes,controllers){var ngModel=controllers[0];var ccNumber=controllers[1];$scope.$watch($attributes.ngModel,function(number){ngModel.$ccType=ccNumber.type=card.type(number)});function $viewValue(){return ngModel.$viewValue}if($attributes.ccEagerType!=null){$scope.$watch($viewValue,function eagerTypeCheck(number){if(!number)return;number=card.parse(number);ngModel.$ccEagerType=ccNumber.eagerType=card.type(number,true)})}if($attributes.ccType){$scope.$watch($attributes.ccType,function(){ngModel.$validate()})}if($attributes.ccFormat!=null){$scope.$watch($viewValue,function formatInput(input,previous){if(!input)return;var element=$element[0];var formatted=card.format(card.parse(input));ngModel.$setViewValue(formatted);var selectionEnd=element.selectionEnd;ngModel.$render();if(formatted&&!formatted.charAt(selectionEnd-1).trim()){if(previous&&previous.length<input.length){selectionEnd++}else{selectionEnd--}}element.setSelectionRange(selectionEnd,selectionEnd)})}ngModel.$parsers.unshift(card.parse);ngModel.$validators.ccNumber=function validateCcNumber(number){return card.isValid(number)};ngModel.$validators.ccNumberType=function validateCcNumberType(number){return card.isValid(number,$parse($attributes.ccType)($scope))}}}}}},{creditcards:12}],17:[function(_dereq_,module,exports){(function(global){"use strict";var angular=typeof window!=="undefined"?window.angular:typeof global!=="undefined"?global.angular:null;var creditcards=_dereq_("creditcards");var number=_dereq_("./number");var cvc=_dereq_("./cvc");var expiration=_dereq_("./expiration");module.exports=angular.module("credit-cards",[]).value("creditcards",creditcards).directive("ccNumber",number).directive("ccExp",expiration).directive("ccExpMonth",expiration.month).directive("ccExpYear",expiration.year).directive("ccCvc",cvc).name}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cvc":14,"./expiration":15,"./number":16,creditcards:12}]},{},[17])(17)});(function(){var n;function e(n){var e,t,r="",o=-1,f;if(n&&n.length){f=n.length;while((o+=1)<f){e=n.charCodeAt(o);t=o+1<f?n.charCodeAt(o+1):0;if(55296<=e&&e<=56319&&56320<=t&&t<=57343){e=65536+((e&1023)<<10)+(t&1023);o+=1}if(e<=127){r+=String.fromCharCode(e)}else if(e<=2047){r+=String.fromCharCode(192|e>>>6&31,128|e&63)}else if(e<=65535){r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|e&63)}else if(e<=2097151){r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|e&63)}}}return r}function t(n){var e,t,r,o,f,i=[],h;e=t=r=o=f=0;if(n&&n.length){h=n.length;n+="";while(e<h){r=n.charCodeAt(e);t+=1;if(r<128){i[t]=String.fromCharCode(r);e+=1}else if(r>191&&r<224){o=n.charCodeAt(e+1);i[t]=String.fromCharCode((r&31)<<6|o&63);e+=2}else{o=n.charCodeAt(e+1);f=n.charCodeAt(e+2);i[t]=String.fromCharCode((r&15)<<12|(o&63)<<6|f&63);e+=3}}}return i.join("")}function r(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function o(n,e){return n<<e|n>>>32-e}function f(n,e){var t=e?"0123456789ABCDEF":"0123456789abcdef",r="",o,f=0,i=n.length;for(;f<i;f+=1){o=n.charCodeAt(f);r+=t.charAt(o>>>4&15)+t.charAt(o&15)}return r}function i(n){var e,t=n.length,r="";for(e=0;e<t;e+=1){r+=String.fromCharCode(n.charCodeAt(e)&255,n.charCodeAt(e)>>>8&255)}return r}function h(n){var e,t=n.length,r="";for(e=0;e<t;e+=1){r+=String.fromCharCode(n.charCodeAt(e)>>>8&255,n.charCodeAt(e)&255)}return r}function u(n){var e,t=n.length*32,r="";for(e=0;e<t;e+=8){r+=String.fromCharCode(n[e>>5]>>>24-e%32&255)}return r}function a(n){var e,t=n.length*32,r="";for(e=0;e<t;e+=8){r+=String.fromCharCode(n[e>>5]>>>e%32&255)}return r}function c(n){var e,t=n.length*8,r=Array(n.length>>2),o=r.length;for(e=0;e<o;e+=1){r[e]=0}for(e=0;e<t;e+=8){r[e>>5]|=(n.charCodeAt(e/8)&255)<<e%32}return r}function l(n){var e,t=n.length*8,r=Array(n.length>>2),o=r.length;for(e=0;e<o;e+=1){r[e]=0}for(e=0;e<t;e+=8){r[e>>5]|=(n.charCodeAt(e/8)&255)<<24-e%32}return r}function D(n,e){var t=e.length,r=Array(),o,f,i,h,u,a,c,l;a=Array(Math.ceil(n.length/2));h=a.length;for(o=0;o<h;o+=1){a[o]=n.charCodeAt(o*2)<<8|n.charCodeAt(o*2+1)}while(a.length>0){u=Array();i=0;for(o=0;o<a.length;o+=1){i=(i<<16)+a[o];f=Math.floor(i/t);i-=f*t;if(u.length>0||f>0){u[u.length]=f}}r[r.length]=i;a=u}c="";for(o=r.length-1;o>=0;o--){c+=e.charAt(r[o])}l=Math.ceil(n.length*8/(Math.log(e.length)/Math.log(2)));for(o=c.length;o<l;o+=1){c=e[0]+c}return c}function B(n,e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",o=n.length,f,i,h;e=e||"=";for(f=0;f<o;f+=3){h=n.charCodeAt(f)<<16|(f+1<o?n.charCodeAt(f+1)<<8:0)|(f+2<o?n.charCodeAt(f+2):0);for(i=0;i<4;i+=1){if(f*8+i*6>n.length*8){r+=e}else{r+=t.charAt(h>>>6*(3-i)&63)}}}return r}n={VERSION:"1.0.5",Base64:function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="=",o=false,f=true;this.encode=function(t){var o,i,h,u="",a=t.length;r=r||"=";t=f?e(t):t;for(o=0;o<a;o+=3){h=t.charCodeAt(o)<<16|(o+1<a?t.charCodeAt(o+1)<<8:0)|(o+2<a?t.charCodeAt(o+2):0);for(i=0;i<4;i+=1){if(o*8+i*6>a*8){u+=r}else{u+=n.charAt(h>>>6*(3-i)&63)}}}return u};this.decode=function(e){var o,i,h,u,a,c,l,D,B,C,A="",s=[];if(!e){return e}o=C=0;e=e.replace(new RegExp("\\"+r,"gi"),"");do{a=n.indexOf(e.charAt(o+=1));c=n.indexOf(e.charAt(o+=1));l=n.indexOf(e.charAt(o+=1));D=n.indexOf(e.charAt(o+=1));B=a<<18|c<<12|l<<6|D;i=B>>16&255;h=B>>8&255;u=B&255;C+=1;if(l===64){s[C]=String.fromCharCode(i)}else if(D===64){s[C]=String.fromCharCode(i,h)}else{s[C]=String.fromCharCode(i,h,u)}}while(o<e.length);A=s.join("");A=f?t(A):A;return A};this.setPad=function(n){r=n||r;return this};this.setTab=function(e){n=e||n;return this};this.setUTF8=function(n){if(typeof n==="boolean"){f=n}return this}},CRC32:function(n){var t=0,r=0,o=0,f,i,h;n=e(n);f=["00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 ","79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 ","84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F ","63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD ","A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC ","51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 ","B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 ","06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 ","E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 ","12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 ","D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 ","33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 ","CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 ","9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E ","7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D ","806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 ","60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA ","AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 ","5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 ","B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 ","05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 ","F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA ","11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 ","D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F ","30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E ","C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D"].join("");t=t^-1;for(i=0,h=n.length;i<h;i+=1){o=(t^n.charCodeAt(i))&255;r="0x"+f.substr(o*9,8);t=t>>>8^r}return(t^-1)>>>0},MD5:function(n){var t=n&&typeof n.uppercase==="boolean"?n.uppercase:false,i=n&&typeof n.pad==="string"?n.pda:"=",h=n&&typeof n.utf8==="boolean"?n.utf8:true;this.hex=function(n){return f(u(n,h),t)};this.b64=function(n){return B(u(n),i)};this.any=function(n,e){return D(u(n,h),e)};this.raw=function(n){return u(n,h)};this.hex_hmac=function(n,e){return f(l(n,e),t)};this.b64_hmac=function(n,e){return B(l(n,e),i)};this.any_hmac=function(n,e,t){return D(l(n,e),t)};this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"};this.setUpperCase=function(n){if(typeof n==="boolean"){t=n}return this};this.setPad=function(n){i=n||i;return this};this.setUTF8=function(n){if(typeof n==="boolean"){h=n}return this};function u(n){n=h?e(n):n;return a(C(c(n),n.length*8))}function l(n,t){var r,o,f,i,u;n=h?e(n):n;t=h?e(t):t;r=c(n);if(r.length>16){r=C(r,n.length*8)}o=Array(16),f=Array(16);for(u=0;u<16;u+=1){o[u]=r[u]^909522486;f[u]=r[u]^1549556828}i=C(o.concat(c(t)),512+t.length*8);return a(C(f.concat(i),512+128))}function C(n,e){var t,o,f,i,h,u=1732584193,a=-271733879,c=-1732584194,l=271733878;n[e>>5]|=128<<e%32;n[(e+64>>>9<<4)+14]=e;for(t=0;t<n.length;t+=16){o=u;f=a;i=c;h=l;u=s(u,a,c,l,n[t+0],7,-680876936);l=s(l,u,a,c,n[t+1],12,-389564586);c=s(c,l,u,a,n[t+2],17,606105819);a=s(a,c,l,u,n[t+3],22,-1044525330);u=s(u,a,c,l,n[t+4],7,-176418897);l=s(l,u,a,c,n[t+5],12,1200080426);
c=s(c,l,u,a,n[t+6],17,-1473231341);a=s(a,c,l,u,n[t+7],22,-45705983);u=s(u,a,c,l,n[t+8],7,1770035416);l=s(l,u,a,c,n[t+9],12,-1958414417);c=s(c,l,u,a,n[t+10],17,-42063);a=s(a,c,l,u,n[t+11],22,-1990404162);u=s(u,a,c,l,n[t+12],7,1804603682);l=s(l,u,a,c,n[t+13],12,-40341101);c=s(c,l,u,a,n[t+14],17,-1502002290);a=s(a,c,l,u,n[t+15],22,1236535329);u=w(u,a,c,l,n[t+1],5,-165796510);l=w(l,u,a,c,n[t+6],9,-1069501632);c=w(c,l,u,a,n[t+11],14,643717713);a=w(a,c,l,u,n[t+0],20,-373897302);u=w(u,a,c,l,n[t+5],5,-701558691);l=w(l,u,a,c,n[t+10],9,38016083);c=w(c,l,u,a,n[t+15],14,-660478335);a=w(a,c,l,u,n[t+4],20,-405537848);u=w(u,a,c,l,n[t+9],5,568446438);l=w(l,u,a,c,n[t+14],9,-1019803690);c=w(c,l,u,a,n[t+3],14,-187363961);a=w(a,c,l,u,n[t+8],20,1163531501);u=w(u,a,c,l,n[t+13],5,-1444681467);l=w(l,u,a,c,n[t+2],9,-51403784);c=w(c,l,u,a,n[t+7],14,1735328473);a=w(a,c,l,u,n[t+12],20,-1926607734);u=F(u,a,c,l,n[t+5],4,-378558);l=F(l,u,a,c,n[t+8],11,-2022574463);c=F(c,l,u,a,n[t+11],16,1839030562);a=F(a,c,l,u,n[t+14],23,-35309556);u=F(u,a,c,l,n[t+1],4,-1530992060);l=F(l,u,a,c,n[t+4],11,1272893353);c=F(c,l,u,a,n[t+7],16,-155497632);a=F(a,c,l,u,n[t+10],23,-1094730640);u=F(u,a,c,l,n[t+13],4,681279174);l=F(l,u,a,c,n[t+0],11,-358537222);c=F(c,l,u,a,n[t+3],16,-722521979);a=F(a,c,l,u,n[t+6],23,76029189);u=F(u,a,c,l,n[t+9],4,-640364487);l=F(l,u,a,c,n[t+12],11,-421815835);c=F(c,l,u,a,n[t+15],16,530742520);a=F(a,c,l,u,n[t+2],23,-995338651);u=E(u,a,c,l,n[t+0],6,-198630844);l=E(l,u,a,c,n[t+7],10,1126891415);c=E(c,l,u,a,n[t+14],15,-1416354905);a=E(a,c,l,u,n[t+5],21,-57434055);u=E(u,a,c,l,n[t+12],6,1700485571);l=E(l,u,a,c,n[t+3],10,-1894986606);c=E(c,l,u,a,n[t+10],15,-1051523);a=E(a,c,l,u,n[t+1],21,-2054922799);u=E(u,a,c,l,n[t+8],6,1873313359);l=E(l,u,a,c,n[t+15],10,-30611744);c=E(c,l,u,a,n[t+6],15,-1560198380);a=E(a,c,l,u,n[t+13],21,1309151649);u=E(u,a,c,l,n[t+4],6,-145523070);l=E(l,u,a,c,n[t+11],10,-1120210379);c=E(c,l,u,a,n[t+2],15,718787259);a=E(a,c,l,u,n[t+9],21,-343485551);u=r(u,o);a=r(a,f);c=r(c,i);l=r(l,h)}return Array(u,a,c,l)}function A(n,e,t,f,i,h){return r(o(r(r(e,n),r(f,h)),i),t)}function s(n,e,t,r,o,f,i){return A(e&t|~e&r,n,e,o,f,i)}function w(n,e,t,r,o,f,i){return A(e&r|t&~r,n,e,o,f,i)}function F(n,e,t,r,o,f,i){return A(e^t^r,n,e,o,f,i)}function E(n,e,t,r,o,f,i){return A(t^(e|~r),n,e,o,f,i)}},SHA1:function(n){var t=n&&typeof n.uppercase==="boolean"?n.uppercase:false,i=n&&typeof n.pad==="string"?n.pda:"=",h=n&&typeof n.utf8==="boolean"?n.utf8:true;this.hex=function(n){return f(a(n,h),t)};this.b64=function(n){return B(a(n,h),i)};this.any=function(n,e){return D(a(n,h),e)};this.raw=function(n){return a(n,h)};this.hex_hmac=function(n,e){return f(c(n,e))};this.b64_hmac=function(n,e){return B(c(n,e),i)};this.any_hmac=function(n,e,t){return D(c(n,e),t)};this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"};this.setUpperCase=function(n){if(typeof n==="boolean"){t=n}return this};this.setPad=function(n){i=n||i;return this};this.setUTF8=function(n){if(typeof n==="boolean"){h=n}return this};function a(n){n=h?e(n):n;return u(C(l(n),n.length*8))}function c(n,t){var r,o,f,i,a;n=h?e(n):n;t=h?e(t):t;r=l(n);if(r.length>16){r=C(r,n.length*8)}o=Array(16),f=Array(16);for(i=0;i<16;i+=1){o[i]=r[i]^909522486;f[i]=r[i]^1549556828}a=C(o.concat(l(t)),512+t.length*8);return u(C(f.concat(a),512+160))}function C(n,e){var t,f,i,h,u,a,c,l,D=Array(80),B=1732584193,C=-271733879,w=-1732584194,F=271733878,E=-1009589776;n[e>>5]|=128<<24-e%32;n[(e+64>>9<<4)+15]=e;for(t=0;t<n.length;t+=16){h=B,u=C;a=w;c=F;l=E;for(f=0;f<80;f+=1){if(f<16){D[f]=n[t+f]}else{D[f]=o(D[f-3]^D[f-8]^D[f-14]^D[f-16],1)}i=r(r(o(B,5),A(f,C,w,F)),r(r(E,D[f]),s(f)));E=F;F=w;w=o(C,30);C=B;B=i}B=r(B,h);C=r(C,u);w=r(w,a);F=r(F,c);E=r(E,l)}return Array(B,C,w,F,E)}function A(n,e,t,r){if(n<20){return e&t|~e&r}if(n<40){return e^t^r}if(n<60){return e&t|e&r|t&r}return e^t^r}function s(n){return n<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514}},SHA256:function(n){var t=n&&typeof n.uppercase==="boolean"?n.uppercase:false,o=n&&typeof n.pad==="string"?n.pda:"=",i=n&&typeof n.utf8==="boolean"?n.utf8:true,h;this.hex=function(n){return f(a(n,i))};this.b64=function(n){return B(a(n,i),o)};this.any=function(n,e){return D(a(n,i),e)};this.raw=function(n){return a(n,i)};this.hex_hmac=function(n,e){return f(c(n,e))};this.b64_hmac=function(n,e){return B(c(n,e),o)};this.any_hmac=function(n,e,t){return D(c(n,e),t)};this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"};this.setUpperCase=function(n){if(typeof n==="boolean"){t=n}return this};this.setPad=function(n){o=n||o;return this};this.setUTF8=function(n){if(typeof n==="boolean"){i=n}return this};function a(n,t){n=t?e(n):n;return u(m(l(n),n.length*8))}function c(n,t){n=i?e(n):n;t=i?e(t):t;var r,o=0,f=l(n),h=Array(16),a=Array(16);if(f.length>16){f=m(f,n.length*8)}for(;o<16;o+=1){h[o]=f[o]^909522486;a[o]=f[o]^1549556828}r=m(h.concat(l(t)),512+t.length*8);return u(m(a.concat(r),512+256))}function C(n,e){return n>>>e|n<<32-e}function A(n,e){return n>>>e}function s(n,e,t){return n&e^~n&t}function w(n,e,t){return n&e^n&t^e&t}function F(n){return C(n,2)^C(n,13)^C(n,22)}function E(n){return C(n,6)^C(n,11)^C(n,25)}function d(n){return C(n,7)^C(n,18)^A(n,3)}function g(n){return C(n,17)^C(n,19)^A(n,10)}function p(n){return C(n,28)^C(n,34)^C(n,39)}function y(n){return C(n,14)^C(n,18)^C(n,41)}function b(n){return C(n,1)^C(n,8)^A(n,7)}function v(n){return C(n,19)^C(n,61)^A(n,6)}h=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function m(n,e){var t=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var o=new Array(64);var f,i,u,a,c,l,D,B;var C,A,p,y;n[e>>5]|=128<<24-e%32;n[(e+64>>9<<4)+15]=e;for(C=0;C<n.length;C+=16){f=t[0];i=t[1];u=t[2];a=t[3];c=t[4];l=t[5];D=t[6];B=t[7];for(A=0;A<64;A+=1){if(A<16){o[A]=n[A+C]}else{o[A]=r(r(r(g(o[A-2]),o[A-7]),d(o[A-15])),o[A-16])}p=r(r(r(r(B,E(c)),s(c,l,D)),h[A]),o[A]);y=r(F(f),w(f,i,u));B=D;D=l;l=c;c=r(a,p);a=u;u=i;i=f;f=r(p,y)}t[0]=r(f,t[0]);t[1]=r(i,t[1]);t[2]=r(u,t[2]);t[3]=r(a,t[3]);t[4]=r(c,t[4]);t[5]=r(l,t[5]);t[6]=r(D,t[6]);t[7]=r(B,t[7])}return t}},SHA512:function(n){var t=n&&typeof n.uppercase==="boolean"?n.uppercase:false,r=n&&typeof n.pad==="string"?n.pda:"=",o=n&&typeof n.utf8==="boolean"?n.utf8:true,i;this.hex=function(n){return f(h(n))};this.b64=function(n){return B(h(n),r)};this.any=function(n,e){return D(h(n),e)};this.raw=function(n){return h(n,o)};this.hex_hmac=function(n,e){return f(a(n,e))};this.b64_hmac=function(n,e){return B(a(n,e),r)};this.any_hmac=function(n,e,t){return D(a(n,e),t)};this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"};this.setUpperCase=function(n){if(typeof n==="boolean"){t=n}return this};this.setPad=function(n){r=n||r;return this};this.setUTF8=function(n){if(typeof n==="boolean"){o=n}return this};function h(n){n=o?e(n):n;return u(c(l(n),n.length*8))}function a(n,t){n=o?e(n):n;t=o?e(t):t;var r,f=0,i=l(n),h=Array(32),a=Array(32);if(i.length>32){i=c(i,n.length*8)}for(;f<32;f+=1){h[f]=i[f]^909522486;a[f]=i[f]^1549556828}r=c(h.concat(l(t)),1024+t.length*8);return u(c(a.concat(r),1024+512))}function c(n,e){var t,r,o,f=new Array(80),h=new Array(16),u=[new C(1779033703,-205731576),new C(-1150833019,-2067093701),new C(1013904242,-23791573),new C(-1521486534,1595750129),new C(1359893119,-1377402159),new C(-1694144372,725511199),new C(528734635,-79577749),new C(1541459225,327033209)],a=new C(0,0),c=new C(0,0),l=new C(0,0),D=new C(0,0),B=new C(0,0),p=new C(0,0),y=new C(0,0),b=new C(0,0),v=new C(0,0),m=new C(0,0),x=new C(0,0),_=new C(0,0),S=new C(0,0),U=new C(0,0),j=new C(0,0),M=new C(0,0),T=new C(0,0);if(i===undefined){i=[new C(1116352408,-685199838),new C(1899447441,602891725),new C(-1245643825,-330482897),new C(-373957723,-2121671748),new C(961987163,-213338824),new C(1508970993,-1241133031),new C(-1841331548,-1357295717),new C(-1424204075,-630357736),new C(-670586216,-1560083902),new C(310598401,1164996542),new C(607225278,1323610764),new C(1426881987,-704662302),new C(1925078388,-226784913),new C(-2132889090,991336113),new C(-1680079193,633803317),new C(-1046744716,-815192428),new C(-459576895,-1628353838),new C(-272742522,944711139),new C(264347078,-1953704523),new C(604807628,2007800933),new C(770255983,1495990901),new C(1249150122,1856431235),new C(1555081692,-1119749164),new C(1996064986,-2096016459),new C(-1740746414,-295247957),new C(-1473132947,766784016),new C(-1341970488,-1728372417),new C(-1084653625,-1091629340),new C(-958395405,1034457026),new C(-710438585,-1828018395),new C(113926993,-536640913),new C(338241895,168717936),new C(666307205,1188179964),new C(773529912,1546045734),new C(1294757372,1522805485),new C(1396182291,-1651133473),new C(1695183700,-1951439906),new C(1986661051,1014477480),new C(-2117940946,1206759142),new C(-1838011259,344077627),new C(-1564481375,1290863460),new C(-1474664885,-1136513023),new C(-1035236496,-789014639),new C(-949202525,106217008),new C(-778901479,-688958952),new C(-694614492,1432725776),new C(-200395387,1467031594),new C(275423344,851169720),new C(430227734,-1194143544),new C(506948616,1363258195),new C(659060556,-544281703),new C(883997877,-509917016),new C(958139571,-976659869),new C(1322822218,-482243893),new C(1537002063,2003034995),new C(1747873779,-692930397),new C(1955562222,1575990012),new C(2024104815,1125592928),new C(-2067236844,-1578062990),new C(-1933114872,442776044),new C(-1866530822,593698344),new C(-1538233109,-561857047),new C(-1090935817,-1295615723),new C(-965641998,-479046869),new C(-903397682,-366583396),new C(-779700025,566280711),new C(-354779690,-840897762),new C(-176337025,-294727304),new C(116418474,1914138554),new C(174292421,-1563912026),new C(289380356,-1090974290),new C(460393269,320620315),new C(685471733,587496836),new C(852142971,1086792851),new C(1017036298,365543100),new C(1126000580,-1676669620),new C(1288033470,-885112138),new C(1501505948,-60457430),new C(1607167915,987167468),new C(1816402316,1246189591)]}for(r=0;r<80;r+=1){f[r]=new C(0,0)}n[e>>5]|=128<<24-(e&31);n[(e+128>>10<<5)+31]=e;o=n.length;for(r=0;r<o;r+=32){A(l,u[0]);A(D,u[1]);A(B,u[2]);A(p,u[3]);A(y,u[4]);A(b,u[5]);A(v,u[6]);A(m,u[7]);for(t=0;t<16;t+=1){f[t].h=n[r+2*t];f[t].l=n[r+2*t+1]}for(t=16;t<80;t+=1){s(j,f[t-2],19);w(M,f[t-2],29);F(T,f[t-2],6);_.l=j.l^M.l^T.l;_.h=j.h^M.h^T.h;s(j,f[t-15],1);s(M,f[t-15],8);F(T,f[t-15],7);x.l=j.l^M.l^T.l;x.h=j.h^M.h^T.h;d(f[t],_,f[t-7],x,f[t-16])}for(t=0;t<80;t+=1){S.l=y.l&b.l^~y.l&v.l;S.h=y.h&b.h^~y.h&v.h;s(j,y,14);s(M,y,18);w(T,y,9);_.l=j.l^M.l^T.l;_.h=j.h^M.h^T.h;s(j,l,28);w(M,l,2);w(T,l,7);x.l=j.l^M.l^T.l;x.h=j.h^M.h^T.h;U.l=l.l&D.l^l.l&B.l^D.l&B.l;U.h=l.h&D.h^l.h&B.h^D.h&B.h;g(a,m,_,S,i[t],f[t]);E(c,x,U);A(m,v);A(v,b);A(b,y);E(y,p,a);A(p,B);A(B,D);A(D,l);E(l,a,c)}E(u[0],u[0],l);E(u[1],u[1],D);E(u[2],u[2],B);E(u[3],u[3],p);E(u[4],u[4],y);E(u[5],u[5],b);E(u[6],u[6],v);E(u[7],u[7],m)}for(r=0;r<8;r+=1){h[2*r]=u[r].h;h[2*r+1]=u[r].l}return h}function C(n,e){this.h=n;this.l=e}function A(n,e){n.h=e.h;n.l=e.l}function s(n,e,t){n.l=e.l>>>t|e.h<<32-t;n.h=e.h>>>t|e.l<<32-t}function w(n,e,t){n.l=e.h>>>t|e.l<<32-t;n.h=e.l>>>t|e.h<<32-t}function F(n,e,t){n.l=e.l>>>t|e.h<<32-t;n.h=e.h>>>t}function E(n,e,t){var r=(e.l&65535)+(t.l&65535);var o=(e.l>>>16)+(t.l>>>16)+(r>>>16);var f=(e.h&65535)+(t.h&65535)+(o>>>16);var i=(e.h>>>16)+(t.h>>>16)+(f>>>16);n.l=r&65535|o<<16;n.h=f&65535|i<<16}function d(n,e,t,r,o){var f=(e.l&65535)+(t.l&65535)+(r.l&65535)+(o.l&65535);var i=(e.l>>>16)+(t.l>>>16)+(r.l>>>16)+(o.l>>>16)+(f>>>16);var h=(e.h&65535)+(t.h&65535)+(r.h&65535)+(o.h&65535)+(i>>>16);var u=(e.h>>>16)+(t.h>>>16)+(r.h>>>16)+(o.h>>>16)+(h>>>16);n.l=f&65535|i<<16;n.h=h&65535|u<<16}function g(n,e,t,r,o,f){var i=(e.l&65535)+(t.l&65535)+(r.l&65535)+(o.l&65535)+(f.l&65535),h=(e.l>>>16)+(t.l>>>16)+(r.l>>>16)+(o.l>>>16)+(f.l>>>16)+(i>>>16),u=(e.h&65535)+(t.h&65535)+(r.h&65535)+(o.h&65535)+(f.h&65535)+(h>>>16),a=(e.h>>>16)+(t.h>>>16)+(r.h>>>16)+(o.h>>>16)+(f.h>>>16)+(u>>>16);n.l=i&65535|h<<16;n.h=u&65535|a<<16}},RMD160:function(n){var t=n&&typeof n.uppercase==="boolean"?n.uppercase:false,i=n&&typeof n.pad==="string"?n.pda:"=",h=n&&typeof n.utf8==="boolean"?n.utf8:true,u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],a=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],C=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];this.hex=function(n){return f(A(n,h))};this.b64=function(n){return B(A(n,h),i)};this.any=function(n,e){return D(A(n,h),e)};this.raw=function(n){return A(n,h)};this.hex_hmac=function(n,e){return f(s(n,e))};this.b64_hmac=function(n,e){return B(s(n,e),i)};this.any_hmac=function(n,e,t){return D(s(n,e),t)};this.vm_test=function(){return hex("abc").toLowerCase()==="900150983cd24fb0d6963f7d28e17f72"};this.setUpperCase=function(n){if(typeof n==="boolean"){t=n}return this};this.setPad=function(n){if(typeof n!=="undefined"){i=n}return this};this.setUTF8=function(n){if(typeof n==="boolean"){h=n}return this};function A(n){n=h?e(n):n;return w(F(c(n),n.length*8))}function s(n,t){n=h?e(n):n;t=h?e(t):t;var r,o,f=c(n),i=Array(16),u=Array(16);if(f.length>16){f=F(f,n.length*8)}for(r=0;r<16;r+=1){i[r]=f[r]^909522486;u[r]=f[r]^1549556828}o=F(i.concat(c(t)),512+t.length*8);return w(F(u.concat(o),512+160))}function w(n){var e,t="",r=n.length*32;for(e=0;e<r;e+=8){t+=String.fromCharCode(n[e>>5]>>>e%32&255)}return t}function F(n,e){var t,f,i,h,c=1732584193,D=4023233417,B=2562383102,A=271733878,s=3285377520,w,F,p,y,b,v,m,x,_,S;n[e>>5]|=128<<e%32;n[(e+64>>>9<<4)+14]=e;h=n.length;for(i=0;i<h;i+=16){w=v=c;F=m=D;p=x=B;y=_=A;b=S=s;for(f=0;f<=79;f+=1){t=r(w,E(f,F,p,y));t=r(t,n[i+u[f]]);t=r(t,d(f));t=r(o(t,l[f]),b);w=b;b=y;y=o(p,10);p=F;F=t;t=r(v,E(79-f,m,x,_));t=r(t,n[i+a[f]]);t=r(t,g(f));t=r(o(t,C[f]),S);v=S;S=_;_=o(x,10);x=m;m=t}t=r(D,r(p,_));D=r(B,r(y,S));B=r(A,r(b,v));A=r(s,r(w,m));s=r(c,r(F,x));c=t}return[c,D,B,A,s]}function E(n,e,t,r){return 0<=n&&n<=15?e^t^r:16<=n&&n<=31?e&t|~e&r:32<=n&&n<=47?(e|~t)^r:48<=n&&n<=63?e&r|t&~r:64<=n&&n<=79?e^(t|~r):"rmd160_f: j out of range"}function d(n){return 0<=n&&n<=15?0:16<=n&&n<=31?1518500249:32<=n&&n<=47?1859775393:48<=n&&n<=63?2400959708:64<=n&&n<=79?2840853838:"rmd160_K1: j out of range"}function g(n){return 0<=n&&n<=15?1352829926:16<=n&&n<=31?1548603684:32<=n&&n<=47?1836072691:48<=n&&n<=63?2053994217:64<=n&&n<=79?0:"rmd160_K2: j out of range"}}};(function(e,t){var r=false;if(typeof exports==="object"){r=exports;if(exports&&typeof global==="object"&&global&&global===global.global){e=global}}if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return n})}else if(r){if(typeof module==="object"&&module&&module.exports===r){module.exports=n}else{r.Hashes=n}}else{e.Hashes=n}})(this)})();"use strict";var CONFIG={AUTHENTICATION:{REDIRECT:"www.redirect.com",FACEBOOK:{ID:"id"},GOOGLE:{ID:"id"}},SERVER:{URL:"https://eserviss.com/concept/user_secured_apis.php"},DATABASE:{NAME:"file.db",SCHEMA:{TABLES:["SQL Create for table 1","SQL Create for table 2"]}}};"use strict";var application=angular.module("application",["ionic","application.controllers","ngCordova","pascalprecht.translate","ngFx","ngAnimate","LocalStorageModule","ionic.rating","ion-google-place","credit-cards"]);var controllers=angular.module("application.controllers",[]);application.run(function($ionicPlatform){$ionicPlatform.ready(function(){if(window.cordova&&window.cordova.plugins.Keyboard){cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true)}if(window.StatusBar){StatusBar.styleDefault()}})});application.config(function($stateProvider,$urlRouterProvider,$translateProvider,localStorageServiceProvider){$translateProvider.translations("en",{LOGIN:"LOGIN",USERNAME:"USERNAME",EMAIL:"EMAIL",PASSWORD:"PASSWORD",LANGUAGE_SETTINGS:"LANGUAGE SETTINGS",WALK_THROUGH:"WALK THROUGH THE APP",NEW_USER:"REGISTER NOW",REGISTRATION:"REGISTRATION",FIRST_NAME:"FIRST NAME",LAST_NAME:"LAST NAME",COUNTRY:"COUNTRY",PHONE_NUMBER:"PHONE NUMBER",GENDER:"GENDER",NEXT:"NEXT",CONFIRMATION_CODE:"CONFIRMATION CODE",CONFIRM_CODE_MESSAGE:"PLEASE ENTER CONFIRMATION RECEIVED VIA MESSAGE",SUBMIT:"SUBMIT",YES:"YES",NO:"NO",IS_YOUR_MOBILE:"IS THIS YOUR MOBILE NUMBER ?",MALE:"MALE",FEMALE:"FEMALE",MY_PROFILE:"MY PROFILE",HAIL_RIDE:"HAIL RIDE",PAYMENT_SETTINGS:"PAYMENT SETTINGS",MANAGE_CREDIT:"Manage Your Credit/Debit Card",RIDE_CREDIT:"RIDE CREDIT",CHECK_BALANCE:"Check Current Balance",PROMOTIONS:"PROMOTIONS",ANNOUNCEMENTS_COUPON:"Announcements and Coupon Code",SHARE:"SHARE",INVITE_EARN:"Invite Friend and Earn Free Rides",HELP_TOUR:"HELP/TOUR",TAKE_TOUR:"Take a Quick Tour",FAVORITES:"FAVORITES",MANAGE_FAVORITES:"Manage Your Favorite Locations",BLACKLIST_STATUS:"BLACKLIST STATUS",FREE_RIDES:"FREE RIDES",SEE_FREE_RIDES:"See # of Free Rides Earned",CUSTOMER_CARE:"CUSTOMER CARE",CALL_SUPPORT:"Call Our Support Team",JUST_ME:"JUST ME",TWO_OF_US:"TWO OF US",THREE_WILL_RIDE:"THREE WILL RIDE",PARTY_OF_FOUR:"A PARTY OF FOUR"}).translations("ar",{LOGIN:"تسجيل الدخول",USERNAME:"كلمة المستخدم",EMAIL:"البريد الإلتكترونى",PASSWORD:"كلمة المرور",LANGUAGE_SETTINGS:"إعدادات اللغة",WALK_THROUGH:"سير من خلال التطبيق",NEW_USER:"مستخدم جديد, سجل الأن",REGISTRATION:"تسجيل الدخول",FIRST_NAME:"الأسم الأول",LAST_NAME:"أسم العائلى",COUNTRY:"الدولة",PHONE_NUMBER:"رقم الموبايل",GENDER:"الجنس",NEXT:"التالى",CONFIRMATION_CODE:"كود التفعيل",CONFIRM_CODE_MESSAGE:"من فضلك أدخل كود التأكيد المرسل عن طريق الرسائل",SUBMIT:"سجل",YES:"نعم",NO:"لآ",IS_YOUR_MOBILE:"هل هذا هو رقم الموبايل ؟",MALE:"مذكر",FEMALE:"مؤنث",MY_PROFILE:"الصفحة الشخصية",HAIL_RIDE:"أطلب رحلة",PAYMENT_SETTINGS:"إعدادات الدفع",MANAGE_CREDIT:"دير بطاقاتك الإئتمانية",RIDE_CREDIT:"نقاط الرحلات",CHECK_BALANCE:"تفحص المبلغ الحالى",PROMOTIONS:"الترقيات",ANNOUNCEMENTS_COUPON:"الإعلانات واكواد الكوبونات",SHARE:"مشاركة",INVITE_EARN:"أدعو اصدقائك واكسب رحلات مجانية",HELP_TOUR:"مساعدة/جولة",TAKE_TOUR:"خد جولة سريعة",FAVORITES:"المفضلات",MANAGE_FAVORITES:"دير أماكنك المفضلة",BLACKLIST_STATUS:"القائمة السوداء",FREE_RIDES:"رحلات مجانية",SEE_FREE_RIDES:"تفحص عدد الرحلات المجانيه المكتسبة",CUSTOMER_CARE:"الدعم الفنى",CALL_SUPPORT:"اتصل بفريقنا للدعم الفنى",JUST_ME:"أنا بس",TWO_OF_US:"أتنين مننا",THREE_WILL_RIDE:"تلاته هيركبوا سوا",PARTY_OF_FOUR:"حفلة من أربعة"}).preferredLanguage("en");localStorageServiceProvider.setPrefix("EservissUser");document.body.classList.remove("platform-ios");document.body.classList.remove("platform-android");document.body.classList.add("platform-ios");$stateProvider.state("splash",{url:"/splash",templateUrl:"templates/splash.html",controller:"HomeController@splash"}).state("landing",{url:"/landing",templateUrl:"templates/landing.html",controller:"HomeController@landing"}).state("authenticate",{url:"/authenticate",templateUrl:"templates/authenticate.html"}).state("header",{"abstract":true,url:"/header",templateUrl:"templates/header.html"}).state("header.signin",{url:"/signin",templateUrl:"templates/header.signin.html",controller:"UserController@signin"}).state("header.signup",{url:"/signup",templateUrl:"templates/header.signup.html",controller:"UserController@signup"}).state("header.forget",{url:"/forget",templateUrl:"templates/header.forget.html",controller:"UserController@forget"}).state("menu",{"abstract":true,url:"/menu",templateUrl:"templates/menu.html",controller:"HomeController@sidemenu"}).state("menu.profile",{url:"/profile",templateUrl:"templates/menu.profile.html",controller:"UserController@profile"}).state("menu.hailrequest",{url:"/hailrequest",params:{request:null},templateUrl:"templates/menu.hailrequest.html",controller:"HailRequestController@request"}).state("menu.requestconfirmed",{url:"/confirmed",params:{request:null},templateUrl:"templates/menu.requestconfirmed.html",controller:"HailRequestController@confirmed"}).state("menu.receipt",{url:"/receipt",params:{request:null},templateUrl:"templates/menu.receipt.html",controller:"HailRequestController@receipt"}).state("menu.favorites",{url:"/favorites",templateUrl:"templates/menu.favorites.html",controller:"FavoriteController@favorties"}).state("menu.addfavorite",{url:"/addfavorite",params:{mode:null,favorite:null},templateUrl:"templates/menu.addfavorite.html",controller:"FavoriteController@addfavorite"}).state("menu.help",{url:"/help",templateUrl:"templates/menu.help.html"}).state("menu.helpcenter",{url:"/helpcenter",templateUrl:"templates/menu.helpcenter.html"}).state("menu.privacy",{url:"/privacy",templateUrl:"templates/menu.privacy.html"}).state("menu.terms",{url:"/terms",templateUrl:"templates/menu.terms.html"}).state("menu.promotions",{url:"/promotions",templateUrl:"templates/menu.promotions.html",controller:"PromoController@promotions"}).state("menu.paymentsettings",{url:"/paymentsettings",templateUrl:"templates/menu.paymentsettings.html",controller:"UserController@paymentsettings"}).state("menu.ridecredit",{url:"/ridecredit",templateUrl:"templates/menu.ridecredit.html",controller:"UserController@ridecredit"}).state("menu.share",{url:"/share",templateUrl:"templates/menu.share.html",controller:"GuestController@share"}).state("menu.blacklist",{url:"/blacklist",templateUrl:"templates/menu.blacklist.html",controller:"UserController@blacklist"}).state("menu.pickuplocations",{url:"/pickuplocations",templateUrl:"templates/menu.pickuplocations.html",controller:"HailRequestController@pickuplocations",params:{request:null}}).state("menu.estimationfee",{url:"/estimationfee",templateUrl:"templates/menu.estimationfee.html",controller:"HailRequestController@estimationfee",params:{request:null}}).state("menu.sendnote",{url:"/sendnote",templateUrl:"templates/menu.sendnote.html",controller:"HailRequestController@sendnote",params:{request:null}}).state("tour",{url:"/tour",templateUrl:"templates/tour.html"});$urlRouterProvider.otherwise("/landing")});application.factory("mapEngine",["$rootScope","Util",function($rootScope,Util){return{params:null,centerDivContainer:null,acceleratedMarker:null,navigationInfoWindow:null,gMapsInstance:null,isReady:false,setCenter:function(lat,lng){this.params={lat:lat,lng:lng};$rootScope.$broadcast("googleMap@Center")},pauseWatchMarker:function(){this.params={isWatchingMarker:false};$rootScope.$broadcast("googleMap@OnWatchChange")},resumeWatchMarker:function(){this.params={isWatchingMarker:true};$rootScope.$broadcast("googleMap@OnWatchChange")},watchMarker:function(lat,lng,icon){this.params={lat:lat,lng:lng,isWatchingMarker:true,icon:icon||null};$rootScope.$broadcast("googleMap@WatchMarker")},drawRoute:function(routeConfig){this.params={lat:routeConfig.origin[0],lng:routeConfig.origin[1],routeConfig:routeConfig};$rootScope.$broadcast("googleMap@DrawRoute")},removeRoutes:function(){this.gMapsInstance.removePolylines()},getCenterDiv:function(){if(this.centerDivContainer===null){this.centerDivContainer=document.createElement("div");this.centerDivContainer.style.position="relative";this.centerDivContainer.style.top="50%";this.centerDivContainer.style.left="50%";$rootScope.$broadcast("googleMap@CenterDiv")}return this.centerDivContainer},navigationMarker:function(onClicked){if(this.acceleratedMarker){this.getCenterDiv().style.display="block";this.acceleratedMarker.style.display="block";return}this.acceleratedMarker=document.createElement("div");this.acceleratedMarker.style.background="url(img/icons/pin.png) center center no-repeat";this.acceleratedMarker.style.position="absolute";this.acceleratedMarker.style.bottom="0";this.acceleratedMarker.style.left="-7px";this.acceleratedMarker.style.zIndex="1";this.acceleratedMarker.style.width="29px";this.acceleratedMarker.style.height="40px";this.acceleratedMarker.style.cursor="pointer";this.acceleratedMarker.onclick=onClicked||null;this.getCenterDiv().appendChild(this.acceleratedMarker)},navigationInfo:function(onClicked){this.navigationInfoWindow={div:null,rightText:null,leftText:null};this.navigationInfoWindow.div=document.createElement("div");var leftCol=document.createElement("div");leftCol.style.float="left";leftCol.style.width="25%";leftCol.style.height="100%";leftCol.style.backgroundColor="#343434";leftCol.style.color="#FFFFFF";leftCol.style.lineHeight="44px";this.navigationInfoWindow.leftText=leftCol;this.navigationInfoWindow.div.appendChild(leftCol);var righttCol=document.createElement("div");righttCol.style.float="left";righttCol.style.width="75%";righttCol.style.height="100%";righttCol.style.fontWeight="600";righttCol.innerHTML='<i class="icon ion-chevron-right yellow right"></i>';this.navigationInfoWindow.rightText=righttCol;righttCol.onclick=onClicked||null;this.navigationInfoWindow.div.appendChild(righttCol);var arrowDown=document.createElement("div");arrowDown.style.width="0";arrowDown.style.height="0";arrowDown.style.borderLeft="20px solid transparent";arrowDown.style.borderRight="20px solid transparent";arrowDown.style.borderTop="20px solid #FFB300";arrowDown.style.position="absolute";arrowDown.style.left="50%";arrowDown.style.bottom="-20px";this.navigationInfoWindow.div.appendChild(arrowDown);this.navigationInfoWindow.div.style.position="absolute";this.navigationInfoWindow.div.style.top="-105px";this.navigationInfoWindow.div.style.left="-125px";this.navigationInfoWindow.div.style.width="210px";this.navigationInfoWindow.div.style.height="50px";this.navigationInfoWindow.div.style.lineHeight="50px";this.navigationInfoWindow.div.style.backgroundColor="#F7F7F7";this.navigationInfoWindow.div.style.textAlign="center";this.navigationInfoWindow.div.style.border="solid 3px #FFB300";this.getCenterDiv().appendChild(this.navigationInfoWindow.div)},navigationInfoWindowRightText:function(innerHtml){this.navigationInfoWindow.rightText.innerHTML="<h5 style='margin: 0; line-height: 44px;' class='b'>"+innerHtml+"</h5>"+' <i class="icon ion-chevron-right yellow right" style="margin: 0; line-height: 44px; right: 5px !important;"></i>'},navigationInfoWindowLeftText:function(imgSrc,info){var parentDivStyle="";var imgStyle=Util.String("style='vertical-align: {0};'",["middle"]);var infoElem="";if(info){parentDivStyle=Util.String("style='line-height: {0}px;'",[22]);imgStyle=Util.String("style='vertical-align: {0};'",["text-top"]);infoElem=Util.String("<span>{0}</span>",[info])}var imgElem="";if(imgSrc){imgElem=Util.String("<img {0} width='60%' src='{1}' />",[imgStyle,imgSrc])}if(info&&!imgSrc)parentDivStyle="";this.navigationInfoWindow.leftText.innerHTML=Util.String("<div class='text-center  yellow b' {0}> {1} {2} </div>",[parentDivStyle,imgElem,infoElem])},addCenterMarker:function(){$rootScope.$broadcast("googleMap@AddCenterMarker")},ready:function(onReady){var self=this;var destroyListener=$rootScope.$on("map@ready",function(){onReady();destroyListener();self.gMapsInstance.refresh();self.isReady=true})},drawCircle:function(lat,lng,radius){this.params={circleOptions:{lat:lat,lng:lng,radius:radius,fillColor:"#004de8",fillOpacity:.27,strokeColor:"#004de8",strokeOpacity:.62,strokeWeight:1}};$rootScope.$broadcast("googleMap@DrawCircle")},getCenter:function(){return this.gMapsInstance.getCenter()},getMap:function(){return this.gMapsInstance.map},addMarker:function(lat,lng,icon){this.params={lat:lat,lng:lng,icon:icon||null};$rootScope.$broadcast("googleMap@AddMarker")},addUserAccuracy:function(lat,lng,accuracy,options){this.params={lat:lat,lng:lng,accuracy:accuracy,options:options||{}};$rootScope.$broadcast("googleMap@AddUserAccuracy")}}}]);application.directive("googleMap",["$rootScope",function($rootScope){var gMaps=null,watchMarker=null,isWatchingMarker=true,accuracyMarker=null;return{restrict:"AE",replace:true,link:function(scope,element,attrs){var resizeMap=function(){element[0].style.height=attrs.height||"100%";element[0].style.width=attrs.width||"100%";element.addClass("pane");google.maps.event.trigger(gMaps.map,"resize")};if(gMaps){resizeMap();gMaps.unbindAll();gMaps.removeMarkers();gMaps.removePolygons();gMaps.removePolylines();gMaps.refresh();gMaps.setZoom(15);element.append(gMaps.getDiv());$rootScope.$broadcast("googleMap@resetMap");return}element[0].id="map";gMaps=new GMaps({div:"#map",lat:attrs.lat||33.8886289,lng:attrs.lng||35.4954794,disableDefaultUI:true});console.log(gMaps);resizeMap();google.maps.event.addListenerOnce(gMaps.map,"tilesloaded",function(){$rootScope.$broadcast("googleMap@preReady")});console.log(gMaps)},controller:function($scope,mapEngine,$rootScope){$scope.$on("googleMap@resetMap",function(){if(mapEngine.centerDivContainer)mapEngine.centerDivContainer.style.display="none";if(mapEngine.navigationInfoWindow)mapEngine.navigationInfoWindow.div.style.display="none";if(mapEngine.acceleratedMarker)mapEngine.acceleratedMarker.style.display="none";gMaps.removePolylines();$rootScope.$broadcast("map@ready")});$scope.$on("googleMap@preReady",function(){mapEngine.gMapsInstance=gMaps;$rootScope.$broadcast("map@ready")});$scope.$on("googleMap@Center",function(){var latLng=new google.maps.LatLng(mapEngine.params.lat,mapEngine.params.lng);gMaps.panTo(latLng)});$scope.$on("googleMap@WatchMarker",function(){if(!isWatchingMarker)return;if(watchMarker===null){watchMarker=gMaps.addMarker({lat:mapEngine.params.lat,lng:mapEngine.params.lng,icon:mapEngine.params.icon})}watchMarker.setPosition(new google.maps.LatLng(mapEngine.params.lat,mapEngine.params.lng));gMaps.panTo(new google.maps.LatLng(mapEngine.params.lat,mapEngine.params.lng))});$scope.$on("googleMap@DrawRoute",function(){gMaps.removePolylines();gMaps.drawRoute(mapEngine.params.routeConfig);var startLatLng=new google.maps.LatLng(mapEngine.params.routeConfig.origin[0],mapEngine.params.routeConfig.origin[1]);var endLatLng=new google.maps.LatLng(mapEngine.params.routeConfig.destination[0],mapEngine.params.routeConfig.destination[1]);gMaps.fitLatLngBounds([startLatLng,endLatLng])});$scope.$on("googleMap@OnWatchChange",function(){isWatchingMarker=mapEngine.params.isWatchingMarker});$scope.$on("googleMap@CenterDiv",function(){gMaps.getDiv().appendChild(mapEngine.centerDivContainer)});$scope.$on("googleMap@AddCenterMarker",function(){gMaps.addMarker({lat:gMaps.getCenter().lat(),lng:gMaps.getCenter().lng()})});$scope.$on("googleMap@DrawCircle",function(){gMaps.drawCircle(mapEngine.params.circleOptions)});$scope.$on("googleMap@AddMarker",function(){gMaps.addMarker({lat:mapEngine.params.lat,lng:mapEngine.params.lng,icon:mapEngine.params.icon})});$scope.$on("googleMap@AddUserAccuracy",function(){if(accuracyMarker){gMaps.removeMarker(accuracyMarker.center);gMaps.removeMarker(accuracyMarker.outer)}accuracyMarker={};accuracyMarker.center=gMaps.addMarker({lat:mapEngine.params.lat,lng:mapEngine.params.lng,icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#0A7FFF",fillOpacity:1,strokeColor:"#FFFFFF",strokeOpacity:1,strokeWeight:5}});accuracyMarker.outer=gMaps.addMarker({lat:mapEngine.params.lat,lng:mapEngine.params.lng,
icon:{path:google.maps.SymbolPath.CIRCLE,scale:mapEngine.params.accuracy,fillColor:"#004de8",fillOpacity:.27,strokeColor:"#004de8",strokeOpacity:.62,strokeWeight:1}});if(mapEngine.params.options.info){var infoBubble=new InfoBubble({padding:"30px",map:gMaps.map,position:new google.maps.LatLng(mapEngine.params.lat,mapEngine.params.lng),content:"<h5 class='abs-middle text-center white' style='overflow: hidden; margin-top: 20%;'>"+mapEngine.params.options.info+"</h5>",backgroundClassName:"marker-info-time",backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,arrowSize:15,hideCloseButton:true,borderRadius:30,arrowStyle:0,shadowStyle:0});infoBubble.open()}})}}}]);"use strict";controllers.factory("DatabaseConnector",["$ionicPlatform","Error","Callback","Util","$timeout",function($ionicPlatform,Error,Callback,Util,$timeout){var DatabaseConnector=augment.defclass({constructor:function(tableName){this._tableName=tableName},deleteById:function(id,onSuccess,onFail){var deleteQuery="delete from "+this._tableName+" where id = "+id+";";DatabaseConnector.Query(deleteQuery,[],onSuccess,onFail)},updateById:function(id,params,onSuccess,onFail){var setQuery="SET ";var values=[];for(var column in params){setQuery+=column+" = ?, ";values.push(params[column])}setQuery=setQuery.substring(0,setQuery.length-2);var updateQuery="UPDATE "+this._tableName+" "+setQuery+" WHERE id = "+id+";";DatabaseConnector.Query(updateQuery,values,onSuccess,onFail)},insert:function(ChildModel,params,onSuccess,onFail){var columns="";var questionMarks="";var values=[];for(var column in params){columns+=column+", ";questionMarks+="?"+", ";values.push(params[column])}var columns="("+columns.substring(0,columns.length-2)+")";var questionMarks="("+questionMarks.substring(0,questionMarks.length-2)+")";var queryInsert="INSERT INTO "+this._tableName+columns+" VALUES"+questionMarks;var onInserted=new Callback(function(result){params["id"]=result.insertId;var childModel=new ChildModel(params);onSuccess.fire(childModel)});DatabaseConnector.Query(queryInsert,values,onInserted,onFail)},select:function(config){var tableName=this._tableName;var conditionsJson;var whereCondition="";var conditionValues=[];var limit="";var order="";var columns="*";var isDistinct=config.isDistinct||true;var distinct=isDistinct?"distinct ":"";if(config.conditions!=null){conditionsJson=DatabaseConnector._FormatConditions(config.conditions,config.conditionType);whereCondition=" WHERE "+conditionsJson.conditions;conditionValues=conditionsJson.values}if(config.limit!=null){limit=" limit 0, "+config.limit}if(config.order!=null){order=Util.String(" order by {0} {1}",[config.order.by,config.order.type])}if(config.columns!=null){columns="";for(var i=0;i<config.columns.length-1;i++){columns+=config.columns[i]+", "}columns+=config.columns[config.columns.length-1]}var querySelect="select "+distinct+columns+" from "+tableName+whereCondition+order+limit+";";var onSearched=new Callback(function(result){var config=onSearched.getExtras();var ClassName=config.model||config.Model||config.ChildModel;if(config.limit!=null&&config.limit==1){var childModel=new ClassName(result.rows.item(0));config.onSuccess.fire(childModel)}else{var childModelList=[];for(var i=0;i<result.rows.length;i++){var temp=new ClassName(result.rows.item(i));childModelList.push(temp)}config.onSuccess.fire(childModelList)}});onSearched.setExtras(config);DatabaseConnector.Query(querySelect,conditionValues,onSearched,config.onFail)},selectFirst:function(config){config.order={by:"id",type:DatabaseConnector.ORDER.FIRST};config.limit=1;this.select(config)},selectLast:function(config){config.order={by:"id",type:DatabaseConnector.ORDER.LAST};config.limit=1;this.select(config)}});DatabaseConnector.Connector=null;DatabaseConnector.Reset=function(){DatabaseConnector.Connector=null};DatabaseConnector.getConnector=function(onSuccess,onFail){var self=this;if(DatabaseConnector.Connector!=null){onSuccess.fire(DatabaseConnector.Connector);return}$ionicPlatform.ready(function(){if(window.sqlitePlugin==null){var error=new Error("sqlite plugin is undefined",true);onFail.fire(error);return}DatabaseConnector.Connector=window.sqlitePlugin.openDatabase({name:CONFIG.DATABASE.NAME});DatabaseConnector.Connector.transaction(function(tx){var tablesCreated=0,isOnSuccessCalled=false;for(var i=0;i<CONFIG.DATABASE.SCHEMA.TABLES.length;i++){tx.executeSql(CONFIG.DATABASE.SCHEMA.TABLES[i],[],function(){tablesCreated++;if(tablesCreated==CONFIG.DATABASE.SCHEMA.TABLES.length)onSuccess.fire(DatabaseConnector.Connector)},function(e){if(DatabaseConnector.Connector==null){var error=new Error(e.message,true);config.onFail.fire(error);return}if(DatabaseConnector.Connector!=null&&!isOnSuccessCalled){isOnSuccessCalled=true;onSuccess.fire(DatabaseConnector.Connector);return}})}},function(e){var error=new Error(e.message,true);config.onFail.fire(error)})})};DatabaseConnector.Query=function(query,values,onSuccess,onFail){var onConnected=new Callback(function(db){db.transaction(function(tx){tx.executeSql(query,values,function(tx,result){onSuccess.fire(result)},function(e){alert(Util.String("{0} error: {1}",[query,e.message]));Util.Alert(values);var error=new Error(e.message,true);onFail.fire(error)})})});DatabaseConnector.getConnector(onConnected,onFail)};DatabaseConnector._FormatConditions=function(params,conditionType){if(conditionType==null)conditionType=DatabaseConnector.CONDITION_OPERATOR.AND;var conditions="";var values=[];for(var i=0;i<params.length;i++){conditions+=params[i][0];if(params[i][2]==null)conditions+=" IS NULL";else if(params[i][2]==DatabaseConnector.CONDITION.NOT_NULL)conditions+=" IS NOT NULL";else{conditions+=" "+params[i][1]+" ?";values.push(params[i][2])}conditions+=" "+conditionType+" "}conditions=conditions.substring(0,conditions.length-(conditionType.length+2));return{conditions:conditions,values:values}};DatabaseConnector.CONDITION_OPERATOR={AND:"AND",OR:"OR"};DatabaseConnector.CONDITION={NOT_NULL:"NOT_NULL"};DatabaseConnector.ORDER={FIRST:"asc",LAST:"desc"};return DatabaseConnector}]);controllers.factory("Util",[function(){"use strict";var Util=augment.defclass({constructor:function(){}});Util.Alert=function(object){var jsonStringified="";try{jsonStringified=JSON.stringify(object)}catch(e){jsonStringified=object}alert(jsonStringified)};Util.ToTwoDigits=function(number){var baseTwo=number;if(number<10&&number>-10){baseTwo="0"+number}return baseTwo};Util.FormatMilliseconds=function(milliseconds){var days,hours,minutes,seconds;seconds=Math.floor(milliseconds/1e3);minutes=Math.floor(seconds/60);seconds=seconds%60;hours=Math.floor(minutes/60);minutes=minutes%60;days=Math.floor(hours/24);hours=hours%24;return Util.ToTwoDigits(hours)+":"+Util.ToTwoDigits(minutes)+":"+Util.ToTwoDigits(seconds)};Util.String=function(str,args){var regex=new RegExp("{-?[0-9]+}","g");return str.replace(regex,function(item){var intVal=parseInt(item.substring(1,item.length-1));var replace;if(intVal>=0){replace=args[intVal]}else if(intVal===-1){replace="{"}else if(intVal===-2){replace="}"}else{replace=""}return replace})};Util.Find=function(list,isMatched){for(var i=0;i<list.length;i++){if(isMatched(list[i]))return list[i]}return null};Util.IsString=function(value){return typeof value==="string"};Util.InArray=function(value,list){if(list.indexOf(value)===-1)return false;return true};Util.PushUnique=function(value,list,isMatched){var element=Util.Find(list,isMatched);if(element!=null){return}list.push(value)};Util.IsArrayLike=function(obj){var NODE_TYPE_ELEMENT=1;if(obj==null||Util.IsWindow(obj)){return false}var length=obj.length;if(obj.nodeType===NODE_TYPE_ELEMENT&&length){return true}return Util.IsString(obj)||Array.isArray(obj)||length===0||typeof length==="number"&&length>0&&length-1 in obj};Util.IsFunction=function(value){return typeof value==="function"};Util.IsWindow=function(obj){return obj&&obj.window===obj};Util.RandomNumber=function(min,max){if(!min)min=0;if(!max)max=1e3;return Math.floor(Math.random()*(max-min+1))+min};Util.ForEach=function(obj,iterator,context){var key,length;if(obj){if(Util.IsFunction(obj)){for(key in obj){if(key!="prototype"&&key!="length"&&key!="name"&&(!obj.hasOwnProperty||obj.hasOwnProperty(key))){iterator.call(context,obj[key],key,obj)}}}else if(Array.isArray(obj)||Util.IsArrayLike(obj)){var isPrimitive=typeof obj!=="object";for(key=0,length=obj.length;key<length;key++){if(isPrimitive||key in obj){iterator.call(context,obj[key],key,obj)}}}else if(obj.forEach&&obj.forEach!==Util.ForEach){obj.forEach(iterator,context,obj)}else{for(key in obj){if(obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj)}}}}return obj};Util.EndWith=function(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1};Util.Base64=function(type,data){return Util.String("data:image/{0};base64,{1}",[type,data])};Util.RandomString=function(length){var text="";var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text};return Util}]);"use strict";controllers.factory("Callback",["$interval",function($interval){var Callback=augment.defclass({constructor:function(method,maxCalls){this._method=method||null;this._maxCalls=maxCalls||Callback.Calls.MAX;this._callsCounter=0},fire:function(param1,param2,param3){if(this._method&&this.isCallable()){Callback.Fire(this._method,param1,param2,param3);this._callsCounter++}return this},isFired:function(){return this._callsCounter>0},waitFiredOnce:function(){while(!this.isFired());},isCallable:function(){if(this._maxCalls==Callback.Calls.MAX)return true;return this._callsCounter<this._maxCalls},setExtras:function(extras){this._extras=extras;return this},getExtras:function(){return this._extras}});Callback.Fire=function(method,param1,param2,param3){if(method!=null){if(param1!=null&&param2!=null&&param3!=null)method(param1,param2,param3);else if(param1!=null&&param2!=null)method(param1,param2);else if(param1!=null)method(param1);else method()}};Callback.WaitAll=function(callBacks,onSuccess){var callsNumber;var interval=$interval(function(){callsNumber=0;for(var i=0;i<callBacks.length;i++){if(callBacks[i].isFired())callsNumber++}if(callsNumber==callBacks.length){$interval.cancel(interval);onSuccess.fire()}},100)};Callback.Calls={MAX:-1};return Callback}]);"use strict";controllers.factory("Error",["$timeout",function($timeout){var Error=augment.defclass({constructor:function(message,isShown,isCritical){this.message=message?message:null;this._isShown=isShown||false;this._isCritical=isCritical||false;if(this._isShown)this._onMessageShow()},show:function(message){this._onMessageShow();if(message)this.message=message;this._isShown=true;return this},hide:function(){this._isShown=false;return this},isShown:function(){return this._isShown},isCritical:function(){return this._isCritical},critical:function(isCritical){this._isCritical=isCritical;return this},getMessage:function(){return this.message},_onMessageShow:function(){var self=this;$timeout(function(){self.hide()},3e3)}});return Error}]);controllers.factory("Geolocation",["Error","Util",function(Error,Util){"use strict";var Geolocation=augment.defclass({constructor:function(){this.watchId=null},latlngToAddress:function(position,onSuccess,onFail){var geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:position},function(results,status){if(status==google.maps.GeocoderStatus.OK){if(results[0]){onSuccess.fire(results[0].formatted_address)}else{onFail.fire("No results found")}}else{onFail.fire("Geocoder failed due to: "+status)}})},isLocationEnabled:function(onSuccess,onFail){cordova.plugins.diagnostic.isLocationEnabledSetting(function(isEnabled){onSuccess.fire(isEnabled)},function(e){onFail.fire(new Error(e,true,true))})},openLocationSettings:function(){cordova.plugins.diagnostic.switchToLocationSettings()},findPosition:function(onSuccess,onError){navigator.geolocation.getCurrentPosition(function(r){var position=Geolocation.ParsePosition(r.coords);if(onSuccess)onSuccess.fire(position)},function(e){if(onError)onError.fire(new Error("Can not initialize service no gps data! change your location!",true,true))},{timeout:1e4,enableHighAccuracy:true})},watch:function(onSuccess,onError){this.watchId=navigator.geolocation.watchPosition(function(r){var position=Geolocation.ParsePosition(r.coords);onSuccess.fire(position)},function(){if(onError)onError.fire(new Error("Failed to find your position, maybe you are in a building."))},{enableHighAccuracy:true})},stopWatching:function(){navigator.geolocation.clearWatch(this.watchId)}});Geolocation.ParsePosition=function(coords){var parsedCoords=null;if(Util.IsString(coords)){parsedCoords={latitude:parseFloat(coords.split(",")[0]),longitude:parseFloat(coords.split(",")[1]),accuracy:null}}else if(Util.IsFunction(coords.lat)&&Util.IsFunction(coords.lng)){parsedCoords={latitude:coords.lat(),longitude:coords.lng(),accuracy:coords.accuracy||null}}else if(coords.latitude&&coords.longitude){parsedCoords=coords}else{return null}var position={toLatLng:function(){return new google.maps.LatLng(parsedCoords.latitude,parsedCoords.longitude)},lat:function(){return parsedCoords.latitude},lng:function(){return parsedCoords.longitude},calculateDistance:function(pos){pos=Geolocation.ParsePosition(pos);var distance=google.maps.geometry.spherical.computeDistanceBetween(this.toLatLng(),pos.toLatLng());return distance},accuracy:parsedCoords.accuracy};return position};return Geolocation}]);"use strict";controllers.factory("Http",["Callback","$http","Error","$ionicLoading",function(Callback,$http,Error,$ionicLoading){var Http=augment.defclass({constructor:function(){this.isLoading=true;this.url=null;this.timeout=1e4},service:function(serviceUrl){this.url=CONFIG.SERVER.URL+serviceUrl;return this},get:function(config){var self=this;if(this.isLoading)Http._showLoading();Http.Get({url:config.url||this.url,timeout:this.timeout,model:config.model,params:config.params,onAnyResponse:new Callback(function(){if(self.isLoading)Http._hideLoading();if(config.onAnyResponse)config.onAnyResponse.fire()}),onSuccess:config.onSuccess,onFail:config.onFail,onError:config.onError})},post:function(config){var self=this;if(this.isLoading)Http._showLoading();Http.Post({url:config.url||this.url,timeout:this.timeout,model:config.model,params:config.params,onAnyResponse:new Callback(function(){if(self.isLoading)Http._hideLoading();if(config.onAnyResponse)config.onAnyResponse.fire()}),onSuccess:config.onSuccess,onFail:config.onFail,onError:config.onError})}});Http._checkHttpResponse=function(data,config){var parsedData=null;if(data.status==="SUCCESS"){if(config.model){if(data.result===null){parsedData=null}else if(Array.isArray(data.result)){parsedData=[];for(var i=0;i<data.result.length;i++){parsedData.push(new config.model(data.result[i]))}}else{parsedData=new config.model(data.result)}}else{parsedData=data.result}if(config.onSuccess)config.onSuccess.fire(parsedData)}else{if(config.onFail)config.onFail.fire(new Error(data.result||"Unkown error happened while connecting to server!",true,true),data.status,data.result)}};Http._onHttpError=function(config){var error=new Error("Check your internet connectivity",true,true);if(config.onError)config.onError.fire(error)};Http._showLoading=function(){if(Http.IsLoading()){$ionicLoading.show({template:"<ion-spinner></ion-spinner>"})}};Http._hideLoading=function(){$ionicLoading.hide()};Http.Post=function(config){$http({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},url:config.url,method:"POST",data:config.params,timeout:config.timeout}).success(function(data,status,response){if(config.onAnyResponse)config.onAnyResponse.fire();Http._checkHttpResponse(data,config)}).error(function(){if(config.onAnyResponse)config.onAnyResponse.fire();Http._onHttpError(config)})};Http.Get=function(config){if(!config.params)config.params={};config.params.token="f837f625e15edf84dff132959e79e";$http({headers:{"Content-Type":"application/json; charset=utf-8"},url:config.url,method:"GET",params:config.params,timeout:config.timeout}).success(function(data,status,response){if(config.onAnyResponse)config.onAnyResponse.fire();Http._checkHttpResponse(data,config)}).error(function(e,s,h){if(config.onAnyResponse)config.onAnyResponse.fire();Http._onHttpError(config)})};Http.Ping=function(onSuccess,onFail,domain){var pingUrl=CONFIG.SERVER.URL;Http.Get({url:pingUrl,onSuccess:onSuccess,onError:onFail})};Http.Loading=true;Http.IsLoading=function(isLoading){if(typeof isLoading!=="undefined")Http.Loading=isLoading;return Http.Loading};return Http}]);"use strict";controllers.factory("Validator",["Error","Util",function(Error,Util){var Validator=augment.defclass({constructor:function(){this._error=new Error;this._blockMessage="";this._isPassed=true},_validate:function(isValid,errorMessage,inputId){inputId=!inputId?null:inputId;var isValidFlag=false;if(isValid())isValidFlag=true;this._isPassed=this._isPassed&&!isValidFlag;if(errorMessage!=null&&isValidFlag){this._error.show(errorMessage);this._blockMessage=this._blockMessage.length===0?errorMessage:this._blockMessage+" and "+errorMessage}if(inputId!==null){var inputElem=angular.element(document.getElementById(inputId));if(isValidFlag){inputElem.addClass("input-error")}else{inputElem.removeClass("input-error")}}return isValidFlag},isEmpty:function(value,errorMessage,inputId){return this._validate(function(){return!value||value.length==0},errorMessage,inputId)},isNull:function(value,errorMessage,inputId){return this._validate(function(){return value==null},errorMessage,inputId)},isNotEmail:function(value,errorMessage,inputId){return this._validate(function(){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!re.test(value)},errorMessage,inputId)},isNotNumber:function(value,errorMessage,inputId){return this._validate(function(){return!value||isNaN(value)},errorMessage,inputId)},isIn:function(values,isMatched,errorMessage,inputId){return this._validate(function(){return Util.Find(values,isMatched)!=null},errorMessage,inputId)},getError:function(){return this._error},getErrorBlock:function(){var error=new Error;console.log(this._blockMessage);error.show(this._blockMessage);return error},isPassed:function(){return this._isPassed}});return Validator}]);controllers.factory("ImageManager",["Error","$cordovaFileTransfer","Util","Http","Callback",function(Error,$cordovaFileTransfer,Util,Http,Callback){"use strict";var ImageManager=augment.defclass({constructor:function(){this.cameraOptions={};this.filePath=null;if(typeof cordova!=="undefined"){this.cameraOptions={destinationType:Camera.DestinationType.FILE_URI,quality:60,correctOrientation:true}}},encoded:function(){this.cameraOptions.destinationType=Camera.DestinationType.DATA_URL;return this},locationed:function(){this.cameraOptions.destinationType=Camera.DestinationType.FILE_URI;return this},fromCamera:function(onSuccess,onError){var self=this;this.cameraOptions.sourceType=Camera.PictureSourceType.CAMERA;navigator.camera.getPicture(function(r){if(self.cameraOptions.destinationType===Camera.DestinationType.FILE_URI)self.filePath=r;onSuccess.fire(r)},function(e){if(onError)onError.fire(e,true,true)},this.cameraOptions);return this},fromGallery:function(onSuccess,onError){var self=this;this.cameraOptions.sourceType=Camera.PictureSourceType.PHOTOLIBRARY;navigator.camera.getPicture(function(r){if(self.cameraOptions.destinationType===Camera.DestinationType.FILE_URI)self.filePath=r;onSuccess.fire(r)},function(e){if(onError)onError.fire(e,true,true)},this.cameraOptions);return this},fileMetadata:function(onSuccess,onError){var imageUrl=this.filePath;var defaultError=new Error("Error happened while getting file data");window.resolveLocalFileSystemURL(imageUrl,function(fileEntry){fileEntry.file(function(fileObj){fileObj.isImage=function(){return fileObj.type.search("image")!==-1};onSuccess.fire(fileObj)},function(err){$rootScope.onError.fire(defaultError)})},function(err){$rootScope.onError.fire(defaultError)})},upload:function(url,onSuccess,onError,others){var self=this;if(this.filePath){$cordovaFileTransfer.upload(url,self.filePath,{fileKey:others.key||"image",fileName:self.filePath.substr(self.filePath.lastIndexOf("/")+1),params:others.params}).then(function(result){var response=null;try{response=JSON.parse(result.response)}catch(e){response=result.response}onSuccess.fire(response)},function(err){var e=null;switch(err.code){case FileTransferError.FILE_NOT_FOUND_ERR:case FileTransferError.INVALID_URL_ERR:e=new Error("Invalid file, Please reselect profile picture");break;case FileTransferError.CONNECTION_ERR:e=new Error("Connection error, Please check your internet connection");break;case FileTransferError.ABORT_ERR:e=new Error("User signup aborted");break;default:e=new Error("Unknown error happened while connecting to server, please try again");break}if(onError)onError.fire(e)},function(progress){})}else{var http=new Http;http.isLoading=false;http.post({url:url,params:others.params,onSuccess:onSuccess,onFail:new Callback(function(e){onError.fire(e)}),onError:onError})}},thumbnail:function(width,height,onSuccess,onError,others){var options={uri:this.filePath,folderName:others.folder||"Tmp",quality:others.quality||75,width:width,height:height};window.ImageResizer.resize(options,function(image){onSuccess.fire(image)},function(){onError.fire(new Error("Error happened while making image thumbnail"))})}});return ImageManager}]);controllers.factory("Model",["$ionicPlatform","DatabaseConnector","Util","$timeout",function($ionicPlatform,DatabaseConnector,Util,$timeout){"use strict";var Model=augment.defclass({constructor:function(row){this.id=row&&row.id?row.id:null;if(this._tableName!==null){this._dbConnector=new DatabaseConnector(this._tableName)}Util.ForEach(row,function(value,key){if(Util.InArray(key,this._fields))this[key]=value},this);this._bindMethods()},_bindMethods:function(){var self=this;this._modelType.Find=function(){self._dbConnector.selectFirst({model:self._modelType,conditions:{id:self.id},onSuccess:onSuccess,onFail:onError})}},getPrimaryKey:function(){return this.id},setPrimaryKey:function(id){this.id=id},"delete":function(onSuccess,onFail){this._dbConnector.deleteById(this.getPrimaryKey(),onSuccess,onFail);return this},update:function(onSuccess,onFail){this._dbConnector.updateById(this.getPrimaryKey(),this.toJson(),onSuccess,onFail);return this},save:function(onSuccess,onFail){if(this.id){this.update(onSuccess,onFail)}else{this._dbConnector.insert(this._modelType,this.toJson(),onSuccess,onFail)}return this},toString:function(){return this.id},toJson:function(){var json={id:this.id};Util.ForEach(this,function(value,key){if(Util.InArray(key,this._fields))json[key]=value},this);return json},toArray:function(){var fields=[];Util.ForEach(this,function(value,key){if(Util.InArray(key,this._fields))fields.push(value)},this);return fields},toList:function(){var json={};Util.ForEach(this,function(value,key){if(Util.InArray(key,this._fields)&&!Util.InArray(key,this._hidden))json[key]=value},this);return json}});Model.Find=function(model,params,order,onSuccess,onError){var tmp=new model;var tableName=tmp._tableName;var dbConnector=new DatabaseConnector(tableName);if(Array.isArray(params)){dbConnector.select({model:model,order:order,conditions:params,onSuccess:onSuccess,onFail:onError})}else{dbConnector.selectFirst({model:model,order:order,conditions:[["id","=",params]],onSuccess:onSuccess,onFail:onError})}};return Model}]);application.factory("Settings",["Model","Http","Callback",function(Model,Http,Callback){"use strict";var Settings=augment(Model,function(parent){this.constructor=function(row){this._fields=["provider_timeout","server_rate","server_mode","server_email","e_number","e_email"];this._tableName="Settings";this._modelType=Settings;parent.constructor.call(this,row)}});Settings.SharedInstance=null;Settings.getInstance=function(){if(Settings.SharedInstance===null)Settings.SharedInstance=new Settings;return Settings.SharedInstance};Settings.Download=function(onSuccess){var onSettingsNotFound=new Callback(function(){Settings.SharedInstance=new Settings({server_rate:1e4});onSuccess.fire(Settings.SharedInstance)});var http=new Http;http.get({url:CONFIG.SERVER.URL,model:Settings,params:{start:true},onSuccess:new Callback(function(settings){Settings.SharedInstance=settings;onSuccess.fire(settings)}),onFail:onSettingsNotFound,onError:onSettingsNotFound})};return Settings}]);application.factory("User",["Model","Http","localStorageService","Callback","Geolocation","Util","Settings","$interval","SyncTrip","HailRequest","Error","Favorite","$cordovaPush","Share",function(Model,Http,localStorageService,Callback,Geolocation,Util,Settings,$interval,SyncTrip,HailRequest,Error,Favorite,$cordovaPush,Share){"use strict";var User=augment(Model,function(parent){this.constructor=function(row){this._fields=["email","password","firstName","lastName","gender","mobile","country","stripeCustomerId","stripeCardId","profilePicture"];this._tableName="User";this._modelType=User;parent.constructor.call(this,row);this.profilePicture=!this.profilePicture||this.profilePicture.length===0?"img/pp.png":this.profilePicture;this.pingActions=[];this.pingInterval=null;this.nearbyActionIndex=null};this.findPosition=function(onSuccess,onError){var g=new Geolocation;g.findPosition(onSuccess,onError)};this.findShare=function(onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,model:Share,params:{promo_share:true,userId:this.id},onSuccess:onSuccess,onFail:onError,onError:onError})};this.registerPushNotification=function(token){var self=this;var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,params:{"push-register":true,userId:this.id,android:ionic.Platform.isAndroid()?token:null,ios:ionic.Platform.isIOS()?token:null},onSuccess:new Callback,onFail:new Callback,onError:new Callback})};this.signin=function(onSuccess,onInactiveMobile,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,model:User,params:{signin:true,email:self.email,password:User.PrepareSecurityToken(self.password)},onSuccess:new Callback(function(user){user.password=self.password;User.SharedInstance=user;User.SetSecurityToken(self.password);onSuccess.fire(user)}),onFail:new Callback(function(e,status,result){if(status==="INACTIVE_MOBILE"){if(onInactiveMobile)onInactiveMobile.fire(result)}else{onError.fire(e)}}),onError:onError})};this.signup=function(onSuccess,onError){var self=this;var hashedPassword=(new Hashes.MD5).hex(self.password);var onUiniqueIdFound=function(uId){var http=new Http;http.get({url:CONFIG.SERVER.URL,model:User,params:{signup:true,firstName:self.firstName,lastName:self.lastName,gender:self.gender,mobile:self.mobile,email:self.email,password:hashedPassword,country:self.country,uid:uId,sid:0},onSuccess:new Callback(function(user){self.id=user.id;onSuccess.fire()}),onFail:new Callback(function(e,status,result){if(status==="INACTIVE_USER"){onSuccess.fire();return}onError.fire(e)}),onError:onError})};plugins.uniqueDeviceID.get(onUiniqueIdFound,function(){onError.fire(new Error("Can't find the device id, please try again later!",true,true))})};this.ping=function(){var self=this;var startPinging=function(){self.pingInterval=$interval(function(){for(var i=0;i<self.pingActions.length;i++){self.pingActions[i]()}},Settings.getInstance().server_rate*1e3)};if(!Settings.getInstance().server_rate){Settings.Download(new Callback(function(){startPinging()}))}else{startPinging()}};this.updateProfile=function(profile,imageManager,onSuccess,onError){var self=this;imageManager.upload(CONFIG.SERVER.URL,new Callback(function(r){onSuccess.fire()}),onError,{params:{"update-profile":true,userId:self.id,firstName:profile.firstName,lastName:profile.lastName,email:profile.email}})};this.sync=function(hailOnProgress,hailConfirmed,onFail,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,model:SyncTrip,params:{sync:true,userId:this.id},onSuccess:new Callback(function(sync){if(!sync){onFail.fire();return}var buildRequest=function(tripSync){var request=new HailRequest(tripSync);return request};if(sync.dropoff.trim().length!==0||sync.noservice.trim().length!==0){onFail.fire();return}else if(sync.pickup.trim().length!==0||sync.arrived.trim().length!==0||sync.response.trim().length!==0){hailConfirmed.fire(buildRequest(sync));return}else if(sync.response.trim().length===0&&sync.pickupLocation!==null){hailOnProgress.fire(buildRequest(sync));return}onFail.fire()}),onFail:null,onError:onError})};this.verifyMobile=function(code,onSuccess,onError){var self=this;var smsHashedCode=(new Hashes.MD5).hex(code);var http=new Http;http.get({url:CONFIG.SERVER.URL,model:User,params:{nexmo:true,userId:this.id,email:this.email,val:smsHashedCode},onSuccess:new Callback(function(){User.SetSecuritySmsToken(code);onSuccess.fire()}),onFail:onError,onError:onError})};this.resendSms=function(onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{SEND_SMS:true,email:this.email,mobile:this.mobile},onSuccess:new Callback(function(r){self.id=r;onSuccess.fire()}),onFail:onError,onError:onError})};this.forgotPasswordSendSms=function(onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{nexmo_forgot_password:true,phone:this.mobile},onSuccess:onSuccess,onFail:onError,onError:onError})};this.forgotPasswordValidateMobile=function(code,onSuccess,onError){var self=this;var smsHashedCode=(new Hashes.MD5).hex(code);var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{validate_forgot_password:true,phone:this.mobile,val:smsHashedCode},onSuccess:onSuccess,onFail:onError,onError:onError})};this.forgotPasswordReset=function(onSuccess,onError){var self=this;var passwordHashed=(new Hashes.MD5).hex(this.password);var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{forgot_password:true,phone:this.mobile,password:passwordHashed},onSuccess:onSuccess,onFail:onError,onError:onError})};this.createCustomer=function(onSuccess,onError){var self=this;var requestStripeCustomer=function(){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"stripe-customer":true,userId:self.id,customerId:self.stripeCustomerId},onSuccess:new Callback(function(r){onSuccess.fire(self.stripeCustomerId)}),onFail:onError,onError:onError})};stripe.customers.create({description:Util.String("#{0} {1} {2} ({3})",[this.id,this.firstName,this.lastName,this.mobile]),email:this.email},function(result){if(result.id){self.stripeCustomerId=result.id;requestStripeCustomer()}else if(result.error){onError.fire(new Error(result.error.message))}else{onError.fire(new Error("Customer account can't be created now!"))}})};this.createCreditCard=function(credit,onSuccess,onError){var self=this;var requestMotivationMessage=function(){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"motivate-credit":true,userId:self.id},onSuccess:new Callback(function(r){onSuccess.fire(r)}),onFail:new Callback(function(){onSuccess.fire("Credit Card is saved successfuly, you can now recharge your balance")}),onError:new Callback(function(){onSuccess.fire("Credit Card is saved successfuly, you can now recharge your balance")})})};stripe.customers.createCard(this.stripeCustomerId,{card:credit},function(result){if(result.id){self.stripeCardId=result.id;requestMotivationMessage()}else if(result.error){onError.fire(new Error(result.error.message))}else{onError.fire(new Error("Customer account can't be created now!"))}})};this.editCreditCard=function(credit,onSuccess,onError){var self=this;var tmpCreditCardId=self.stripeCardId;stripe.customers.removeCard(self.stripeCustomerId,tmpCreditCardId,function(result){if(result.id&&result.id===tmpCreditCardId&&result.deleted){
this.createCreditCard(credit,onSuccess,onError)}else{onError.fire(new Error("Can't edit your credit card now, try again or contact the technical support"))}})};this.findCreditCards=function(onSuccess,onError){var defaultError=new Error("Can't retrieve customer credit cards now, please contact the technical support");if(typeof stripe==="undefined"){onError.fire(defaultError);return}if(!this.isStripeCustomerCreated()){onSuccess.fire([]);return}stripe.customers.retrieve(this.stripeCustomerId,function(customer){if(customer.error){onError.fire()}else{onSuccess.fire(customer.sources.data)}})};this.saveCreditCard=function(credit,onSuccess,onError){var self=this;var onCustomerCreated=new Callback(function(){self.createCreditCard(credit,onSuccess,onError)});if(this.stripeCustomerId===null||this.stripeCustomerId.length===0||this.stripeCustomerId==="0"){this.createCustomer(onCustomerCreated,onError)}else{onCustomerCreated.fire()}};this.addRechargeCredit=function(amount,onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"add-credit":true,type:"cash",credit:amount,userId:self.id},onSuccess:onSuccess,onFail:onError,onError:onError})};this.subtractCredit=function(amount,onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"deduct-credit":true,userId:this.id,type:"cash",payment:amount},onSuccess:onSuccess,onFail:onError,onError:onError})};this.prepaidCard=function(code,onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"validate-prepaid":true,userId:this.id,code:code},onSuccess:onSuccess,onFail:onError,onError:onError})};this.recharge=function(amount,onSuccess,onError){var self=this;stripe.charges.create({amount:amount,currency:"usd",customer:this.stripeCustomerId,description:Util.String("#{0} {1} {2} ({3}) charged with {4}$",[this.id,this.firstName,this.lastName,this.mobile,(amount/100).toFixed(2)])},function(result){if(result.id&&result.paid){self.addRechargeCredit(amount/100,new Callback(function(){self.credit+=(amount/100).toFixed(2);onSuccess.fire()}),onError)}else if(result.error){onError.fire(new Error(result.error.message))}else{onError.fire(new Error("Charging your account can't be processed now!"))}})};this.findCredit=function(onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"display-credit":true,userId:this.id},onSuccess:new Callback(function(r){if(!r)self.credit=0;else self.credit=r[0];onSuccess.fire(self.credit)}),onFail:onError,onError:onError})};this.findFavorites=function(onSuccess,onError){Favorite.FindAll(this,onSuccess,onError)};this.findBlacklist=function(onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{block:true,userId:this.id},onSuccess:new Callback(function(r){onSuccess.fire(r[0])}),onFail:onError,onError:onError})};this.store=function(){return localStorageService.set(User.STORAGE_KEY,this.toJson())};this.logout=function(){localStorageService.remove(User.STORAGE_KEY);$interval.cancel(this.pingInterval)};this.isStripeCustomerCreated=function(){if(this.stripeCustomerId===null||this.stripeCustomerId.length===0||this.stripeCustomerId==="0"){return false}return true};this.findNearbyCars=function(mode,onSuccess,onError){var self=this;var makeHttpRequest=function(){self.findPosition(new Callback(function(position){var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,params:{nearby_cars:true,lat:position.lat(),lng:position.lng(),tripType:mode.id},onSuccess:onSuccess,onFail:onError,onError:onError})}))};if(this.nearbyActionIndex===null)this.nearbyActionIndex=this.pingActions.push(makeHttpRequest)-1;else this.pingActions[this.nearbyActionIndex]=makeHttpRequest;console.log(mode)}});User.STORAGE_KEY="user";User.SharedInstance=null;User.IsStored=function(){var user=localStorageService.get(User.STORAGE_KEY);return user!==null};User.ToAuthToken=function(code){var tokenMd5=(new Hashes.MD5).hex(code);return tokenMd5};User.TOKEN_KEY="TOKEN_KEY";User.PrepareSecurityToken=function(password){var smsToken=localStorageService.get(User.SMS_TOKEN_KEY);var hashedPassword=(new Hashes.MD5).hex(password);var contanenatedCode=smsToken+hashedPassword;var token=(new Hashes.MD5).hex(contanenatedCode);return token};User.SetSecurityToken=function(password){localStorageService.set(User.TOKEN_KEY,User.PrepareSecurityToken(password));return this};User.GetSecurityToken=function(){return localStorageService.get(User.TOKEN_KEY)};User.SMS_TOKEN_KEY="SMS_TOKEN_KEY";User.SetSecuritySmsToken=function(smsCode){var hashedSmsCode=(new Hashes.MD5).hex(smsCode);localStorageService.set(User.SMS_TOKEN_KEY,hashedSmsCode);return this};User.InitPushNotification=function(){try{if(ionic.Platform.isAndroid()){$cordovaPush.register({senderID:"307744414387"}).then(function(result){},function(err){})}else{$cordovaPush.register({badge:true,sound:true,alert:true}).then(function(deviceToken){User.getInstance().registerPushNotification(deviceToken)},function(err){})}}catch(e){}};User.getInstance=function(){if(User.SharedInstance===null&&User.IsStored()){var userJson=localStorageService.get(User.STORAGE_KEY);User.SharedInstance=new User(userJson)}else if(User.SharedInstance===null){User.SharedInstance=new User}return User.SharedInstance};return User}]);application.factory("Mode",["Model","Util","Http","Callback",function(Model,Util,Http,Callback){"use strict";var Mode=augment(Model,function(parent){this.constructor=function(row){this._fields=["name","maxPassengers","minFare","cancelationFee","etaTime"];this._tableName="Mode";this._modelType=Mode;parent.constructor.call(this,row)};this.getDragDealerStep=function(){if(this.id===Mode.ID.SERVISS)return 1;else if(this.id===Mode.ID.SERVISS_PLUS)return 2;else if(this.id===Mode.ID.TAXI)return 3};this.isTaxi=function(){return this.id==Mode.ID.TAXI};this.isService=function(){return this.id==Mode.ID.SERVISS};this.isServicePlus=function(){return this.id==Mode.ID.SERVISS_PLUS};this.eta=function(onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{eta_estimation:true,tripTypeId:this.id},onSuccess:new Callback(function(r){if(self.isTaxi())self.etaTime=r.taxi;else if(self.isService())self.etaTime=r.service;else if(self.isServicePlus())self.etaTime=r.serviceplus;if(onSuccess)onSuccess.fire(r)}),onFail:onError,onError:onError})}});Mode.ID={TAXI:1,SERVISS:2,SERVISS_PLUS:3};Mode.All=[];Mode.FindAll=function(onSuccess,onError){if(Mode.All.length>0){if(onSuccess)onSuccess.fire(Mode.All);return}var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,model:Mode,params:{modes_fare:true},onSuccess:new Callback(function(modes){Mode.All=modes;if(onSuccess)onSuccess.fire(Mode.All)}),onError:onError})};Mode.FindById=function(id){if(Mode.All===null)return null;return Util.Find(Mode.All,function(mode){return mode.id==id})};Mode.FromDragDealer=function(stepId){var modeId=null;if(stepId===1)modeId=Mode.ID.SERVISS;else if(stepId===2)modeId=Mode.ID.SERVISS_PLUS;else if(stepId===3)modeId=Mode.ID.TAXI;return Mode.FindById(modeId)};return Mode}]);application.factory("HailRequest",["Model","Http","Error","Callback","Settings","Driver","Util","SyncTrip","Mode","$timeout","Geolocation",function(Model,Http,Error,Callback,Settings,Driver,Util,SyncTrip,Mode,$timeout,Geolocation){"use strict";var HailRequest=augment(Model,function(parent){this.constructor=function(row){this._fields=["ride_id","hail","response","arrived","pickup","dropoff","cancel","noservice","pickup_address","dropoff_address","pickup_location","dropoff_location","passengers","fare","paid","payment_method","trip_mode","driver"];this._tableName="HailRequest";this._modelType=HailRequest;parent.constructor.call(this,row);this.pickupLocation=this.pickup_location?Geolocation.ParsePosition(this.pickup_location):null;this.pickupAddress=this.pickup_address?this.pickup_address:null;this.dropoffAddress=this.dropoff_address?this.dropoff_address:null;this.dropoffLocation=this.dropoff_location?Geolocation.ParsePosition(this.dropoff_location):null;this.mode=this.trip_mode?Mode.FindById(parseInt(this.trip_mode)):null;this.passengers=this.passengers?this.passengers:1;this.pingInterval=null;this.rideId=this.ride_id?this.ride_id:null;this.comment=null;this.driver=this.driver?new Driver(this.driver):new Driver;this.pingActions=[];this.status=null;this.onDroppedoff=null;this.totalCost=0;this.driverTimeout=null;this.isPingable=true;this.isSyncable=true;this.nearestPoint={};this.nearestPointWatch=null};this.estimateCost=function(onSuccess,onError){var self=this;var makeEstimateRequest=function(){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{fare:true,pickupLat:self.pickupLocation.lat(),pickupLng:self.pickupLocation.lng(),dropoffLat:self.dropoffLocation.lat(),dropoffLng:self.dropoffLocation.lng(),modeId:self.mode.id},onSuccess:new Callback(function(cost){self.totalCost=cost*self.passengers;onSuccess.fire(self.totalCost)}),onFail:onError,onError:onError})};if(this.mode.id===Mode.ID.SERVISS){makeEstimateRequest()}else{var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,params:{trip_validate:true,trip_type:this.mode.id,lat1:this.pickupLocation.lat(),long1:this.pickupLocation.lng(),lat2:this.dropoffLocation.lat(),long2:this.dropoffLocation.lng(),address1:this.pickupAddress,address2:this.dropoffAddress},onSuccess:new Callback(function(){makeEstimateRequest()}),onFail:onError,onError:onError})}};this.consumeCost=function(user,onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{ride_payment:true,userId:user.id,rideId:this.rideId},onSuccess:new Callback(function(x,y,z){console.log(x,y,z);onSuccess.fire()}),onFail:onError,onError:onError})};this.ping=function(user,onSuccess,onError){var self=this;var http=new Http;http.isLoading=false;var sendPingData=function(){if(!self.isPingable)return;http.get({url:CONFIG.SERVER.URL,model:Driver,params:{ping:true,userId:user.id},onSuccess:new Callback(function(driver){self.isPingable=false;if(self.driverTimeout)$timeout.cancel(self.driverTimeout);self.driver=driver;onSuccess.fire(driver)}),onFail:new Callback(function(e){self.isPingable=false;onError.fire(e)}),onError:onError})};user.pingActions.push(sendPingData)};this.sync=function(user,onSuccess,onError){var self=this;var http=new Http;http.isLoading=false;user.pingActions.push(function(){if(!self.isSyncable)return;http.get({url:CONFIG.SERVER.URL,model:SyncTrip,params:{sync:true,userId:user.id},onSuccess:new Callback(function(sync){if(!sync)return;if(sync.dropoff.trim().length!==0){self.status="THANKS FOR USING ESERVISS";self.isSyncable=false;if(self.onDroppedoff)self.onDroppedoff.fire()}else if(sync.pickup.trim().length!==0){self.status=Util.String("{0} PICKED YOU UP",[sync.mode.name])}else if(sync.arrived.trim().length!==0){self.status=Util.String("{0} ARRIVED",[sync.mode.name])}else if(sync.response.trim().length!==0){self.status=Util.String("{0} ON ITS WAY",[sync.mode.name])}onSuccess.fire(sync)}),onFail:null,onError:onError})})};this.make=function(user,onSuccess,onError){var self=this;var requestDriverTimeout=function(settings){var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,model:Settings,params:{driver_timeout:true,rideID:self.rideId,userID:user.id},onSuccess:new Callback(function(settings){$timeout(function(){requestDriverTimeout(settings)},settings.provider_timeout*1e3)}),onFail:new Callback(function(e){self.isPingable=false;onError.fire(e)}),onError:onError})};var initDriverTimeout=function(){var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,model:Settings,params:{start:true},onSuccess:new Callback(function(settings){$timeout(function(){requestDriverTimeout(settings)},settings.provider_timeout*1e3)}),onError:onError})};var find=function(){var http=new Http;http.timeout=null;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,params:{find:true,userId:user.id,currentLat:self.pickupLocation.lat(),currentLng:self.pickupLocation.lng(),destinationLat:self.dropoffLocation?self.dropoffLocation.lat():null,destinationLng:self.dropoffLocation?self.dropoffLocation.lng():null,tripType:self.mode.id,passengers:self.passengers},onSuccess:new Callback(function(){self.isPingable=true;self.ping(user,onSuccess,onError)}),onFail:null,onError:null})};var makeUserRequest=function(){var http=new Http;http.isLoading=false;http.get({url:CONFIG.SERVER.URL,params:{user:true,user_id:user.id,trip_type:self.mode.id,passengers:self.passengers,lat1:self.pickupLocation.lat(),long1:self.pickupLocation.lng(),lat2:self.dropoffLocation?self.dropoffLocation.lat():null,long2:self.dropoffLocation?self.dropoffLocation.lng():null,address1:self.pickupAddress,address2:self.dropoffAddress?self.dropoffAddress:null,comment:self.comment},onSuccess:new Callback(function(rideId){self.rideId=rideId;find()}),onFail:onError,onError:onError})};makeUserRequest()};this.feedback=function(user,rating,comment,onSuccess,onError){var self=this;var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"insert-feedback":true,rideId:this.rideId,userId:user.id,driverId:this.driver.id,comment:comment,rate:rating},onSuccess:onSuccess,onFail:onError,onError:onError})};this.setMode=function(mode){if(mode===null)return;this.mode=mode;if(this.passengers>mode.maxPassengers)this.passengers=mode.maxPassengers};this.validateServicePickup=function(onSuccess,onError){var self=this;if(!this.mode||this.mode.id!==Mode.ID.SERVISS){onSuccess.fire(true);return}var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{"validate-service-pickup":true,pickupLat:this.pickupLocation.lat(),pickupLng:this.pickupLocation.lng()},onSuccess:new Callback(function(r){self.nearestPoint.location=Geolocation.ParsePosition(r.location);self.nearestPoint.distance=r.distance;self.nearestPoint.message=r.safe?r.safe:"Meeting point with service is near";self.nearestPoint.header={line:[]};onSuccess.fire(false)}),onFail:onError,onError:onError})};this.watchToMeetingPoint=function(onProgress,onMinDistance,onNearDistance,onError){var self=this;if(this.nearestPointWatch)this.nearestPointWatch.stopWatching();var MIN_DISTANCE=10;var NEAR_DISTANCE=100;this.nearestPointWatch=new Geolocation;this.nearestPointWatch.watch(new Callback(function(position){onProgress.fire(position);var minDistance=MIN_DISTANCE+position.accuracy;minDistance=minDistance>50?50:minDistance;var nearDistance=NEAR_DISTANCE+position.accuracy;nearDistance=nearDistance>150?150:nearDistance;var distance=position.calculateDistance(self.nearestPoint.location);if(distance<=nearDistance){console.log("nearDistance",nearDistance);onNearDistance.fire()}if(distance<=minDistance){self.nearestPointWatch.stopWatching();onMinDistance.fire()}}),onError)};this.inService=function(onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,params:{available_cars:true,trip_type:this.mode.id},onSuccess:onSuccess,onFail:onError,onError:onError})}});return HailRequest}]);application.factory("Driver",["Model","Http","Callback",function(Model,Http,Callback){"use strict";var Driver=augment(Model,function(parent){this.constructor=function(row){this._fields=["DriverName","DriverPhone","DriverPhoto","CarBrand","CarColor","CarNumberPalte","CarNumber","comment","rate"];this._tableName="Driver";this._modelType=Driver;parent.constructor.call(this,row)}});return Driver}]);application.factory("Country",["Model","Http","Callback",function(Model,Http,Callback){"use strict";var Country=augment(Model,function(parent){this.constructor=function(row){this._fields=["name","phoneCode"];this._tableName="Country";this._modelType=Country;parent.constructor.call(this,row)}});Country.FindAll=function(onSuccess,onError){var http=new Http;http.get({url:"countries.json",model:Country,onSuccess:onSuccess,onError:onError})};return Country}]);application.factory("SyncTrip",["Model","Mode",function(Model,Mode){"use strict";var SyncTrip=augment(Model,function(parent){this.constructor=function(row){this._fields=["user_id","car_id","ride_id","driver_id","hail","response","arrived","pickup","dropoff","cancel","noservice","pickup_address","dropoff_address","pickup_location","dropoff_location","passengers","fare","paid","payment_method","trip_mode"];this._tableName="SyncTrip";this._modelType=SyncTrip;parent.constructor.call(this,row);this.passengers=parseInt(this.passengers);this.trip_mode=parseInt(this.trip_mode);this.passengers=this.passengers===0?1:this.passengers;this.mode=this.trip_mode>0?Mode.FindById(this.trip_mode):null;this.pickupLocation=null;this.dropoffLocation=null;var self=this;if(this.pickup_location.trim().length!==0&&this.pickup_location.split(",").length===2){this.pickupLocation={lat:function(){return self.pickup_location.split(",")[0]},lng:function(){return self.pickup_location.split(",")[1]}}}if(this.dropoff_location.trim().length!==0&&this.dropoff_location.split(",").length===2){this.dropoffLocation={lat:function(){return self.dropoff_location.split(",")[0]},lng:function(){return self.dropoff_location.split(",")[1]}}}}});return SyncTrip}]);application.factory("Favorite",["Model","Http",function(Model,Http){"use strict";var Favorite=augment(Model,function(parent){this.constructor=function(row){this._fields=["name","res","lat","lng","address","user_id"];this._tableName="Favorite";this._modelType=Favorite;parent.constructor.call(this,row);var self=this;this.location={lat:function(){return self.lat},lng:function(){return self.lng}}};this.save=function(onSuccess,onError){console.log(this);var http=new Http;http.get({url:CONFIG.SERVER.URL,model:Favorite,params:{edit_favourites:true,id:this.id,lat:this.location.lat(),lng:this.location.lng(),res:"",address:this.address,name:this.name},onSuccess:onSuccess,onFail:onError,onError:onError})}});Favorite.FindAll=function(user,onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,model:Favorite,params:{get_favourites:true,userId:user.id},onSuccess:onSuccess,onFail:onError,onError:onError})};return Favorite}]);application.factory("Promotion",["Model","Http",function(Model,Http){"use strict";var Promotion=augment(Model,function(parent){this.constructor=function(row){this._fields=["name","description","image","cta","link"];this._tableName="Promotion";this._modelType=Promotion;parent.constructor.call(this,row)}});Promotion.FindAll=function(user,onSuccess,onError){var http=new Http;http.get({url:CONFIG.SERVER.URL,model:Promotion,params:{promo:true,userId:user.id},onSuccess:onSuccess,onFail:onError,onError:onError})};return Promotion}]);application.factory("Share",["Model","Http",function(Model,Http){"use strict";var Share=augment(Model,function(parent){this.constructor=function(row){this._fields=["image","title","code"];this._tableName="Share";this._modelType=Share;parent.constructor.call(this,row)}});return Share}]);controllers.controller("HomeController@splash",["$scope","$state","$stateParams","$ionicHistory","$ionicPlatform","$cordovaDialogs","$rootScope","Callback","Geolocation","$ionicModal","$timeout","Settings","$ionicLoading",function($scope,$state,$stateParams,$ionicHistory,$ionicPlatform,$cordovaDialogs,$rootScope,Callback,Geolocation,$ionicModal,$timeout,Settings,$ionicLoading){"use strict"}]);controllers.controller("HomeController@landing",["$scope","$state","$stateParams","$translate","$ionicPlatform","$cordovaDialogs","$rootScope","Callback","Geolocation","$ionicModal","$timeout","Settings","$ionicLoading","User","$ionicHistory","Mode",function($scope,$state,$stateParams,$translate,$ionicPlatform,$cordovaDialogs,$rootScope,Callback,Geolocation,$ionicModal,$timeout,Settings,$ionicLoading,User,$ionicHistory,Mode){"use strict";$rootScope.onError=new Callback(function(e){$cordovaDialogs.alert(e.message,"Note")});$rootScope.onProgress=new Callback(function(){$ionicLoading.show({template:"<ion-spinner></ion-spinner>"})});$rootScope.onProgressDone=new Callback(function(){$ionicLoading.hide()});$rootScope.ifLocationEnabled=function(onEnabled,onNotEnabled){var locationoffModal=null;var g=new Geolocation;g.isLocationEnabled(new Callback(function(isEnabled){if(isEnabled)onEnabled.fire();else{if(locationoffModal!==null){locationoffModal.show();return}$ionicModal.fromTemplateUrl("templates/locationoff.modal.html",{scope:$scope,animation:"slide-in-up"}).then(function(modal){locationoffModal=modal;modal.show();$scope.onTurnOnLocationTapped=function(){modal.hide();g.openLocationSettings();if(onNotEnabled)onNotEnabled.fire();$timeout(function(){$rootScope.ifLocationEnabled(onEnabled,onNotEnabled)},7e3)}})}}),$rootScope.onError)};$rootScope.$on("$cordovaPush:notificationReceived",function(event,notification){if(ionic.Platform.isAndroid()){switch(notification.event){case"registered":if(notification.regid.length>0){User.getInstance().registerPushNotification(notification.regid)}break;case"message":$cordovaDialogs.alert(notification.message,"Message!");break;case"error":break;default:break}}else if(ionic.Platform.isIOS()){if(notification.alert){$cordovaDialogs.alert(notification.alert,"Message!")}}});Settings.Download(new Callback(function(){$rootScope.onContactUs=function(){$cordovaDialogs.confirm("Need Help? Don't hesitate to call us now","Customer Support",["Call","Cancel"]).then(function(buttonIndex){var btnIndex=buttonIndex;if(btnIndex===1){plugins.CallNumber.callNumber(function(){},function(e){$rootScope.onError.fire(new Error("Error while contacting customer support, try again later",true,true))},Settings.getInstance().e_number)}})}}));if(User.IsStored()){$ionicHistory.nextViewOptions({disableBack:true});Mode.FindAll(new Callback(function(){User.getInstance().signin(new Callback(function(){User.getInstance().store();User.InitPushNotification();User.getInstance().ping();User.getInstance().sync(new Callback(function(request){$state.go("menu.hailrequest",{request:request})}),new Callback(function(request){$state.go("menu.requestconfirmed",{request:request})}),new Callback(function(){$state.go("menu.hailrequest")}),$rootScope.onError)}),null,$rootScope.onError)}),$rootScope.onError)}var languageConfig={title:"Select a Language",items:[{text:"English",value:"en"},{text:"Arabic",value:"ar"}],doneButtonLabel:"Done",cancelButtonLabel:"Cancel"};$scope.onLanguageTapped=function(){if(typeof cordova==="undefined"){$translate.use("en");$state.go("authenticate");return}plugins.listpicker.showPicker(languageConfig,function(lang){if(lang==="en")$scope.language="ENGLISH";else if(lang==="ar")$scope.language="العربية";$translate.use(lang);$state.go("authenticate")},function(){})}}]);controllers.controller("HomeController@sidemenu",["$scope","$state","$stateParams","$ionicHistory","$timeout","$cordovaDialogs","Settings","$rootScope","Error",function($scope,$state,$stateParams,$ionicHistory,$timeout,$cordovaDialogs,Settings,$rootScope,Error){"use strict";$scope.menuWidth=window.innerWidth;$scope.onBackTapped=function(){if($ionicHistory.backView().stateName==="menu.hailrequest"){$ionicHistory.clearCache();$timeout($ionicHistory.goBack,50)}else{$ionicHistory.goBack()}}}]);controllers.controller("UserController@signin",["$scope","$state","$stateParams","$rootScope","Callback","User","$ionicHistory","$ionicPopup","Validator","$translate","Mode",function($scope,$state,$stateParams,$rootScope,Callback,User,$ionicHistory,$ionicPopup,Validator,$translate,Mode){"use strict";var popupConfirmPhone=null,popupConfirmCode=null;$scope.login={};Mode.FindAll();$scope.onLoginTapped=function(login){var validator=new Validator;validator.isEmpty(login.email,"Please enter your email address","login-email");validator.isEmpty(login.password,"Please enter your password","login-password");if(!validator.isPassed()){$rootScope.onError.fire(validator.getErrorBlock());return}User.getInstance().email=login.email;User.getInstance().password=login.password;User.getInstance().signin(new Callback(function(){User.InitPushNotification();$ionicHistory.nextViewOptions({disableBack:true});User.getInstance().store();User.getInstance().ping();User.getInstance().sync(new Callback(function(request){$state.go("menu.hailrequest",{request:request})}),new Callback(function(request){$state.go("menu.requestconfirmed",{request:request})}),new Callback(function(){$state.go("menu.hailrequest")}),$rootScope.onError)}),new Callback(function(mobileNumber){$scope.confirm={alert:true,message:"YOU CAN NOT LOGIN VERIFY YOUR NUMBER FIRST!",buttons:{isSubmit:true},input:{placeholder:"YOUR MOBILE NUMBER",data:mobileNumber,isAllowed:true}};$scope.onSubmitTapped=function(newMobile){popupConfirmPhone.close();User.getInstance().mobile=newMobile;User.getInstance().resendSms(new Callback(function(){$scope.confirm={message:null,buttons:{isSubmit:true},input:{placeholder:null,data:null,isAllowed:true}};$translate(["CONFIRM_CODE_MESSAGE","CONFIRMATION_CODE"]).then(function(translations){$scope.confirm.message=translations.CONFIRM_CODE_MESSAGE;$scope.confirm.input.placeholder=translations.CONFIRMATION_CODE});popupConfirmCode=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm",scope:$scope});$scope.onSubmitTapped=function(code){var validator=new Validator;if(validator.isEmpty(code,"Please enter confirmation code you recieved via sms")){$rootScope.onError.fire(validator.getError());return}User.getInstance().verifyMobile(code,new Callback(function(){popupConfirmCode.close();User.InitPushNotification();$ionicHistory.nextViewOptions({disableBack:true});User.getInstance().store();User.getInstance().ping();$state.go("menu.hailrequest")}),$rootScope.onError)}}),$rootScope.onError)};popupConfirmPhone=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm",scope:$scope})}),$rootScope.onError)}}]);controllers.controller("UserController@signup",["$scope","$state","$stateParams","$ionicPopup","$translate","Util","$timeout","User","Callback","$rootScope","Country","Validator","$ionicModal","Mode",function($scope,$state,$stateParams,$ionicPopup,$translate,Util,$timeout,User,Callback,$rootScope,Country,Validator,$ionicModal,Mode){"use strict";Mode.FindAll();var popupConfirmPhone=null,popupConfirmCode=null;$scope.signup={country:"Lebanon",mobile:{code:"+961"},gender:{}};var onMobileConfirmed=new Callback(function(){var validator=new Validator;validator.isEmpty($scope.signup.firstName,"Please enter your first name","signup-firstName");validator.isEmpty($scope.signup.lastName,"Please enter your last name","signup-lastName");validator.isEmpty($scope.signup.email,"Please enter your email address","signup-email");validator.isEmpty($scope.signup.password,"Please enter your password","signup-password");validator.isEmpty($scope.signup.country,"Please enter your country","signup-country");validator.isEmpty($scope.signup.mobile.code,"Please enter your mobile country code");validator.isEmpty($scope.signup.mobile.number,"Please enter your mobile number","signup-mobile");validator.isEmpty($scope.signup.gender.value,"Please enter your gender","signup-gender");if(!validator.isPassed()){$rootScope.onError.fire(validator.getErrorBlock());return}User.getInstance().firstName=$scope.signup.firstName;User.getInstance().lastName=$scope.signup.lastName;User.getInstance().email=$scope.signup.email;User.getInstance().password=$scope.signup.password;User.getInstance().country=$scope.signup.country;User.getInstance().mobile=Util.String("{0}{1}",[$scope.signup.mobile.code,$scope.signup.mobile.number]);User.getInstance().gender=$scope.signup.gender.value;User.getInstance().signup(new Callback(function(){$ionicHistory.nextViewOptions({disableBack:true});User.getInstance().store();User.getInstance().ping();$state.go("menu.hailrequest")}),$rootScope.onError)});var popupMobileConfirm=function(){var phoneNumber=$scope.signup.mobile&&$scope.signup.mobile.code&&$scope.signup.mobile.number?Util.String("{0} {1}",[$scope.signup.mobile.code,$scope.signup.mobile.number]):"";$scope.confirm={message:null,buttons:{isSubmit:false},input:{data:phoneNumber,isAllowed:false}};$translate("IS_YOUR_MOBILE").then(function(confirmCodeMessage){$scope.confirm.message=confirmCodeMessage});popupConfirmPhone=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm",scope:$scope});$scope.onYesTapped=function(){popupConfirmPhone.close();User.getInstance().signup(new Callback(function(){popupConfirmCode=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm",scope:$scope});$scope.confirm.buttons.isSubmit=true;$scope.confirm.input.isAllowed=true;$scope.confirm.input.placeholder=null;$scope.confirm.input.data=null;$translate(["CONFIRM_CODE_MESSAGE","CONFIRMATION_CODE"]).then(function(translations){$scope.confirm.message=translations.CONFIRM_CODE_MESSAGE;$scope.confirm.input.placeholder=translations.CONFIRMATION_CODE});$scope.onSubmitTapped=function(code){var validator=new Validator;if(validator.isEmpty(code,"Please enter confirmation code you recieved via sms")){$rootScope.onError.fire(validator.getError());return}User.getInstance().verifyMobile(code,new Callback(function(){popupConfirmCode.close();$state.go("menu.hailrequest")}),$rootScope.onError)}}),$rootScope.onError)};$scope.onNoTapped=function(){popupConfirmPhone.close()}};$scope.onCountryTapped=function(){if(typeof cordova==="undefined"){$scope.signup.country="Lebanon";$scope.signup.mobile.code="+961";return}var countryConfig={title:"Select a Country",items:[],selectedValue:"202",doneButtonLabel:"Done",cancelButtonLabel:"Cancel"};Country.FindAll(new Callback(function(countries){for(var i=0;i<countries.length;i++){countryConfig.items.push({text:countries[i].name,value:i})}plugins.listpicker.showPicker(countryConfig,function(countryIndex){$scope.$apply(function(){$scope.signup.country=countries[countryIndex].name;$scope.signup.mobile.code=Util.String("{0}{1}",["+",countries[countryIndex].phoneCode])})},function(){})}),$rootScope.onError)};$scope.onGenderTapped=function(){if(typeof cordova==="undefined"){$scope.signup.gender={text:"Male",value:"MALE"};return}$translate(["MALE","FEMALE"]).then(function(translations){var genderConfig={title:"Select a Gender",items:[{text:translations.MALE,value:"MALE"},{text:translations.FEMALE,value:"FEMALE"}],doneButtonLabel:"Done",cancelButtonLabel:"Cancel"};plugins.listpicker.showPicker(genderConfig,function(gender){var genderItem=Util.Find(genderConfig.items,function(item){return item.value==gender});$scope.$apply(function(){$scope.signup.gender=genderItem})},function(){})})};$scope.onNextTapped=function(signup){var validator=new Validator;var validator=new Validator;validator.isEmpty($scope.signup.firstName,"Enter your first name","signup-firstName");validator.isEmpty($scope.signup.lastName,"Enter your last name","signup-lastName");validator.isEmpty($scope.signup.email,"Enter your email address","signup-email");validator.isEmpty($scope.signup.password,"Enter your password","signup-password");validator.isEmpty($scope.signup.country,"Enter your country","signup-country");validator.isEmpty($scope.signup.mobile.code,"Enter your mobile country code","signup-mobilecode");validator.isEmpty($scope.signup.mobile.number,"Enter your mobile number","signup-mobilenumber");validator.isEmpty($scope.signup.gender.value,"Enter your gender","signup-gender");if(!validator.isPassed()){$rootScope.onError.fire(validator.getErrorBlock());return}User.getInstance().firstName=$scope.signup.firstName;User.getInstance().lastName=$scope.signup.lastName;User.getInstance().email=$scope.signup.email;User.getInstance().password=$scope.signup.password;User.getInstance().country=$scope.signup.country;User.getInstance().mobile=Util.String("{0}{1}",[$scope.signup.mobile.code,$scope.signup.mobile.number]);User.getInstance().gender=$scope.signup.gender.value;popupMobileConfirm()};$ionicModal.fromTemplateUrl("templates/privacy.modal.html",{scope:$scope}).then(function(modal){$scope.onPrivacyTapped=function(){modal.show()};$scope.onHidePolicyTapped=function(){modal.hide()};$scope.$on("$destroy",function(){modal.remove()})});$ionicModal.fromTemplateUrl("templates/terms.modal.html",{
scope:$scope}).then(function(modal){$scope.onTermsTapped=function(){modal.show()};$scope.onHideTermsTapped=function(){modal.hide()};$scope.$on("$destroy",function(){modal.remove()})})}]);controllers.controller("UserController@profile",["$scope","$state","$stateParams","User","ImageManager","Callback","$rootScope","Settings","Error","Util","$ionicHistory","$cordovaDialogs","Validator",function($scope,$state,$stateParams,User,ImageManager,Callback,$rootScope,Settings,Error,Util,$ionicHistory,$cordovaDialogs,Validator){"use strict";$scope.user={firstName:User.getInstance().firstName.charAt(0).toUpperCase()+User.getInstance().firstName.substring(1),lastName:User.getInstance().lastName.charAt(0).toUpperCase()+User.getInstance().lastName.substring(1),gender:User.getInstance().gender,email:User.getInstance().email,mobile:User.getInstance().mobile,profilePicture:User.getInstance().profilePicture};var imageManager=new ImageManager;var validateProfilePicture=function(imageUrl,onSuccess){var defaultError=new Error("Error happened while setting profile picture, please try again");if(!imageUrl){$rootScope.onError.fire(defaultError);return}var MAX_SIZE=5*1024*1024;imageManager.fileMetadata(new Callback(function(metadata){if(!metadata.isImage())$rootScope.onError.fire(new Error("Please select an image type"));else if(metadata.size>MAX_SIZE)$rootScope.onError.fire(new Error("Please select an image less than 20 MB size"));else{onSuccess.fire()}}),$rootScope.onError)};$scope.onCameraTapped=function(){imageManager.locationed().fromCamera(new Callback(function(imageUrl){validateProfilePicture(imageUrl,new Callback(function(){$scope.user.profilePicture=imageUrl;$scope.$apply()}))}))};$scope.onGalleryTapped=function(){imageManager.locationed().fromGallery(new Callback(function(imageUrl){validateProfilePicture(imageUrl,new Callback(function(){$scope.user.profilePicture=imageUrl;$scope.$apply()}))}))};$scope.onEmergencyNumberTapped=function(){plugins.CallNumber.callNumber(function(){},function(e){$rootScope.onError.fire(new Error("Error while calling Eserviss emergency, try again later"))},Settings.getInstance().e_number)};$scope.onSaveTapped=function(profile){var validator=new Validator;validator.isEmpty(profile.firstName,"First name can't be empty","profile-firstName");validator.isEmpty(profile.lastName,"Last name can't be empty","profile-lastName");validator.isEmpty(profile.gender,"Gender can't be empty","profile-gender");validator.isEmpty(profile.email,"Email can't be empty","profile-email");validator.isEmpty(profile.mobile,"Mobile can't be empty","profile-mobile");if(!validator.isPassed()){$rootScope.onError.fire(validator.getErrorBlock());return}$rootScope.onProgress.fire();User.getInstance().updateProfile(profile,imageManager,new Callback(function(){$rootScope.onProgressDone.fire();$cordovaDialogs.alert("Your profile is updated successfully","Profile Update")}),$rootScope.onError)};$scope.onLogoutTapped=function(){$ionicHistory.nextViewOptions({disableBack:true});User.getInstance().logout();$state.go("landing")}}]);controllers.controller("UserController@forget",["$scope","$state","$stateParams","User","$ionicPopup","Validator","Callback","$rootScope","Error","$cordovaDialogs",function($scope,$state,$stateParams,User,$ionicPopup,Validator,Callback,$rootScope,Error,$cordovaDialogs){"use strict";var popupConfirmPhone=null;var STATE={VERIFY_MOBILE:0,RESET_PASSWORD:1};$scope.STATE=STATE;$scope.forgot={};$scope.state=STATE.VERIFY_MOBILE;$scope.onSmsTapped=function(forgot){var mobileValidator=new Validator;mobileValidator.isEmpty(forgot.mobile,"Mobile can't be empty","forgot-mobile");if(!mobileValidator.isPassed()){$rootScope.onError.fire(mobileValidator.getError());return}User.getInstance().mobile=forgot.mobile;User.getInstance().forgotPasswordSendSms(new Callback(function(){$scope.confirm={message:"Please enter confirmation code you recieved via sms!",buttons:{isSubmit:true},input:{placeholder:"CONFIRMATION CODE",isAllowed:true}};$scope.onSubmitTapped=function(code){popupConfirmPhone.close();User.getInstance().forgotPasswordValidateMobile(code,new Callback(function(){$scope.state=STATE.RESET_PASSWORD}),$rootScope.onError)};popupConfirmPhone=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm",scope:$scope})}),$rootScope.onError)};$scope.onResetTapped=function(forgot){var passwordValidator=new Validator;passwordValidator.isEmpty(forgot.password,"Password can't be empty","forgot-password");passwordValidator.isEmpty(forgot.confirmPassword,"Confirm password can't be empty","forgot-confirm-password");if(forgot.password!==forgot.confirmPassword){$rootScope.onError.fire(new Error("password don't match"));return}if(!passwordValidator.isPassed()){$rootScope.onError.fire(passwordValidator.getError());return}User.getInstance().password=forgot.password;User.getInstance().forgotPasswordReset(new Callback(function(){$cordovaDialogs.alert("Your password is reseted successfully","Password Reset").then(function(){$state.go("header.signin")})}),$rootScope.onError)}}]);controllers.controller("UserController@paymentsettings",["$scope","$state","$stateParams","$rootScope","User","Util","Callback","Validator","$cordovaDialogs",function($scope,$state,$stateParams,$rootScope,User,Util,Callback,Validator,$cordovaDialogs){"use strict";$scope.card={};$scope.creditCards=[];User.getInstance().findCreditCards(new Callback(function(creditCards){$scope.creditCards=creditCards;$scope.$apply()}),$rootScope.onError);var validateCreditInputs=function(credit){var validator=new Validator;validator.isEmpty(credit.name,"Please enter a valid credit card name","payment-cardname");validator.isEmpty(credit.number,"Please enter a valid credit card number","payment-cardnumber");validator.isEmpty(credit.cvc,"Please enter a valid credit card CVC","payment-cardcvc");validator.isEmpty(credit.exp_month,"Please enter a valid 2 DIGIT expiry month","payment-exp_month");validator.isEmpty(credit.exp_year,"Please enter a valid 2 DIGIT expiry year","payment-exp_year");if(!validator.isPassed()){$rootScope.onError.fire(validator.getErrorBlock());return false}return true};$scope.onEditSaveTapped=function(credit){if(validateCreditInputs(credit)){$rootScope.onProgress.fire();User.getInstance().saveCreditCard(credit,new Callback(function(motivationMessage){$rootScope.onProgressDone.fire();$cordovaDialogs.alert(motivationMessage,"Credit Card").then(function(){$state.go("menu.ridecredit")})}),$rootScope.onError)}};$scope.onPrepaidSubmitTapped=function(prepaidCode){var validator=new Validator;if(validator.isEmpty(prepaidCode,"Please enter a valid prepaid card code")){$rootScope.onError.fire(validator.getError());return}User.getInstance().prepaidCard(prepaidCode,new Callback(function(amount){$scope.prepaid="";User.getInstance().findCredit(new Callback(function(credit){console.log(credit);$cordovaDialogs.alert(Util.String("your account is recharged with {0} successfully, and your balance now is {1}",[amount,credit.cash]),"PrepaidCard")}),$rootScope.onError)}),$rootScope.onError)}}]);controllers.controller("UserController@ridecredit",["$scope","$state","$stateParams","User","Callback","$rootScope","Util","$cordovaDialogs","Validator","Error",function($scope,$state,$stateParams,User,Callback,$rootScope,Util,$cordovaDialogs,Validator,Error){"use strict";$scope.recharge={};$scope.credit=null;var findCredit=function(){User.getInstance().findCredit(new Callback(function(credit){console.log(credit);$scope.credit=credit;$scope.$apply()}),$rootScope.onError)};findCredit();var validateRechargeInputs=function(recharge){if(!User.getInstance().isStripeCustomerCreated()){$rootScope.onError.fire(new Error("Please enter your credit card first"));return false}var validator=new Validator;if(validator.isEmpty(recharge.amount,"Please enter a valid recharge amount")){$rootScope.onError.fire(validator.getError());return false}return true};$scope.onSubmitTapped=function(recharge){if(validateRechargeInputs(recharge)){var amount=recharge.amount*100;User.getInstance().recharge(amount,new Callback(function(){findCredit();$cordovaDialogs.alert(Util.String("Your account is charged successfuly with {0}$",[recharge.amount]),"Recharge")}),$rootScope.onError)}}}]);controllers.controller("UserController@blacklist",["$scope","$state","$stateParams","User","Callback","$rootScope","Util",function($scope,$state,$stateParams,User,Callback,$rootScope,Util){"use strict";var fakeProgress=angular.element(document.getElementById("fake-progress")),spamProgress=angular.element(document.getElementById("spam-progress"));User.getInstance().findBlacklist(new Callback(function(r){fakeProgress.css("width",Util.String("{0}%",[r.fake]));spamProgress.css("width",Util.String("{0}%",[r.spam]))}),$rootScope.onError)}]);controllers.controller("HailRequestController@request",["$scope","$state","$stateParams","mapEngine","$rootScope","Callback","User","Geolocation","$timeout","$ionicPopup","HailRequest","Mode","Util","$ionicLoading","$ionicPopover","$ionicHistory","Validator","$ionicSideMenuDelegate","$cordovaDialogs",function($scope,$state,$stateParams,mapEngine,$rootScope,Callback,User,Geolocation,$timeout,$ionicPopup,HailRequest,Mode,Util,$ionicLoading,$ionicPopover,$ionicHistory,Validator,$ionicSideMenuDelegate,$cordovaDialogs){"use strict";var REQUEST_STATE={INIT:0,HAIL:1,REQUEST_CAB:1.5,PICKUP:2,DROPOFF:3,MEETING_POINT:3.5,CONFIRM_MEETING_POINT:3.75,FARE:4};$scope.REQUEST_STATE=REQUEST_STATE;var fareConfirm=null,commentConfirm=null,meetingPointConfirm=null,dragDealer=null,pickmenuBorder=angular.element(document.getElementById("pickmenuBorder")),navBtn=null;$scope.requestState=REQUEST_STATE.INIT;$scope.request=new HailRequest;Mode.FindAll(new Callback(function(){console.log(Mode.FindById(Mode.ID.TAXI));$scope.request.setMode(Mode.FindById(Mode.ID.TAXI))}));var updateView=function(){var navBack=function(){navBtn=angular.element(document.getElementById("navBtn"));navBtn.removeClass("ion-navicon");navBtn.addClass("ion-arrow-left-c");console.log("navBack",navBtn)};var navMenu=function(){navBtn=angular.element(document.getElementById("navBtn"));navBtn.removeClass("ion-arrow-left-c");navBtn.addClass("ion-navicon")};if($scope.requestState===REQUEST_STATE.INIT){mapEngine.navigationInfoWindowLeftText("img/icons/info-hail.png");mapEngine.navigationInfoWindowRightText("HAIL");navMenu();dragDealer.enable()}else if($scope.requestState===REQUEST_STATE.HAIL){mapEngine.navigationInfoWindowRightText("SET PICKUP");mapEngine.navigationInfoWindowLeftText("img/icons/info-pickup.png");navBack();dragDealer.disable()}else if($scope.requestState===REQUEST_STATE.PICKUP){mapEngine.navigationInfoWindowRightText("CONFIRM PICKUP");mapEngine.navigationInfoWindowLeftText("img/icons/info-pickup.png");pickmenuBorder.css("height","50%");navBack();dragDealer.disable()}else if($scope.requestState===REQUEST_STATE.REQUEST_CAB){mapEngine.navigationInfoWindowRightText("REQUEST CAB");navBack()}else if($scope.requestState===REQUEST_STATE.MEETING_POINT){mapEngine.navigationInfoWindowRightText("MEETING POINT");mapEngine.navigationInfoWindowLeftText(null,$scope.request.nearestPoint.distance)}else if($scope.requestState===REQUEST_STATE.CONFIRM_MEETING_POINT){mapEngine.navigationInfoWindowRightText("CONFIRM");mapEngine.navigationInfoWindowLeftText("img/icons/info-dropoff.png")}else if($scope.requestState===REQUEST_STATE.DROPOFF){mapEngine.navigationInfoWindowRightText("CONFIRM DROPOFF");mapEngine.navigationInfoWindowLeftText("img/icons/info-dropoff.png");navBack();pickmenuBorder.css("height","75%");dragDealer.disable()}else if($scope.requestState===REQUEST_STATE.FARE){mapEngine.navigationInfoWindowRightText("WAIT");navBack();dragDealer.disable()}if($scope.request.mode)mapEngine.navigationInfoWindowLeftText(null,$scope.request.mode.etaTime+"min");$scope.$apply()};var rebuildSyncedRequest=function(){if($stateParams.request!==null){$scope.request=$stateParams.request;if($scope.request.mode!==null){if($scope.request.mode.id===Mode.ID.SERVISS)dragDealer.setStep(1);else if($scope.request.mode.id===Mode.ID.SERVISS_PLUS)dragDealer.setStep(2);else if($scope.request.mode.id===Mode.ID.TAXI)dragDealer.setStep(3)}else{$scope.request.setMode(Mode.FindById(Mode.ID.SERVISS))}if($scope.request.pickupLocation!==null){if($scope.request.mode.isTaxi())$scope.requestState=REQUEST_STATE.REQUEST_CAB;else $scope.requestState=REQUEST_STATE.PICKUP}else if($scope.request.dropoffLocation!==null)$scope.requestState=REQUEST_STATE.DROPOFF;console.log($scope.requestState);$timeout(updateView,100)}};var resetRequest=function(){if($scope.request.nearestPointWatch){console.log("nearestPointWatch",$scope.request.nearestPointWatch);$scope.request.nearestPointWatch.stopWatching()}mapEngine.gMapsInstance.removePolylines();$scope.requestState=REQUEST_STATE.INIT;$scope.request=new HailRequest;$scope.request.setMode(Mode.FindById(Mode.ID.TAXI));dragDealer.setStep(3);mapEngine.getMap().setZoom(14);updateView()};$scope.onResetTapped=resetRequest;$scope.onNavTapped=function(){if($scope.requestState===REQUEST_STATE.INIT)$ionicSideMenuDelegate.toggleLeft();else{resetRequest()}};var onNearbyCarsFound=new Callback(function(nearByCars){if(!mapEngine.isReady)return;mapEngine.gMapsInstance.removeMarkers();for(var i=0;i<nearByCars.length;i++){var position=Geolocation.ParsePosition(nearByCars[i].car_location);mapEngine.addMarker(position.lat(),position.lng(),nearByCars[i].image)}});var initModeSelect=function(){$scope.step=1;dragDealer=new Dragdealer("mode-select",{steps:3,loose:true,tapping:true,callback:function(x,y){$scope.step=dragDealer.getStep()[0];$scope.request.setMode(Mode.FromDragDealer($scope.step));User.getInstance().findNearbyCars($scope.request.mode,onNearbyCarsFound);$scope.$apply()}});dragDealer.reflow();dragDealer.setStep(3);Mode.FindAll(new Callback(function(){User.getInstance().findNearbyCars($scope.request.mode,onNearbyCarsFound)}))};var validateDropoffLocation=function(dropoffLocation){if(dropoffLocation===null)$rootScope.onError.fire(new Error("You can't set a dropoff location more than 10 KM"))};var onPlaceChanged=function(place){if(!place||!place.geometry)return;if(place.geometry.viewport){mapEngine.getMap().fitBounds(place.geometry.viewport)}else{mapEngine.getMap().setCenter(place.geometry.location)}mapEngine.getMap().setZoom(17)};$scope.onPickupLocationSelected=function(place){if(!place.geometry){$scope.request.pickupAddress=""}else{onPlaceChanged(place);$scope.request.pickupLocation=place.geometry.location}$scope.$apply()};$scope.onDropoffLocationSelected=function(place){if(!place.geometry){$scope.request.dropoffAddress=""}else{onPlaceChanged(place);$scope.request.dropoffLocation=place.geometry.location;validateDropoffLocation($scope.request.dropoffLocation)}$scope.$apply()};var initModesPopovers=function(){$ionicPopover.fromTemplateUrl("mode.popover.html",{scope:$scope}).then(function(popover){$scope.openPopover=function(event,step){if(!step)step=$scope.step;popover.show(event)};$scope.$on("$destroy",function(){popover.remove()})})};initModeSelect();initModesPopovers();$scope.onRequestPlusTapped=function(){if($scope.request.passengers<$scope.request.mode.maxPassengers)$scope.request.passengers++};$scope.onRequestMinusTapped=function(){if($scope.request.passengers>1)$scope.request.passengers--};$scope.onPickupTapped=function(){$state.go("menu.pickuplocations",{request:$scope.request})};mapEngine.ready(function(){var service=new google.maps.places.PlacesService(mapEngine.getMap());var lebanon=new google.maps.LatLng(33.89,35.51);service.textSearch({location:lebanon,query:"egnyt",radius:"50000"},function(r,s){console.log(r,s)});var onDestinationLocationChange=new Callback(function(){var g=new Geolocation;$rootScope.onProgress.fire();var locationLatLng=mapEngine.getCenter();g.latlngToAddress(locationLatLng,new Callback(function(address){console.log(address);if(address.toUpperCase().indexOf("UNNAMED")>-1)address="No street name";if($scope.requestState===REQUEST_STATE.HAIL||$scope.requestState===REQUEST_STATE.PICKUP||$scope.requestState===REQUEST_STATE.REQUEST_CAB){$scope.request.pickupLocation=locationLatLng;$scope.request.pickupAddress=address;console.log($scope.request.pickupAddress)}else if($scope.requestState===REQUEST_STATE.DROPOFF){$scope.request.dropoffAddress=address;$scope.request.dropoffLocation=locationLatLng;validateDropoffLocation($scope.request.dropoffLocation)}$rootScope.onProgressDone.fire();$scope.$apply()}),$rootScope.onError)});mapEngine.gMapsInstance.on("dragend",function(){if($scope.request.mode){$scope.request.mode.eta();mapEngine.navigationInfoWindowLeftText(null,$scope.request.mode.etaTime+"min")}if($scope.requestState===REQUEST_STATE.PICKUP||$scope.requestState===REQUEST_STATE.DROPOFF)onDestinationLocationChange.fire()});var onHailRequestPickedup=new Callback(function(){mapEngine.drawRoute({origin:[$scope.request.pickupLocation.lat(),$scope.request.pickupLocation.lng()],destination:[$scope.request.dropoffLocation.lat(),$scope.request.dropoffLocation.lng()],travelMode:"driving",strokeColor:"#7EBBFE",strokeWeight:7});$scope.requestState=REQUEST_STATE.FARE;updateView();$scope.request.estimateCost(new Callback(function(cost){$scope.confirm={title:"FARE ESTIMATION",message:Util.String("{0} USD for {1}",[cost,$scope.request.mode.name]),buttons:{isSubmit:false,yes:"CONFIRM",no:"CANCEL",promotePositive:true}};$scope.onNoTapped=function(){fareConfirm.close();resetRequest()};$scope.onYesTapped=function(){fareConfirm.close();$scope.onSubmitTapped=function(comment){$scope.request.comment=comment;commentConfirm.close();$ionicLoading.show({template:"Matching you with a Driver now!"});$scope.request.make(User.getInstance(),new Callback(function(driver){mapEngine.gMapsInstance.off("dragend");$ionicLoading.hide();$ionicHistory.clearCache();$state.go("menu.requestconfirmed",{request:$scope.request})}),new Callback(function(e){$rootScope.onError.fire(e);resetRequest()}))};$scope.confirm={message:"Send a Note About Your Location So Driver Can Find You Quicker",buttons:{isSubmit:true},input:{data:$scope.request.comment,placeholder:"I am next to beirut municipality entrance",isAllowed:true}};$timeout(function(){commentConfirm=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm text-center",scope:$scope})},500)};fareConfirm=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm text-center",scope:$scope})}),new Callback(function(e){$rootScope.onError.fire(e);$scope.requestState=REQUEST_STATE.DROPOFF;updateView()}))});var onLocationEnabled=new Callback(function(){$scope.myLocationTapped=function(){User.getInstance().findPosition(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng())}))};var g=new Geolocation;User.getInstance().findPosition(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng())}),$rootScope.onError);mapEngine.navigationMarker(function(){});mapEngine.navigationInfo(function(){if($scope.requestState===REQUEST_STATE.INIT){$scope.request.inService(new Callback(function(){onDestinationLocationChange.fire();if($scope.request.mode.isTaxi()){$scope.requestState=REQUEST_STATE.REQUEST_CAB}else{$scope.requestState=REQUEST_STATE.PICKUP}updateView()}),$rootScope.onError)}else if($scope.requestState===REQUEST_STATE.PICKUP){$scope.request.inService(new Callback(function(){$scope.requestState=REQUEST_STATE.DROPOFF;updateView()}),$rootScope.onError)}else if($scope.requestState===REQUEST_STATE.REQUEST_CAB){$scope.request.inService(new Callback(function(){mapEngine.gMapsInstance.off("dragend");$state.go("menu.sendnote",{request:$scope.request})}),$rootScope.onError)}else if($scope.requestState===REQUEST_STATE.DROPOFF){var validator=new Validator;if(validator.isNull($scope.request.dropoffLocation,"Please enter dropoff location first")){$rootScope.onError.fire(validator.getError());return}$scope.request.inService(new Callback(function(){if($scope.request.mode.id===Mode.ID.SERVISS){$scope.request.validateServicePickup(new Callback(function(isNear){if(isNear){onHailRequestPickedup.fire();return}$scope.confirm={title:"MEETING POINT",message:$scope.request.nearestPoint.message,buttons:{isSubmit:false,yes:"ACCEPT",no:"CHOOSE TAXI"}};$scope.onNoTapped=function(){meetingPointConfirm.close();resetRequest()};$scope.onYesTapped=function(){var nearestPointImg=angular.element(document.getElementById("meetingpointImg"));meetingPointConfirm.close();$scope.requestState=REQUEST_STATE.MEETING_POINT;updateView();$scope.request.nearestPoint.header.line[0]=" START WALKING TOWARDS MEETING POINT NOW";nearestPointImg.css("vertical-align","middle");$scope.request.watchToMeetingPoint(new Callback(function(userPosition){mapEngine.drawRoute({origin:[userPosition.lat(),userPosition.lng()],destination:[$scope.request.nearestPoint.location.lat(),$scope.request.nearestPoint.location.lng()],travelMode:"walking",strokeColor:"#7EBBFE",strokeWeight:7});mapEngine.setCenter($scope.request.nearestPoint.location.lat(),$scope.request.nearestPoint.location.lng())}),new Callback(function(){$scope.request.nearestPoint.header.line[0]="YOU HAVE REACHED YOUR MEETING POINT!";$scope.request.nearestPoint.header.line[1]="PLEASE CONFIRM YOUR RIDE REQUEST";nearestPointImg.css("vertical-align","top");$scope.requestState=REQUEST_STATE.CONFIRM_MEETING_POINT;updateView()}),new Callback(function(){$scope.request.nearestPoint.header.line[0]="YOU ARE CLOSE TO MEETING POINT";nearestPointImg.css("vertical-align","middle")},1),$rootScope.onError)};meetingPointConfirm=$ionicPopup.confirm({templateUrl:"templates/confirm.popup.html",cssClass:"eserviss-confirm text-center",scope:$scope})}),$rootScope.onError)}else{onHailRequestPickedup.fire()}}),$rootScope.onError)}else if($scope.requestState===REQUEST_STATE.MEETING_POINT){$cordovaDialogs.alert("Eserviss is wathcing your position until you reach the meeting point","Meeting Point")}else if($scope.requestState===REQUEST_STATE.CONFIRM_MEETING_POINT){mapEngine.gMapsInstance.removePolylines();$scope.request.pickupLocation=$scope.request.nearestPoint.location.toLatLng();var g=new Geolocation;g.latlngToAddress($scope.request.pickupLocation,new Callback(function(address){$scope.request.pickupAddress=address;$scope.$apply()}));onHailRequestPickedup.fire()}$scope.$apply()});updateView();rebuildSyncedRequest()});$rootScope.ifLocationEnabled(onLocationEnabled)});$scope.$on("$destroy",function(){})}]);controllers.controller("HailRequestController@confirmed",["$scope","$state","$stateParams","mapEngine","User","$rootScope","Callback","Util","Geolocation",function($scope,$state,$stateParams,mapEngine,User,$rootScope,Callback,Util,Geolocation){"use strict";var confirmedScrollElem=angular.element(document.getElementById("confirmedScroll")),infoElem=angular.element(document.getElementById("info")),geolocation=new Geolocation;$scope.request=$stateParams.request;$scope.infoState=1;$scope.onCloseTapped=function(){if($scope.infoState===1){confirmedScrollElem.removeClass("slideOutDown");confirmedScrollElem.removeClass("slideInDown");confirmedScrollElem.addClass("slideOutDown");infoElem.css("height","auto");$scope.infoState=0}else if($scope.infoState===0){confirmedScrollElem.removeClass("slideOutDown");confirmedScrollElem.removeClass("slideInDown");confirmedScrollElem.addClass("slideInDown");infoElem.css("height","50%");$scope.infoState=1}};$scope.onContactTapped=function(){plugins.listpicker.showPicker({title:"Contact Driver",items:[{text:"Send a Message",value:"MESSAGE"},{text:"Call Driver",value:"CALL"}]},function(action){if(action==="MESSAGE"){plugins.socialsharing.shareViaSMS({message:""},$scope.driver.DriverPhone,null,function(){})}else if(action==="CALL"){plugins.CallNumber.callNumber(function(){},function(e){$rootScope.onError.fire(new Error(e,true,true))},$scope.driver.DriverPhone)}},function(){})};$scope.onShareEtaTapped=function(){var POST_MESSAGE=Util.String("Get Eserviss app at http://eserviss.com/app");var POST_TITLE="Eserviss";plugins.socialsharing.share(POST_MESSAGE,POST_TITLE)};var initSync=function(){$scope.request.sync(User.getInstance(),new Callback(function(){$scope.$apply()}),$rootScope.onError);$scope.request.onDroppedoff=new Callback(function(){geolocation.stopWatching();$state.go("menu.receipt",{request:$scope.request})})};initSync();var onLocationEnabled=new Callback(function(){User.getInstance().findPosition(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng())}),$rootScope.onError);if($scope.request.dropoffLocation){mapEngine.drawRoute({origin:[$scope.request.pickupLocation.lat(),$scope.request.pickupLocation.lng()],destination:[$scope.request.dropoffLocation.lat(),$scope.request.dropoffLocation.lng()],travelMode:"driving",strokeColor:"#7EBBFE",strokeWeight:7})}geolocation.watch(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng())}))});mapEngine.ready(function(){$rootScope.ifLocationEnabled(onLocationEnabled)});$scope.$on("$destroy",function(){geolocation.stopWatching()})}]);controllers.controller("HailRequestController@receipt",["$scope","$state","$stateParams","Validator","$rootScope","Callback","$ionicHistory","User","$cordovaDialogs","$timeout",function($scope,$state,$stateParams,Validator,$rootScope,Callback,$ionicHistory,User,$cordovaDialogs,$timeout){"use strict";$ionicHistory.nextViewOptions({disableBack:true});var today=new Date;$scope.date={day:today.getDate(),month:today.toDateString().split(" ")[1],year:today.getFullYear()};$scope.request=$stateParams.request;$scope.receipt={};$scope.request.consumeCost(User.getInstance(),new Callback(function(){$cordovaDialogs.alert("Your trip cost has been charged from your balance","Trip Cost")}),$rootScope.onError);$scope.onSubmitTapped=function(receipt){var validator=new Validator;if(validator.isEmpty(receipt.rating,"Please insert rating first in your feedback")||validator.isEmpty(receipt.comment,"Please insert comment first in your feedback")){$rootScope.onError.fire(validator.getError());return}$scope.request.feedback(User.getInstance(),$scope.receipt.rating,$scope.receipt.comment,new Callback(function(){$ionicHistory.clearCache();$timeout(function(){$state.go("menu.hailrequest",{},{reload:true})},50)}),$rootScope.onError)}}]);controllers.controller("HailRequestController@pickuplocations",["$scope","$state","$stateParams","$ionicHistory","$timeout",function($scope,$state,$stateParams,$ionicHistory,$timeout){"use strict";$scope.request=$stateParams.request;$ionicHistory.nextViewOptions({disableBack:true});$scope.onLocationSelected=function(place){var location=place.geometry.location;$scope.request.pickupLocation=location};$scope.onDoneTapped=function(){if($ionicHistory.backView().stateName==="menu.hailrequest"){$ionicHistory.clearCache();$timeout(function(){$ionicHistory.backView().stateParams.request=$scope.request;$ionicHistory.goBack()},50)}else{$ionicHistory.goBack()}}}]);controllers.controller("HailRequestController@estimationfee",["$scope","$state","$stateParams","$ionicHistory","$timeout","Callback","$rootScope",function($scope,$state,$stateParams,$ionicHistory,$timeout,Callback,$rootScope){"use strict";$scope.request=$stateParams.request;$ionicHistory.nextViewOptions({disableBack:true});$scope.onLocationSelected=function(place){var location=place.geometry.location;$scope.request.dropoffLocation=location;$timeout(function(){$scope.request.estimateCost(null,$rootScope.onError)},500)};$scope.onDoneTapped=function(){if($ionicHistory.backView().stateName==="menu.hailrequest"){$ionicHistory.clearCache();$timeout(function(){$ionicHistory.backView().stateParams.request=$scope.request;$ionicHistory.goBack()},50)}else{$ionicHistory.goBack()}}}]);controllers.controller("HailRequestController@sendnote",["$scope","$state","$stateParams","$ionicHistory","$timeout","Callback","$rootScope","User","$ionicLoading",function($scope,$state,$stateParams,$ionicHistory,$timeout,Callback,$rootScope,User,$ionicLoading){"use strict";$scope.request=$stateParams.request;var loadingUpdateTimeout=null;$ionicHistory.nextViewOptions({disableBack:true});$scope.onConfirmTapped=function(){$ionicLoading.show({template:"Matching you with a Driver now!"});loadingUpdateTimeout=$timeout(function(){$ionicLoading.show({template:"Search for more cars..."})},3e4);$scope.request.make(User.getInstance(),new Callback(function(driver){console.log("success request called");if(loadingUpdateTimeout){$timeout.cancel(loadingUpdateTimeout);loadingUpdateTimeout=null}$ionicLoading.hide();$ionicHistory.clearCache();$state.go("menu.requestconfirmed",{request:$scope.request})}),new Callback(function(e){console.log("fail request called");if(loadingUpdateTimeout){$timeout.cancel(loadingUpdateTimeout);loadingUpdateTimeout=null}$ionicLoading.hide();$rootScope.onError.fire(e)}))}}]);controllers.controller("FavoriteController@favorties",["$scope","$state","$stateParams","User","Callback","$rootScope",function($scope,$state,$stateParams,User,Callback,$rootScope){"use strict";User.getInstance().findFavorites(new Callback(function(favorites){$scope.favorites=favorites.splice(0,4)}),$rootScope.onError);$scope.onFavoriteTapped=function(favorite,i){console.log(favorite,i);$state.go("menu.addfavorite",{mode:i,favorite:favorite})}}]);controllers.controller("FavoriteController@addfavorite",["$scope","$state","$stateParams","Favorite","Validator","mapEngine","Callback","User","$rootScope","Geolocation","$cordovaDialogs",function($scope,$state,$stateParams,Favorite,Validator,mapEngine,Callback,User,$rootScope,Geolocation,$cordovaDialogs){"use strict";$scope.mode=$stateParams.mode;$scope.favorite=$stateParams.favorite;$scope.onSetLocationTapped=function(favorite){var validator=new Validator;validator.isEmpty(favorite.name,"Please enter a valid name","addfavorite-name");validator.isEmpty(favorite.address,"Please enter a valid address","addfavorite-address");validator.isNull(favorite.location,"Please enter a valid location","addfavorite-address");if(!validator.isPassed()){$rootScope.onError.fire(validator.getError());return}$scope.favorite.save(new Callback(function(){$cordovaDialogs.alert("Favorite is saved successfuly","Favorite").then(function(){$state.go("menu.favorites")})}),$rootScope.onError)};var onLocationEnabled=new Callback(function(){$scope.myLocationTapped=function(){User.getInstance().findPosition(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng())}))};mapEngine.navigationMarker(function(){});User.getInstance().findPosition(new Callback(function(position){mapEngine.addUserAccuracy(position.lat(),position.lng(),position.accuracy);mapEngine.setCenter(position.lat(),position.lng());mapEngine.gMapsInstance.on("dragend",function(){var g=new Geolocation;$rootScope.onProgress.fire();var locationLatLng=mapEngine.getCenter();g.latlngToAddress(locationLatLng,new Callback(function(address){if(address.toUpperCase().indexOf("UNNAMED")>-1)address="No street name";$scope.favorite.address=address;$scope.favorite.location=locationLatLng;$rootScope.onProgressDone.fire();$scope.$apply()}),$rootScope.onError)})}),$rootScope.onError)});mapEngine.ready(function(){if($scope.favorite.location.lat()&&$scope.favorite.location.lng()){mapEngine.setCenter($scope.favorite.location.lat(),$scope.favorite.location.lng())}$rootScope.ifLocationEnabled(onLocationEnabled)});$scope.onAddressSelected=function(place){if(!place||!place.geometry)return;if(place.geometry.viewport){mapEngine.getMap().fitBounds(place.geometry.viewport)}else{mapEngine.getMap().setCenter(place.geometry.location)}mapEngine.getMap().setZoom(17)};$scope.$on("$destroy",function(){
mapEngine.gMapsInstance.off("dragend")})}]);controllers.controller("GuestController@share",["$scope","$state","$stateParams","User","Callback","$rootScope","Util",function($scope,$state,$stateParams,User,Callback,$rootScope,Util){"use strict";var POST_MESSAGE="Get Eserviss app at http://eserviss.com/app";var POST_TITLE="Eserviss";User.getInstance().findShare(new Callback(function(share){$scope.share=share;POST_MESSAGE=Util.String("Get Eserviss app at http://eserviss.com/app, Referal code is {0}",[share.code])}),$rootScope.onError);$scope.onCopyReferalLink=function(){if(typeof cordova==="undefined")return;cordova.plugins.clipboard.copy(POST_MESSAGE);$cordovaToast.showLongBottom("Your referal link copied").then(function(success){},function(error){})};var shareActionsheet=function(message,title){if(!message)message=POST_MESSAGE;if(!title)title=POST_TITLE;plugins.socialsharing.share(message,title)};$scope.onSmsTapped=function(){plugins.socialsharing.shareViaSMS({message:POST_MESSAGE},null,null,shareActionsheet)};$scope.onFacebookTapped=function(){plugins.socialsharing.shareViaFacebookWithPasteMessageHint(POST_MESSAGE,null,null,"Your referal post is copied, paste it if you like",null,shareActionsheet)};$scope.onGoogleTapped=function(){if(ionic.Platform.isAndroid()){plugins.socialsharing.shareVia("com.google.android.apps.plus",POST_MESSAGE,POST_TITLE,null,null,null,shareActionsheet)}else{shareActionsheet()}};$scope.onTwitterTapped=function(){plugins.socialsharing.shareViaTwitter(POST_MESSAGE,null,null,null,shareActionsheet)};$scope.onWhatsappTapped=function(){plugins.socialsharing.shareViaWhatsApp(POST_MESSAGE,null,null,null,shareActionsheet)}}]);controllers.controller("PromoController@promotions",["$scope","$state","$stateParams","Promotion","User","$rootScope","Callback",function($scope,$state,$stateParams,Promotion,User,$rootScope,Callback){"use strict";Promotion.FindAll(User.getInstance(),new Callback(function(promotions){$scope.promotions=promotions}),$rootScope.onError)}]);